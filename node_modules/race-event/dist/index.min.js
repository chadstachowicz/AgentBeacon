(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.RaceEvent = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var RaceEvent=(()=>{var f=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var P=(r,e)=>{for(var n in e)f(r,n,{get:e[n],enumerable:!0})},p=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of m(e))!x.call(r,t)&&t!==n&&f(r,t,{get:()=>e[t],enumerable:!(o=y(e,t))||o.enumerable});return r};var A=r=>p(f({},"__esModule",{value:!0}),r);var T={};P(T,{raceEvent:()=>C});var c=class extends Error{static name="AbortError";name="AbortError";constructor(e="The operation was aborted",...n){super(e,...n)}};async function C(r,e,n,o){let t=new c(o?.errorMessage);o?.errorCode!=null&&(t.code=o.errorCode);let E=o?.errorEvent??"error";return n?.aborted===!0?Promise.reject(t):new Promise((h,i)=>{function a(){d(n,"abort",L),d(r,e,l),d(r,E,v)}let l=s=>{try{if(o?.filter?.(s)===!1)return}catch(w){a(),i(w);return}a(),h(s)},v=s=>{if(a(),s instanceof Error){i(s);return}i(s.detail??o?.error??new Error(`The "${o?.errorEvent}" event was emitted but the event had no '.detail' field. Pass an 'error' option to race-event to change this message.`))},L=()=>{a(),i(t)};u(n,"abort",L),u(r,e,l),u(r,E,v)})}function u(r,e,n){r!=null&&(b(r)?r.addListener(e,n):r.addEventListener(e,n))}function d(r,e,n){r!=null&&(b(r)?r.removeListener(e,n):r.removeEventListener(e,n))}function b(r){return typeof r.on=="function"&&typeof r.emit=="function"}return A(T);})();
return RaceEvent}));
//# sourceMappingURL=index.min.js.map
