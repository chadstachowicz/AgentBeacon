import { logger } from '@libp2p/logger';
import { nopSink, nopSource } from './util.js';
const log = logger('libp2p:webrtc:connection');
export class WebRTCMultiaddrConnection {
    /**
     * WebRTC Peer Connection
     */
    peerConnection;
    /**
     * The multiaddr address used to communicate with the remote peer
     */
    remoteAddr;
    /**
     * Holds the lifecycle times of the connection
     */
    timeline;
    /**
     * Optional metrics counter group for this connection
     */
    metrics;
    /**
     * The stream source, a no-op as the transport natively supports multiplexing
     */
    source = nopSource();
    /**
     * The stream destination, a no-op as the transport natively supports multiplexing
     */
    sink = nopSink;
    constructor(init) {
        this.remoteAddr = init.remoteAddr;
        this.timeline = init.timeline;
        this.peerConnection = init.peerConnection;
    }
    async close(err) {
        if (err !== undefined) {
            log.error('error closing connection', err);
        }
        log.trace('closing connection');
        this.timeline.close = Date.now();
        this.peerConnection.close();
        this.metrics?.increment({ close: true });
    }
}
//# sourceMappingURL=maconn.js.map