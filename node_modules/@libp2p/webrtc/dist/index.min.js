(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PWebrtc = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PWebrtc=(()=>{var fb=Object.create;var $s=Object.defineProperty;var lb=Object.getOwnPropertyDescriptor;var hb=Object.getOwnPropertyNames;var db=Object.getPrototypeOf,pb=Object.prototype.hasOwnProperty;var Ge=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ze=(t,e)=>{for(var r in e)$s(t,r,{get:e[r],enumerable:!0})},bl=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hb(e))!pb.call(t,i)&&i!==r&&$s(t,i,{get:()=>e[i],enumerable:!(n=lb(e,i))||n.enumerable});return t};var G=(t,e,r)=>(r=t!=null?fb(db(t)):{},bl(e||!t||!t.__esModule?$s(r,"default",{value:t,enumerable:!0}):r,t)),yb=t=>bl($s({},"__esModule",{value:!0}),t);var wl=_((yA,xl)=>{var Kn=1e3,Vn=Kn*60,qn=Vn*60,cn=qn*24,gb=cn*7,bb=cn*365.25;xl.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return mb(t);if(r==="number"&&isFinite(t))return e.long?wb(t):xb(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function mb(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*bb;case"weeks":case"week":case"w":return r*gb;case"days":case"day":case"d":return r*cn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*qn;case"minutes":case"minute":case"mins":case"min":case"m":return r*Vn;case"seconds":case"second":case"secs":case"sec":case"s":return r*Kn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function xb(t){var e=Math.abs(t);return e>=cn?Math.round(t/cn)+"d":e>=qn?Math.round(t/qn)+"h":e>=Vn?Math.round(t/Vn)+"m":e>=Kn?Math.round(t/Kn)+"s":t+"ms"}function wb(t){var e=Math.abs(t);return e>=cn?Ys(t,e,cn,"day"):e>=qn?Ys(t,e,qn,"hour"):e>=Vn?Ys(t,e,Vn,"minute"):e>=Kn?Ys(t,e,Kn,"second"):t+" ms"}function Ys(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Dc=_((gA,vl)=>{function vb(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=wl(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=e;function r(f){let l,h=null,p,d;function y(...g){if(!y.enabled)return;let b=y,v=Number(new Date),w=v-(l||v);b.diff=w,b.prev=l,b.curr=v,l=v,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let C=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(S,T)=>{if(S==="%%")return"%";C++;let I=r.formatters[T];if(typeof I=="function"){let O=g[C];S=I.call(b,O),g.splice(C,1),C--}return S}),r.formatArgs.call(b,g),(b.log||r.log).apply(b,g)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,d=r.enabled(f)),d),set:g=>{h=g}}),typeof r.init=="function"&&r.init(y),y}function n(f,l){let h=r(this.namespace+(typeof l>"u"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),p=h.length;for(l=0;l<p;l++)h[l]&&(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}vl.exports=vb});var El=_((St,Js)=>{St.formatArgs=Sb;St.save=_b;St.load=Ab;St.useColors=Eb;St.storage=Cb();St.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();St.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Eb(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Sb(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Js.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}St.log=console.debug||console.log||(()=>{});function _b(t){try{t?St.storage.setItem("debug",t):St.storage.removeItem("debug")}catch{}}function Ab(){let t;try{t=St.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Cb(){try{return localStorage}catch{}}Js.exports=Dc()(St);var{formatters:Db}=Js.exports;Db.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var _l=_((bA,Sl)=>{"use strict";Sl.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var Cl=_((mA,Al)=>{"use strict";var Tb=Ge("os"),Ft=_l(),ft=process.env,Hn;Ft("no-color")||Ft("no-colors")||Ft("color=false")?Hn=!1:(Ft("color")||Ft("colors")||Ft("color=true")||Ft("color=always"))&&(Hn=!0);"FORCE_COLOR"in ft&&(Hn=ft.FORCE_COLOR.length===0||parseInt(ft.FORCE_COLOR,10)!==0);function Bb(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Ib(t){if(Hn===!1)return 0;if(Ft("color=16m")||Ft("color=full")||Ft("color=truecolor"))return 3;if(Ft("color=256"))return 2;if(t&&!t.isTTY&&Hn!==!0)return 0;let e=Hn?1:0;if(process.platform==="win32"){let r=Tb.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in ft)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in ft)||ft.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in ft)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ft.TEAMCITY_VERSION)?1:0;if(ft.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ft){let r=parseInt((ft.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ft.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ft.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ft.TERM)||"COLORTERM"in ft?1:(ft.TERM==="dumb",e)}function Tc(t){let e=Ib(t);return Bb(e)}Al.exports={supportsColor:Tc,stdout:Tc(process.stdout),stderr:Tc(process.stderr)}});var Tl=_((Qe,Qs)=>{var kb=Ge("tty"),Zs=Ge("util");Qe.init=Fb;Qe.log=Ob;Qe.formatArgs=Nb;Qe.save=Pb;Qe.load=Ub;Qe.useColors=Lb;Qe.destroy=Zs.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Qe.colors=[6,2,3,4,5,1];try{let t=Cl();t&&(t.stderr||t).level>=2&&(Qe.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Qe.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function Lb(){return"colors"in Qe.inspectOpts?!!Qe.inspectOpts.colors:kb.isatty(process.stderr.fd)}function Nb(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Qs.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Rb()+e+" "+t[0]}function Rb(){return Qe.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Ob(...t){return process.stderr.write(Zs.format(...t)+`
`)}function Pb(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Ub(){return process.env.DEBUG}function Fb(t){t.inspectOpts={};let e=Object.keys(Qe.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Qe.inspectOpts[e[r]]}Qs.exports=Dc()(Qe);var{formatters:Dl}=Qs.exports;Dl.o=function(t){return this.inspectOpts.colors=this.useColors,Zs.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Dl.O=function(t){return this.inspectOpts.colors=this.useColors,Zs.inspect(t,this.inspectOpts)}});var Bl=_((xA,Bc)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Bc.exports=El():Bc.exports=Tl()});var rh=_((BC,th)=>{th.exports=nu;var eh=128,Qm=127,ex=~Qm,tx=Math.pow(2,31);function nu(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw nu.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=tx;)e[r++]=t&255|eh,t/=128;for(;t&ex;)e[r++]=t&255|eh,t>>>=7;return e[r]=t|0,nu.bytes=r-n+1,e}});var sh=_((IC,ih)=>{ih.exports=iu;var rx=128,nh=127;function iu(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a||i>49)throw iu.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&nh)<<i:(o&nh)*Math.pow(2,i),i+=7}while(o>=rx);return iu.bytes=s-n,r}});var ah=_((kC,oh)=>{var nx=Math.pow(2,7),ix=Math.pow(2,14),sx=Math.pow(2,21),ox=Math.pow(2,28),ax=Math.pow(2,35),cx=Math.pow(2,42),ux=Math.pow(2,49),fx=Math.pow(2,56),lx=Math.pow(2,63);oh.exports=function(t){return t<nx?1:t<ix?2:t<sx?3:t<ox?4:t<ax?5:t<cx?6:t<ux?7:t<fx?8:t<lx?9:10}});var no=_((LC,ch)=>{ch.exports={encode:rh(),decode:sh(),encodingLength:ah()}});var ri=_((ST,Nh)=>{"use strict";function Lh(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Gx(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return Lh(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),Lh(new i,r)}}Nh.exports=Gx});var wo=_(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.isJsonObject=si.typeofJsonValue=void 0;function nw(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}si.typeofJsonValue=nw;function iw(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}si.isJsonObject=iw});var Eo=_(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.base64encode=oi.base64decode=void 0;var Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),vo=[];for(let t=0;t<Dr.length;t++)vo[Dr[t].charCodeAt(0)]=t;vo["-".charCodeAt(0)]=Dr.indexOf("+");vo["_".charCodeAt(0)]=Dr.indexOf("/");function sw(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let r=new Uint8Array(e),n=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=vo[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:r[n++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:r[n++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:r[n++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return r.subarray(0,n)}oi.base64decode=sw;function ow(t){let e="",r=0,n,i=0;for(let s=0;s<t.length;s++)switch(n=t[s],r){case 0:e+=Dr[n>>2],i=(n&3)<<4,r=1;break;case 1:e+=Dr[i|n>>4],i=(n&15)<<2,r=2;break;case 2:e+=Dr[i|n>>6],e+=Dr[n&63],r=0;break}return r&&(e+=Dr[i],e+="=",r==1&&(e+="=")),e}oi.base64encode=ow});var Mh=_(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.utf8read=void 0;var Du=t=>String.fromCharCode.apply(String,t);function aw(t){if(t.length<1)return"";let e=0,r=[],n=[],i=0,s,o=t.length;for(;e<o;)s=t[e++],s<128?n[i++]=s:s>191&&s<224?n[i++]=(s&31)<<6|t[e++]&63:s>239&&s<365?(s=((s&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,n[i++]=55296+(s>>10),n[i++]=56320+(s&1023)):n[i++]=(s&15)<<12|(t[e++]&63)<<6|t[e++]&63,i>8191&&(r.push(Du(n)),i=0);return r.length?(i&&r.push(Du(n.slice(0,i))),r.join("")):Du(n.slice(0,i))}So.utf8read=aw});var ns=_(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.WireType=ir.mergeBinaryOptions=ir.UnknownFieldHandler=void 0;var cw;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(r,n,i,s,o)=>{(e(n)?n[t.symbol]:n[t.symbol]=[]).push({no:i,wireType:s,data:o})},t.onWrite=(r,n,i)=>{for(let{no:s,wireType:o,data:a}of t.list(n))i.tag(s,o).raw(a)},t.list=(r,n)=>{if(e(r)){let i=r[t.symbol];return n?i.filter(s=>s.no==n):i}return[]},t.last=(r,n)=>t.list(r,n).slice(-1)[0];let e=r=>r&&Array.isArray(r[t.symbol])})(cw=ir.UnknownFieldHandler||(ir.UnknownFieldHandler={}));function uw(t,e){return Object.assign(Object.assign({},t),e)}ir.mergeBinaryOptions=uw;var fw;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(fw=ir.WireType||(ir.WireType={}))});var Ao=_(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.varint32read=wt.varint32write=wt.int64toString=wt.int64fromString=wt.varint64write=wt.varint64read=void 0;function lw(){let t=0,e=0;for(let n=0;n<28;n+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<n,!(i&128))return this.assertBounds(),[t,e]}let r=this.buf[this.pos++];if(t|=(r&15)<<28,e=(r&112)>>4,!(r&128))return this.assertBounds(),[t,e];for(let n=3;n<=31;n+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<n,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}wt.varint64read=lw;function hw(t,e,r){for(let s=0;s<28;s=s+7){let o=t>>>s,a=!(!(o>>>7)&&e==0),c=(a?o|128:o)&255;if(r.push(c),!a)return}let n=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(r.push((i?n|128:n)&255),!!i){for(let s=3;s<31;s=s+7){let o=e>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(r.push(c),!a)return}r.push(e>>>31&1)}}wt.varint64write=hw;var _o=(1<<16)*(1<<16);function dw(t){let e=t[0]=="-";e&&(t=t.slice(1));let r=1e6,n=0,i=0;function s(o,a){let c=Number(t.slice(o,a));i*=r,n=n*r+c,n>=_o&&(i=i+(n/_o|0),n=n%_o)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[e,n,i]}wt.int64fromString=dw;function pw(t,e){if(e<=2097151)return""+(_o*e+(t>>>0));let r=t&16777215,n=(t>>>24|e<<8)>>>0&16777215,i=e>>16&65535,s=r+n*6777216+i*6710656,o=n+i*8147497,a=i*2,c=1e7;s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c);function u(f,l){let h=f?String(f):"";return l?"0000000".slice(h.length)+h:h}return u(a,0)+u(o,a)+u(s,1)}wt.int64toString=pw;function yw(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let r=0;r<9;r++)e.push(t&127|128),t=t>>7;e.push(1)}}wt.varint32write=yw;function gw(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let r=5;t&128&&r<10;r++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}wt.varint32read=gw});var $r=_(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.PbLong=ai.PbULong=void 0;var is=Ao();function bw(){let t=new DataView(new ArrayBuffer(8));return globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}var Ee=bw();function Kh(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}var Vh=/^-?[0-9]+$/,Co=(1<<16)*(1<<16),Do=class{constructor(e,r){this.lo=e|0,this.hi=r|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*Co+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}},Tr=class extends Do{static from(e){if(Ee)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=Ee.C(e);case"number":if(e===0)return this.ZERO;e=Ee.C(e);case"bigint":if(!e)return this.ZERO;if(e<Ee.UMIN)throw new Error("signed value for ulong");if(e>Ee.UMAX)throw new Error("ulong too large");return Ee.V.setBigUint64(0,e,!0),new Tr(Ee.V.getInt32(0,!0),Ee.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!Vh.test(e))throw new Error("string is no integer");let[r,n,i]=is.int64fromString(e);if(r)throw new Error("signed value");return new Tr(n,i);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new Tr(e,e/Co)}throw new Error("unknown value "+typeof e)}toString(){return Ee?this.toBigInt().toString():is.int64toString(this.lo,this.hi)}toBigInt(){return Kh(Ee),Ee.V.setInt32(0,this.lo,!0),Ee.V.setInt32(4,this.hi,!0),Ee.V.getBigUint64(0,!0)}};ai.PbULong=Tr;Tr.ZERO=new Tr(0,0);var Kt=class extends Do{static from(e){if(Ee)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=Ee.C(e);case"number":if(e===0)return this.ZERO;e=Ee.C(e);case"bigint":if(!e)return this.ZERO;if(e<Ee.MIN)throw new Error("ulong too small");if(e>Ee.MAX)throw new Error("ulong too large");return Ee.V.setBigInt64(0,e,!0),new Kt(Ee.V.getInt32(0,!0),Ee.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!Vh.test(e))throw new Error("string is no integer");let[r,n,i]=is.int64fromString(e),s=new Kt(n,i);return r?s.negate():s;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new Kt(e,e/Co):new Kt(-e,-e/Co).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&2147483648)!==0}negate(){let e=~this.hi,r=this.lo;return r?r=~r+1:e+=1,new Kt(r,e)}toString(){if(Ee)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+is.int64toString(e.lo,e.hi)}return is.int64toString(this.lo,this.hi)}toBigInt(){return Kh(Ee),Ee.V.setInt32(0,this.lo,!0),Ee.V.setInt32(4,this.hi,!0),Ee.V.getBigInt64(0,!0)}};ai.PbLong=Kt;Kt.ZERO=new Kt(0,0)});var Tu=_(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.BinaryReader=ui.binaryReadOptions=void 0;var ci=ns(),ss=$r(),qh=Ao(),Hh={readUnknownField:!0,readerFactory:t=>new To(t)};function mw(t){return t?Object.assign(Object.assign({},Hh),t):Hh}ui.binaryReadOptions=mw;var To=class{constructor(e,r){this.varint64=qh.varint64read,this.uint32=qh.varint32read,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=r??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),r=e>>>3,n=e&7;if(r<=0||n<0||n>5)throw new Error("illegal tag: field no "+r+" wire type "+n);return[r,n]}skip(e){let r=this.pos;switch(e){case ci.WireType.Varint:for(;this.buf[this.pos++]&128;);break;case ci.WireType.Bit64:this.pos+=4;case ci.WireType.Bit32:this.pos+=4;break;case ci.WireType.LengthDelimited:let n=this.uint32();this.pos+=n;break;case ci.WireType.StartGroup:let i;for(;(i=this.tag()[1])!==ci.WireType.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new ss.PbLong(...this.varint64())}uint64(){return new ss.PbULong(...this.varint64())}sint64(){let[e,r]=this.varint64(),n=-(e&1);return e=(e>>>1|(r&1)<<31)^n,r=r>>>1^n,new ss.PbLong(e,r)}bool(){let[e,r]=this.varint64();return e!==0||r!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new ss.PbULong(this.sfixed32(),this.sfixed32())}sfixed64(){return new ss.PbLong(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),r=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(r,r+e)}string(){return this.textDecoder.decode(this.bytes())}};ui.BinaryReader=To});var fi=_(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.assertFloat32=Lt.assertUInt32=Lt.assertInt32=Lt.assertNever=Lt.assert=void 0;function xw(t,e){if(!t)throw new Error(e)}Lt.assert=xw;function ww(t,e){throw new Error(e??"Unexpected object: "+t)}Lt.assertNever=ww;var vw=34028234663852886e22,Ew=-34028234663852886e22,Sw=4294967295,_w=2147483647,Aw=-2147483648;function Cw(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>_w||t<Aw)throw new Error("invalid int 32: "+t)}Lt.assertInt32=Cw;function Dw(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>Sw||t<0)throw new Error("invalid uint 32: "+t)}Lt.assertUInt32=Dw;function Tw(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>vw||t<Ew))throw new Error("invalid float 32: "+t)}Lt.assertFloat32=Tw});var Bu=_(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.BinaryWriter=hi.binaryWriteOptions=void 0;var os=$r(),as=Ao(),li=fi(),zh={writeUnknownFields:!0,writerFactory:()=>new Bo};function Bw(t){return t?Object.assign(Object.assign({},zh),t):zh}hi.binaryWriteOptions=Bw;var Bo=class{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let r=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)r.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],r}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),r=this.stack.pop();if(!r)throw new Error("invalid state, fork stack empty");return this.chunks=r.chunks,this.buf=r.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,r){return this.uint32((e<<3|r)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(li.assertUInt32(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return li.assertInt32(e),as.varint32write(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let r=this.textEncoder.encode(e);return this.uint32(r.byteLength),this.raw(r)}float(e){li.assertFloat32(e);let r=new Uint8Array(4);return new DataView(r.buffer).setFloat32(0,e,!0),this.raw(r)}double(e){let r=new Uint8Array(8);return new DataView(r.buffer).setFloat64(0,e,!0),this.raw(r)}fixed32(e){li.assertUInt32(e);let r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,e,!0),this.raw(r)}sfixed32(e){li.assertInt32(e);let r=new Uint8Array(4);return new DataView(r.buffer).setInt32(0,e,!0),this.raw(r)}sint32(e){return li.assertInt32(e),e=(e<<1^e>>31)>>>0,as.varint32write(e,this.buf),this}sfixed64(e){let r=new Uint8Array(8),n=new DataView(r.buffer),i=os.PbLong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(r)}fixed64(e){let r=new Uint8Array(8),n=new DataView(r.buffer),i=os.PbULong.from(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(r)}int64(e){let r=os.PbLong.from(e);return as.varint64write(r.lo,r.hi,this.buf),this}sint64(e){let r=os.PbLong.from(e),n=r.hi>>31,i=r.lo<<1^n,s=(r.hi<<1|r.lo>>>31)^n;return as.varint64write(i,s,this.buf),this}uint64(e){let r=os.PbULong.from(e);return as.varint64write(r.lo,r.hi,this.buf),this}};hi.BinaryWriter=Bo});var Iu=_(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.mergeJsonOptions=Xr.jsonWriteOptions=Xr.jsonReadOptions=void 0;var Gh={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Wh={ignoreUnknownFields:!1};function Iw(t){return t?Object.assign(Object.assign({},Wh),t):Wh}Xr.jsonReadOptions=Iw;function kw(t){return t?Object.assign(Object.assign({},Gh),t):Gh}Xr.jsonWriteOptions=kw;function Lw(t,e){var r,n;let i=Object.assign(Object.assign({},t),e);return i.typeRegistry=[...(r=t?.typeRegistry)!==null&&r!==void 0?r:[],...(n=e?.typeRegistry)!==null&&n!==void 0?n:[]],i}Xr.mergeJsonOptions=Lw});var ko=_(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.MESSAGE_TYPE=void 0;Io.MESSAGE_TYPE=Symbol.for("protobuf-ts/message-type")});var ku=_(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.lowerCamelCase=void 0;function Nw(t){let e=!1,r=[];for(let n=0;n<t.length;n++){let i=t.charAt(n);i=="_"?e=!0:/\d/.test(i)?(r.push(i),e=!0):e?(r.push(i.toUpperCase()),e=!1):n==0?r.push(i.toLowerCase()):r.push(i)}return r.join("")}Lo.lowerCamelCase=Nw});var Vt=_(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.readMessageOption=He.readFieldOption=He.readFieldOptions=He.normalizeFieldInfo=He.RepeatType=He.LongType=He.ScalarType=void 0;var jh=ku(),Rw;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(Rw=He.ScalarType||(He.ScalarType={}));var Ow;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(Ow=He.LongType||(He.LongType={}));var $h;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})($h=He.RepeatType||(He.RepeatType={}));function Pw(t){var e,r,n,i;return t.localName=(e=t.localName)!==null&&e!==void 0?e:jh.lowerCamelCase(t.name),t.jsonName=(r=t.jsonName)!==null&&r!==void 0?r:jh.lowerCamelCase(t.name),t.repeat=(n=t.repeat)!==null&&n!==void 0?n:$h.NO,t.opt=(i=t.opt)!==null&&i!==void 0?i:t.repeat||t.oneof?!1:t.kind=="message",t}He.normalizeFieldInfo=Pw;function Uw(t,e,r,n){var i;let s=(i=t.fields.find((o,a)=>o.localName==e||a==e))===null||i===void 0?void 0:i.options;return s&&s[r]?n.fromJson(s[r]):void 0}He.readFieldOptions=Uw;function Fw(t,e,r,n){var i;let s=(i=t.fields.find((a,c)=>a.localName==e||c==e))===null||i===void 0?void 0:i.options;if(!s)return;let o=s[r];return o===void 0?o:n?n.fromJson(o):o}He.readFieldOption=Fw;function Mw(t,e,r){let i=t.options[e];return i===void 0?i:r?r.fromJson(i):i}He.readMessageOption=Mw});var Lu=_(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.getSelectedOneofValue=vt.clearOneofValue=vt.setUnknownOneofValue=vt.setOneofValue=vt.getOneofValue=vt.isOneofGroup=void 0;function Kw(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}vt.isOneofGroup=Kw;function Vw(t,e){return t[e]}vt.getOneofValue=Vw;function qw(t,e,r){t.oneofKind!==void 0&&delete t[t.oneofKind],t.oneofKind=e,r!==void 0&&(t[e]=r)}vt.setOneofValue=qw;function Hw(t,e,r){t.oneofKind!==void 0&&delete t[t.oneofKind],t.oneofKind=e,r!==void 0&&e!==void 0&&(t[e]=r)}vt.setUnknownOneofValue=Hw;function zw(t){t.oneofKind!==void 0&&delete t[t.oneofKind],t.oneofKind=void 0}vt.clearOneofValue=zw;function Gw(t){if(t.oneofKind!==void 0)return t[t.oneofKind]}vt.getSelectedOneofValue=Gw});var Ru=_(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.ReflectionTypeCheck=void 0;var Oe=Vt(),Ww=Lu(),Nu=class{constructor(e){var r;this.fields=(r=e.fields)!==null&&r!==void 0?r:[]}prepare(){if(this.data)return;let e=[],r=[],n=[];for(let i of this.fields)if(i.oneof)n.includes(i.oneof)||(n.push(i.oneof),e.push(i.oneof),r.push(i.oneof));else switch(r.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&e.push(i.localName);break;case"message":i.repeat&&e.push(i.localName);break;case"map":e.push(i.localName);break}this.data={req:e,known:r,oneofs:Object.values(n)}}is(e,r,n=!1){if(r<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let i=Object.keys(e),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!n&&i.some(o=>!s.known.includes(o)))return!1;if(r<1)return!0;for(let o of s.oneofs){let a=e[o];if(!Ww.isOneofGroup(a))return!1;if(a.oneofKind===void 0)continue;let c=this.fields.find(u=>u.localName===a.oneofKind);if(!c||!this.field(a[a.oneofKind],c,n,r))return!1}for(let o of this.fields)if(o.oneof===void 0&&!this.field(e[o.localName],o,n,r))return!1;return!0}field(e,r,n,i){let s=r.repeat;switch(r.kind){case"scalar":return e===void 0?r.opt:s?this.scalars(e,r.T,i,r.L):this.scalar(e,r.T,r.L);case"enum":return e===void 0?r.opt:s?this.scalars(e,Oe.ScalarType.INT32,i):this.scalar(e,Oe.ScalarType.INT32);case"message":return e===void 0?!0:s?this.messages(e,r.T(),n,i):this.message(e,r.T(),n,i);case"map":if(typeof e!="object"||e===null)return!1;if(i<2)return!0;if(!this.mapKeys(e,r.K,i))return!1;switch(r.V.kind){case"scalar":return this.scalars(Object.values(e),r.V.T,i,r.V.L);case"enum":return this.scalars(Object.values(e),Oe.ScalarType.INT32,i);case"message":return this.messages(Object.values(e),r.V.T(),n,i)}break}return!0}message(e,r,n,i){return n?r.isAssignable(e,i):r.is(e,i)}messages(e,r,n,i){if(!Array.isArray(e))return!1;if(i<2)return!0;if(n){for(let s=0;s<e.length&&s<i;s++)if(!r.isAssignable(e[s],i-1))return!1}else for(let s=0;s<e.length&&s<i;s++)if(!r.is(e[s],i-1))return!1;return!0}scalar(e,r,n){let i=typeof e;switch(r){case Oe.ScalarType.UINT64:case Oe.ScalarType.FIXED64:case Oe.ScalarType.INT64:case Oe.ScalarType.SFIXED64:case Oe.ScalarType.SINT64:switch(n){case Oe.LongType.BIGINT:return i=="bigint";case Oe.LongType.NUMBER:return i=="number"&&!isNaN(e);default:return i=="string"}case Oe.ScalarType.BOOL:return i=="boolean";case Oe.ScalarType.STRING:return i=="string";case Oe.ScalarType.BYTES:return e instanceof Uint8Array;case Oe.ScalarType.DOUBLE:case Oe.ScalarType.FLOAT:return i=="number"&&!isNaN(e);default:return i=="number"&&Number.isInteger(e)}}scalars(e,r,n,i){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e)){for(let s=0;s<e.length&&s<n;s++)if(!this.scalar(e[s],r,i))return!1}return!0}mapKeys(e,r,n){let i=Object.keys(e);switch(r){case Oe.ScalarType.INT32:case Oe.ScalarType.FIXED32:case Oe.ScalarType.SFIXED32:case Oe.ScalarType.SINT32:case Oe.ScalarType.UINT32:return this.scalars(i.slice(0,n).map(s=>parseInt(s)),r,n);case Oe.ScalarType.BOOL:return this.scalars(i.slice(0,n).map(s=>s=="true"?!0:s=="false"?!1:s),r,n);default:return this.scalars(i,r,n,Oe.LongType.STRING)}}};No.ReflectionTypeCheck=Nu});var Oo=_(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.reflectionLongConvert=void 0;var Xh=Vt();function jw(t,e){switch(e){case Xh.LongType.BIGINT:return t.toBigInt();case Xh.LongType.NUMBER:return t.toNumber();default:return t.toString()}}Ro.reflectionLongConvert=jw});var Pu=_(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.ReflectionJsonReader=void 0;var Yh=wo(),$w=Eo(),ze=Vt(),Po=$r(),yn=fi(),Uo=Oo(),Ou=class{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};let r=(e=this.info.fields)!==null&&e!==void 0?e:[];for(let n of r)this.fMap[n.name]=n,this.fMap[n.jsonName]=n,this.fMap[n.localName]=n}}assert(e,r,n){if(!e){let i=Yh.typeofJsonValue(n);throw(i=="number"||i=="boolean")&&(i=n.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${r}`)}}read(e,r,n){this.prepare();let i=[];for(let[s,o]of Object.entries(e)){let a=this.fMap[s];if(!a){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}let c=a.localName,u;if(a.oneof){if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),u=r[a.oneof]={oneofKind:c}}else u=r;if(a.kind=="map"){if(o===null)continue;this.assert(Yh.isJsonObject(o),a.name,o);let f=u[c];for(let[l,h]of Object.entries(o)){this.assert(h!==null,a.name+" map value",null);let p;switch(a.V.kind){case"message":p=a.V.T().internalJsonRead(h,n);break;case"enum":if(p=this.enum(a.V.T(),h,a.name,n.ignoreUnknownFields),p===!1)continue;break;case"scalar":p=this.scalar(h,a.V.T,a.V.L,a.name);break}this.assert(p!==void 0,a.name+" map value",h);let d=l;a.K==ze.ScalarType.BOOL&&(d=d=="true"?!0:d=="false"?!1:d),d=this.scalar(d,a.K,ze.LongType.STRING,a.name).toString(),f[d]=p}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);let f=u[c];for(let l of o){this.assert(l!==null,a.name,null);let h;switch(a.kind){case"message":h=a.T().internalJsonRead(l,n);break;case"enum":if(h=this.enum(a.T(),l,a.name,n.ignoreUnknownFields),h===!1)continue;break;case"scalar":h=this.scalar(l,a.T,a.L,a.name);break}this.assert(h!==void 0,a.name,o),f.push(h)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}u[c]=a.T().internalJsonRead(o,n,u[c]);break;case"enum":let f=this.enum(a.T(),o,a.name,n.ignoreUnknownFields);if(f===!1)continue;u[c]=f;break;case"scalar":u[c]=this.scalar(o,a.T,a.L,a.name);break}}}enum(e,r,n,i){if(e[0]=="google.protobuf.NullValue"&&yn.assert(r===null,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),r===null)return 0;switch(typeof r){case"number":return yn.assert(Number.isInteger(r),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${r}.`),r;case"string":let s=r;e[2]&&r.substring(0,e[2].length)===e[2]&&(s=r.substring(e[2].length));let o=e[1][s];return typeof o>"u"&&i?!1:(yn.assert(typeof o=="number",`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${r}".`),o)}yn.assert(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof r}".`)}scalar(e,r,n,i){let s;try{switch(r){case ze.ScalarType.DOUBLE:case ze.ScalarType.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){s="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){s="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let o=Number(e);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return r==ze.ScalarType.FLOAT&&yn.assertFloat32(o),o;case ze.ScalarType.INT32:case ze.ScalarType.FIXED32:case ze.ScalarType.SFIXED32:case ze.ScalarType.SINT32:case ze.ScalarType.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:e===""?s="empty string":typeof e=="string"&&(e.trim().length!==e.length?s="extra whitespace":a=Number(e)),a===void 0)break;return r==ze.ScalarType.UINT32?yn.assertUInt32(a):yn.assertInt32(a),a;case ze.ScalarType.INT64:case ze.ScalarType.SFIXED64:case ze.ScalarType.SINT64:if(e===null)return Uo.reflectionLongConvert(Po.PbLong.ZERO,n);if(typeof e!="number"&&typeof e!="string")break;return Uo.reflectionLongConvert(Po.PbLong.from(e),n);case ze.ScalarType.FIXED64:case ze.ScalarType.UINT64:if(e===null)return Uo.reflectionLongConvert(Po.PbULong.ZERO,n);if(typeof e!="number"&&typeof e!="string")break;return Uo.reflectionLongConvert(Po.PbULong.from(e),n);case ze.ScalarType.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case ze.ScalarType.STRING:if(e===null)return"";if(typeof e!="string"){s="extra whitespace";break}try{encodeURIComponent(e)}catch(c){c="invalid UTF8";break}return e;case ze.ScalarType.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return $w.base64decode(e)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),e)}};Fo.ReflectionJsonReader=Ou});var Fu=_(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ReflectionJsonWriter=void 0;var Xw=Eo(),Jh=$r(),yt=Vt(),Be=fi(),Uu=class{constructor(e){var r;this.fields=(r=e.fields)!==null&&r!==void 0?r:[]}write(e,r){let n={},i=e;for(let s of this.fields){if(!s.oneof){let u=this.field(s,i[s.localName],r);u!==void 0&&(n[r.useProtoFieldName?s.name:s.jsonName]=u);continue}let o=i[s.oneof];if(o.oneofKind!==s.localName)continue;let a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},r),{emitDefaultValues:!0}):r,c=this.field(s,o[s.localName],a);Be.assert(c!==void 0),n[r.useProtoFieldName?s.name:s.jsonName]=c}return n}field(e,r,n){let i;if(e.kind=="map"){Be.assert(typeof r=="object"&&r!==null);let s={};switch(e.V.kind){case"scalar":for(let[c,u]of Object.entries(r)){let f=this.scalar(e.V.T,u,e.name,!1,!0);Be.assert(f!==void 0),s[c.toString()]=f}break;case"message":let o=e.V.T();for(let[c,u]of Object.entries(r)){let f=this.message(o,u,e.name,n);Be.assert(f!==void 0),s[c.toString()]=f}break;case"enum":let a=e.V.T();for(let[c,u]of Object.entries(r)){Be.assert(u===void 0||typeof u=="number");let f=this.enum(a,u,e.name,!1,!0,n.enumAsInteger);Be.assert(f!==void 0),s[c.toString()]=f}break}(n.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(e.repeat){Be.assert(Array.isArray(r));let s=[];switch(e.kind){case"scalar":for(let c=0;c<r.length;c++){let u=this.scalar(e.T,r[c],e.name,e.opt,!0);Be.assert(u!==void 0),s.push(u)}break;case"enum":let o=e.T();for(let c=0;c<r.length;c++){Be.assert(r[c]===void 0||typeof r[c]=="number");let u=this.enum(o,r[c],e.name,e.opt,!0,n.enumAsInteger);Be.assert(u!==void 0),s.push(u)}break;case"message":let a=e.T();for(let c=0;c<r.length;c++){let u=this.message(a,r[c],e.name,n);Be.assert(u!==void 0),s.push(u)}break}(n.emitDefaultValues||s.length>0||n.emitDefaultValues)&&(i=s)}else switch(e.kind){case"scalar":i=this.scalar(e.T,r,e.name,e.opt,n.emitDefaultValues);break;case"enum":i=this.enum(e.T(),r,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":i=this.message(e.T(),r,e.name,n);break}return i}enum(e,r,n,i,s,o){if(e[0]=="google.protobuf.NullValue")return null;if(r===void 0){Be.assert(i);return}if(!(r===0&&!s&&!i))return Be.assert(typeof r=="number"),Be.assert(Number.isInteger(r)),o||!e[1].hasOwnProperty(r)?r:e[2]?e[2]+e[1][r]:e[1][r]}message(e,r,n,i){return r===void 0?i.emitDefaultValues?null:void 0:e.internalJsonWrite(r,i)}scalar(e,r,n,i,s){if(r===void 0){Be.assert(i);return}let o=s||i;switch(e){case yt.ScalarType.INT32:case yt.ScalarType.SFIXED32:case yt.ScalarType.SINT32:return r===0?o?0:void 0:(Be.assertInt32(r),r);case yt.ScalarType.FIXED32:case yt.ScalarType.UINT32:return r===0?o?0:void 0:(Be.assertUInt32(r),r);case yt.ScalarType.FLOAT:Be.assertFloat32(r);case yt.ScalarType.DOUBLE:return r===0?o?0:void 0:(Be.assert(typeof r=="number"),Number.isNaN(r)?"NaN":r===Number.POSITIVE_INFINITY?"Infinity":r===Number.NEGATIVE_INFINITY?"-Infinity":r);case yt.ScalarType.STRING:return r===""?o?"":void 0:(Be.assert(typeof r=="string"),r);case yt.ScalarType.BOOL:return r===!1?o?!1:void 0:(Be.assert(typeof r=="boolean"),r);case yt.ScalarType.UINT64:case yt.ScalarType.FIXED64:Be.assert(typeof r=="number"||typeof r=="string"||typeof r=="bigint");let a=Jh.PbULong.from(r);return a.isZero()&&!o?void 0:a.toString();case yt.ScalarType.INT64:case yt.ScalarType.SFIXED64:case yt.ScalarType.SINT64:Be.assert(typeof r=="number"||typeof r=="string"||typeof r=="bigint");let c=Jh.PbLong.from(r);return c.isZero()&&!o?void 0:c.toString();case yt.ScalarType.BYTES:return Be.assert(r instanceof Uint8Array),r.byteLength?Xw.base64encode(r):o?"":void 0}}};Mo.ReflectionJsonWriter=Uu});var Vo=_(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.reflectionScalarDefault=void 0;var qt=Vt(),Zh=Oo(),Qh=$r();function Yw(t,e=qt.LongType.STRING){switch(t){case qt.ScalarType.BOOL:return!1;case qt.ScalarType.UINT64:case qt.ScalarType.FIXED64:return Zh.reflectionLongConvert(Qh.PbULong.ZERO,e);case qt.ScalarType.INT64:case qt.ScalarType.SFIXED64:case qt.ScalarType.SINT64:return Zh.reflectionLongConvert(Qh.PbLong.ZERO,e);case qt.ScalarType.DOUBLE:case qt.ScalarType.FLOAT:return 0;case qt.ScalarType.BYTES:return new Uint8Array(0);case qt.ScalarType.STRING:return"";default:return 0}}Ko.reflectionScalarDefault=Yw});var Ku=_(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.ReflectionBinaryReader=void 0;var ed=ns(),Me=Vt(),cs=Oo(),td=Vo(),Mu=class{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){let r=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(r.map(n=>[n.no,n]))}}read(e,r,n,i){this.prepare();let s=i===void 0?e.len:e.pos+i;for(;e.pos<s;){let[o,a]=e.tag(),c=this.fieldNoToField.get(o);if(!c){let h=n.readUnknownField;if(h=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let p=e.skip(a);h!==!1&&(h===!0?ed.UnknownFieldHandler.onRead:h)(this.info.typeName,r,o,a,p);continue}let u=r,f=c.repeat,l=c.localName;switch(c.oneof&&(u=u[c.oneof],u.oneofKind!==l&&(u=r[c.oneof]={oneofKind:l})),c.kind){case"scalar":case"enum":let h=c.kind=="enum"?Me.ScalarType.INT32:c.T,p=c.kind=="scalar"?c.L:void 0;if(f){let g=u[l];if(a==ed.WireType.LengthDelimited&&h!=Me.ScalarType.STRING&&h!=Me.ScalarType.BYTES){let b=e.uint32()+e.pos;for(;e.pos<b;)g.push(this.scalar(e,h,p))}else g.push(this.scalar(e,h,p))}else u[l]=this.scalar(e,h,p);break;case"message":if(f){let g=u[l],b=c.T().internalBinaryRead(e,e.uint32(),n);g.push(b)}else u[l]=c.T().internalBinaryRead(e,e.uint32(),n,u[l]);break;case"map":let[d,y]=this.mapEntry(c,e,n);u[l][d]=y;break}}}mapEntry(e,r,n){let i=r.uint32(),s=r.pos+i,o,a;for(;r.pos<s;){let[c,u]=r.tag();switch(c){case 1:e.K==Me.ScalarType.BOOL?o=r.bool().toString():o=this.scalar(r,e.K,Me.LongType.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(r,e.V.T,e.V.L);break;case"enum":a=r.int32();break;case"message":a=e.V.T().internalBinaryRead(r,r.uint32(),n);break}break;default:throw new Error(`Unknown field ${c} (wire type ${u}) in map entry for ${this.info.typeName}#${e.name}`)}}if(o===void 0){let c=td.reflectionScalarDefault(e.K);o=e.K==Me.ScalarType.BOOL?c.toString():c}if(a===void 0)switch(e.V.kind){case"scalar":a=td.reflectionScalarDefault(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create();break}return[o,a]}scalar(e,r,n){switch(r){case Me.ScalarType.INT32:return e.int32();case Me.ScalarType.STRING:return e.string();case Me.ScalarType.BOOL:return e.bool();case Me.ScalarType.DOUBLE:return e.double();case Me.ScalarType.FLOAT:return e.float();case Me.ScalarType.INT64:return cs.reflectionLongConvert(e.int64(),n);case Me.ScalarType.UINT64:return cs.reflectionLongConvert(e.uint64(),n);case Me.ScalarType.FIXED64:return cs.reflectionLongConvert(e.fixed64(),n);case Me.ScalarType.FIXED32:return e.fixed32();case Me.ScalarType.BYTES:return e.bytes();case Me.ScalarType.UINT32:return e.uint32();case Me.ScalarType.SFIXED32:return e.sfixed32();case Me.ScalarType.SFIXED64:return cs.reflectionLongConvert(e.sfixed64(),n);case Me.ScalarType.SINT32:return e.sint32();case Me.ScalarType.SINT64:return cs.reflectionLongConvert(e.sint64(),n)}}};qo.ReflectionBinaryReader=Mu});var qu=_(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ReflectionBinaryWriter=void 0;var At=ns(),Se=Vt(),di=fi(),us=$r(),Vu=class{constructor(e){this.info=e}prepare(){if(!this.fields){let e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((r,n)=>r.no-n.no)}}write(e,r,n){this.prepare();for(let s of this.fields){let o,a,c=s.repeat,u=s.localName;if(s.oneof){let f=e[s.oneof];if(f.oneofKind!==u)continue;o=f[u],a=!0}else o=e[u],a=!1;switch(s.kind){case"scalar":case"enum":let f=s.kind=="enum"?Se.ScalarType.INT32:s.T;if(c)if(di.assert(Array.isArray(o)),c==Se.RepeatType.PACKED)this.packed(r,f,s.no,o);else for(let l of o)this.scalar(r,f,s.no,l,!0);else o===void 0?di.assert(s.opt):this.scalar(r,f,s.no,o,a||s.opt);break;case"message":if(c){di.assert(Array.isArray(o));for(let l of o)this.message(r,n,s.T(),s.no,l)}else this.message(r,n,s.T(),s.no,o);break;case"map":di.assert(typeof o=="object"&&o!==null);for(let[l,h]of Object.entries(o))this.mapEntry(r,n,s,l,h);break}}let i=n.writeUnknownFields;i!==!1&&(i===!0?At.UnknownFieldHandler.onWrite:i)(this.info.typeName,e,r)}mapEntry(e,r,n,i,s){e.tag(n.no,At.WireType.LengthDelimited),e.fork();let o=i;switch(n.K){case Se.ScalarType.INT32:case Se.ScalarType.FIXED32:case Se.ScalarType.UINT32:case Se.ScalarType.SFIXED32:case Se.ScalarType.SINT32:o=Number.parseInt(i);break;case Se.ScalarType.BOOL:di.assert(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(e,n.K,1,o,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,s,!0);break;case"enum":this.scalar(e,Se.ScalarType.INT32,2,s,!0);break;case"message":this.message(e,r,n.V.T(),2,s);break}e.join()}message(e,r,n,i,s){s!==void 0&&(n.internalBinaryWrite(s,e.tag(i,At.WireType.LengthDelimited).fork(),r),e.join())}scalar(e,r,n,i,s){let[o,a,c]=this.scalarInfo(r,i);(!c||s)&&(e.tag(n,o),e[a](i))}packed(e,r,n,i){if(!i.length)return;di.assert(r!==Se.ScalarType.BYTES&&r!==Se.ScalarType.STRING),e.tag(n,At.WireType.LengthDelimited),e.fork();let[,s]=this.scalarInfo(r);for(let o=0;o<i.length;o++)e[s](i[o]);e.join()}scalarInfo(e,r){let n=At.WireType.Varint,i,s=r===void 0,o=r===0;switch(e){case Se.ScalarType.INT32:i="int32";break;case Se.ScalarType.STRING:o=s||!r.length,n=At.WireType.LengthDelimited,i="string";break;case Se.ScalarType.BOOL:o=r===!1,i="bool";break;case Se.ScalarType.UINT32:i="uint32";break;case Se.ScalarType.DOUBLE:n=At.WireType.Bit64,i="double";break;case Se.ScalarType.FLOAT:n=At.WireType.Bit32,i="float";break;case Se.ScalarType.INT64:o=s||us.PbLong.from(r).isZero(),i="int64";break;case Se.ScalarType.UINT64:o=s||us.PbULong.from(r).isZero(),i="uint64";break;case Se.ScalarType.FIXED64:o=s||us.PbULong.from(r).isZero(),n=At.WireType.Bit64,i="fixed64";break;case Se.ScalarType.BYTES:o=s||!r.byteLength,n=At.WireType.LengthDelimited,i="bytes";break;case Se.ScalarType.FIXED32:n=At.WireType.Bit32,i="fixed32";break;case Se.ScalarType.SFIXED32:n=At.WireType.Bit32,i="sfixed32";break;case Se.ScalarType.SFIXED64:o=s||us.PbLong.from(r).isZero(),n=At.WireType.Bit64,i="sfixed64";break;case Se.ScalarType.SINT32:i="sint32";break;case Se.ScalarType.SINT64:o=s||us.PbLong.from(r).isZero(),i="sint64";break}return[n,i,s||o]}};Ho.ReflectionBinaryWriter=Vu});var Hu=_(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.reflectionCreate=void 0;var Jw=Vo(),Zw=ko();function Qw(t){let e={};Object.defineProperty(e,Zw.MESSAGE_TYPE,{enumerable:!1,value:t});for(let r of t.fields){let n=r.localName;if(!r.opt)if(r.oneof)e[r.oneof]={oneofKind:void 0};else if(r.repeat)e[n]=[];else switch(r.kind){case"scalar":e[n]=Jw.reflectionScalarDefault(r.T,r.L);break;case"enum":e[n]=0;break;case"map":e[n]={};break}}return e}zo.reflectionCreate=Qw});var zu=_(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.reflectionMergePartial=void 0;function ev(t,e,r){let n,i=r,s;for(let o of t.fields){let a=o.localName;if(o.oneof){let c=i[o.oneof];if(c?.oneofKind==null)continue;if(n=c[a],s=e[o.oneof],s.oneofKind=c.oneofKind,n==null){delete s[a];continue}}else if(n=i[a],s=e,n==null)continue;switch(o.repeat&&(s[a].length=n.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let u=0;u<n.length;u++)s[a][u]=n[u];else s[a]=n;break;case"message":let c=o.T();if(o.repeat)for(let u=0;u<n.length;u++)s[a][u]=c.create(n[u]);else s[a]===void 0?s[a]=c.create(n):c.mergePartial(s[a],n);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],n);break;case"message":let u=o.V.T();for(let f of Object.keys(n))s[a][f]=u.create(n[f]);break}break}}}Go.reflectionMergePartial=ev});var Wu=_(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.reflectionEquals=void 0;var Gu=Vt();function tv(t,e,r){if(e===r)return!0;if(!e||!r)return!1;for(let n of t.fields){let i=n.localName,s=n.oneof?e[n.oneof][i]:e[i],o=n.oneof?r[n.oneof][i]:r[i];switch(n.kind){case"enum":case"scalar":let a=n.kind=="enum"?Gu.ScalarType.INT32:n.T;if(!(n.repeat?rd(a,s,o):id(a,s,o)))return!1;break;case"map":if(!(n.V.kind=="message"?nd(n.V.T(),Wo(s),Wo(o)):rd(n.V.kind=="enum"?Gu.ScalarType.INT32:n.V.T,Wo(s),Wo(o))))return!1;break;case"message":let c=n.T();if(!(n.repeat?nd(c,s,o):c.equals(s,o)))return!1;break}}return!0}jo.reflectionEquals=tv;var Wo=Object.values;function id(t,e,r){if(e===r)return!0;if(t!==Gu.ScalarType.BYTES)return!1;let n=e,i=r;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!=i[s])return!1;return!0}function rd(t,e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!id(t,e[n],r[n]))return!1;return!0}function nd(t,e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!t.equals(e[n],r[n]))return!1;return!0}});var od=_($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.MessageType=void 0;var rv=Vt(),nv=Ru(),iv=Pu(),sv=Fu(),ov=Ku(),av=qu(),cv=Hu(),ju=zu(),uv=wo(),sd=Iu(),fv=Wu(),lv=Bu(),hv=Tu(),$u=class{constructor(e,r,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=r.map(rv.normalizeFieldInfo),this.options=n??{},this.refTypeCheck=new nv.ReflectionTypeCheck(this),this.refJsonReader=new iv.ReflectionJsonReader(this),this.refJsonWriter=new sv.ReflectionJsonWriter(this),this.refBinReader=new ov.ReflectionBinaryReader(this),this.refBinWriter=new av.ReflectionBinaryWriter(this)}create(e){let r=cv.reflectionCreate(this);return e!==void 0&&ju.reflectionMergePartial(this,r,e),r}clone(e){let r=this.create();return ju.reflectionMergePartial(this,r,e),r}equals(e,r){return fv.reflectionEquals(this,e,r)}is(e,r=this.defaultCheckDepth){return this.refTypeCheck.is(e,r,!1)}isAssignable(e,r=this.defaultCheckDepth){return this.refTypeCheck.is(e,r,!0)}mergePartial(e,r){ju.reflectionMergePartial(this,e,r)}fromBinary(e,r){let n=hv.binaryReadOptions(r);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,r){return this.internalJsonRead(e,sd.jsonReadOptions(r))}fromJsonString(e,r){let n=JSON.parse(e);return this.fromJson(n,r)}toJson(e,r){return this.internalJsonWrite(e,sd.jsonWriteOptions(r))}toJsonString(e,r){var n;let i=this.toJson(e,r);return JSON.stringify(i,null,(n=r?.prettySpaces)!==null&&n!==void 0?n:0)}toBinary(e,r){let n=lv.binaryWriteOptions(r);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,r,n){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let i=n??this.create();return this.refJsonReader.read(e,i,r),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${uv.typeofJsonValue(e)}.`)}internalJsonWrite(e,r){return this.refJsonWriter.write(e,r)}internalBinaryWrite(e,r,n){return this.refBinWriter.write(e,r,n),r}internalBinaryRead(e,r,n,i){let s=i??this.create();return this.refBinReader.read(e,s,n,r),s}};$o.MessageType=$u});var ad=_(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.containsMessageType=void 0;var dv=ko();function pv(t){return t[dv.MESSAGE_TYPE]!=null}Xo.containsMessageType=pv});var ud=_(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.listEnumNumbers=sr.listEnumNames=sr.listEnumValues=sr.isEnumObject=void 0;function cd(t){if(typeof t!="object"||t===null||!t.hasOwnProperty(0))return!1;for(let e of Object.keys(t)){let r=parseInt(e);if(Number.isNaN(r)){let n=t[e];if(n===void 0||typeof n!="number"||t[n]===void 0)return!1}else{let n=t[r];if(n===void 0||t[n]!==r)return!1}}return!0}sr.isEnumObject=cd;function Xu(t){if(!cd(t))throw new Error("not a typescript enum object");let e=[];for(let[r,n]of Object.entries(t))typeof n=="number"&&e.push({name:r,number:n});return e}sr.listEnumValues=Xu;function yv(t){return Xu(t).map(e=>e.name)}sr.listEnumNames=yv;function gv(t){return Xu(t).map(e=>e.number).filter((e,r,n)=>n.indexOf(e)==r)}sr.listEnumNumbers=gv});var pi=_(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var fd=wo();Object.defineProperty(M,"typeofJsonValue",{enumerable:!0,get:function(){return fd.typeofJsonValue}});Object.defineProperty(M,"isJsonObject",{enumerable:!0,get:function(){return fd.isJsonObject}});var ld=Eo();Object.defineProperty(M,"base64decode",{enumerable:!0,get:function(){return ld.base64decode}});Object.defineProperty(M,"base64encode",{enumerable:!0,get:function(){return ld.base64encode}});var bv=Mh();Object.defineProperty(M,"utf8read",{enumerable:!0,get:function(){return bv.utf8read}});var Yu=ns();Object.defineProperty(M,"WireType",{enumerable:!0,get:function(){return Yu.WireType}});Object.defineProperty(M,"mergeBinaryOptions",{enumerable:!0,get:function(){return Yu.mergeBinaryOptions}});Object.defineProperty(M,"UnknownFieldHandler",{enumerable:!0,get:function(){return Yu.UnknownFieldHandler}});var hd=Tu();Object.defineProperty(M,"BinaryReader",{enumerable:!0,get:function(){return hd.BinaryReader}});Object.defineProperty(M,"binaryReadOptions",{enumerable:!0,get:function(){return hd.binaryReadOptions}});var dd=Bu();Object.defineProperty(M,"BinaryWriter",{enumerable:!0,get:function(){return dd.BinaryWriter}});Object.defineProperty(M,"binaryWriteOptions",{enumerable:!0,get:function(){return dd.binaryWriteOptions}});var pd=$r();Object.defineProperty(M,"PbLong",{enumerable:!0,get:function(){return pd.PbLong}});Object.defineProperty(M,"PbULong",{enumerable:!0,get:function(){return pd.PbULong}});var Ju=Iu();Object.defineProperty(M,"jsonReadOptions",{enumerable:!0,get:function(){return Ju.jsonReadOptions}});Object.defineProperty(M,"jsonWriteOptions",{enumerable:!0,get:function(){return Ju.jsonWriteOptions}});Object.defineProperty(M,"mergeJsonOptions",{enumerable:!0,get:function(){return Ju.mergeJsonOptions}});var mv=ko();Object.defineProperty(M,"MESSAGE_TYPE",{enumerable:!0,get:function(){return mv.MESSAGE_TYPE}});var xv=od();Object.defineProperty(M,"MessageType",{enumerable:!0,get:function(){return xv.MessageType}});var gn=Vt();Object.defineProperty(M,"ScalarType",{enumerable:!0,get:function(){return gn.ScalarType}});Object.defineProperty(M,"LongType",{enumerable:!0,get:function(){return gn.LongType}});Object.defineProperty(M,"RepeatType",{enumerable:!0,get:function(){return gn.RepeatType}});Object.defineProperty(M,"normalizeFieldInfo",{enumerable:!0,get:function(){return gn.normalizeFieldInfo}});Object.defineProperty(M,"readFieldOptions",{enumerable:!0,get:function(){return gn.readFieldOptions}});Object.defineProperty(M,"readFieldOption",{enumerable:!0,get:function(){return gn.readFieldOption}});Object.defineProperty(M,"readMessageOption",{enumerable:!0,get:function(){return gn.readMessageOption}});var wv=Ru();Object.defineProperty(M,"ReflectionTypeCheck",{enumerable:!0,get:function(){return wv.ReflectionTypeCheck}});var vv=Hu();Object.defineProperty(M,"reflectionCreate",{enumerable:!0,get:function(){return vv.reflectionCreate}});var Ev=Vo();Object.defineProperty(M,"reflectionScalarDefault",{enumerable:!0,get:function(){return Ev.reflectionScalarDefault}});var Sv=zu();Object.defineProperty(M,"reflectionMergePartial",{enumerable:!0,get:function(){return Sv.reflectionMergePartial}});var _v=Wu();Object.defineProperty(M,"reflectionEquals",{enumerable:!0,get:function(){return _v.reflectionEquals}});var Av=Ku();Object.defineProperty(M,"ReflectionBinaryReader",{enumerable:!0,get:function(){return Av.ReflectionBinaryReader}});var Cv=qu();Object.defineProperty(M,"ReflectionBinaryWriter",{enumerable:!0,get:function(){return Cv.ReflectionBinaryWriter}});var Dv=Pu();Object.defineProperty(M,"ReflectionJsonReader",{enumerable:!0,get:function(){return Dv.ReflectionJsonReader}});var Tv=Fu();Object.defineProperty(M,"ReflectionJsonWriter",{enumerable:!0,get:function(){return Tv.ReflectionJsonWriter}});var Bv=ad();Object.defineProperty(M,"containsMessageType",{enumerable:!0,get:function(){return Bv.containsMessageType}});var fs=Lu();Object.defineProperty(M,"isOneofGroup",{enumerable:!0,get:function(){return fs.isOneofGroup}});Object.defineProperty(M,"setOneofValue",{enumerable:!0,get:function(){return fs.setOneofValue}});Object.defineProperty(M,"getOneofValue",{enumerable:!0,get:function(){return fs.getOneofValue}});Object.defineProperty(M,"clearOneofValue",{enumerable:!0,get:function(){return fs.clearOneofValue}});Object.defineProperty(M,"getSelectedOneofValue",{enumerable:!0,get:function(){return fs.getSelectedOneofValue}});var Yo=ud();Object.defineProperty(M,"listEnumValues",{enumerable:!0,get:function(){return Yo.listEnumValues}});Object.defineProperty(M,"listEnumNames",{enumerable:!0,get:function(){return Yo.listEnumNames}});Object.defineProperty(M,"listEnumNumbers",{enumerable:!0,get:function(){return Yo.listEnumNumbers}});Object.defineProperty(M,"isEnumObject",{enumerable:!0,get:function(){return Yo.isEnumObject}});var Iv=ku();Object.defineProperty(M,"lowerCamelCase",{enumerable:!0,get:function(){return Iv.lowerCamelCase}});var ls=fi();Object.defineProperty(M,"assert",{enumerable:!0,get:function(){return ls.assert}});Object.defineProperty(M,"assertNever",{enumerable:!0,get:function(){return ls.assertNever}});Object.defineProperty(M,"assertInt32",{enumerable:!0,get:function(){return ls.assertInt32}});Object.defineProperty(M,"assertUInt32",{enumerable:!0,get:function(){return ls.assertUInt32}});Object.defineProperty(M,"assertFloat32",{enumerable:!0,get:function(){return ls.assertFloat32}})});var xd=_((UB,md)=>{"use strict";md.exports=Lv;function Lv(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,c){r[n]=function(f){if(s)if(s=!1,f)c(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];a.apply(null,l)}};try{t.apply(e||null,r)}catch(u){s&&(s=!1,c(u))}})}});var Sd=_(Ed=>{"use strict";var Qo=Ed;Qo.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var yi=new Array(64),vd=new Array(123);for(zt=0;zt<64;)vd[yi[zt]=zt<26?zt+65:zt<52?zt+71:zt<62?zt-4:zt-59|43]=zt++;var zt;Qo.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,c;r<n;){var u=e[r++];switch(a){case 0:s[o++]=yi[u>>2],c=(u&3)<<4,a=1;break;case 1:s[o++]=yi[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[o++]=yi[c|u>>6],s[o++]=yi[u&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=yi[c],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var wd="invalid encoding";Qo.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&s>1)break;if((c=vd[c])===void 0)throw Error(wd);switch(s){case 0:o=c,s=1;break;case 1:r[n++]=o<<2|(c&48)>>4,o=c,s=2;break;case 2:r[n++]=(o&15)<<4|(c&60)>>2,o=c,s=3;break;case 3:r[n++]=(o&3)<<6|c,s=0;break}}if(s===1)throw Error(wd);return n-i};Qo.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Ad=_((MB,_d)=>{"use strict";_d.exports=ea;function ea(){this._listeners={}}ea.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};ea.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};ea.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var Ld=_((KB,kd)=>{"use strict";kd.exports=Cd(Cd);function Cd(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function s(c,u,f){e[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var c=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,s,o)}}t.writeFloatLE=e.bind(null,Dd),t.writeFloatBE=e.bind(null,Td);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,c=o>>>23&255,u=o&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,Bd),t.readFloatBE=r.bind(null,Id)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function s(c,u,f){e[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,c){var u=o<0?1:0;if(u&&(o=-o),o===0)n(0,a,c+i),n(1/o>0?0:2147483648,a,c+s);else if(isNaN(o))n(0,a,c+i),n(2146959360,a,c+s);else if(o>17976931348623157e292)n(0,a,c+i),n((u<<31|2146435072)>>>0,a,c+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,c+i),n((u<<31|f/4294967296)>>>0,a,c+s);else{var l=Math.floor(Math.log(o)/Math.LN2);l===1024&&(l=1023),f=o*Math.pow(2,-l),n(f*4503599627370496>>>0,a,c+i),n((u<<31|l+1023<<20|f*1048576&1048575)>>>0,a,c+s)}}}t.writeDoubleLE=e.bind(null,Dd,0,4),t.writeDoubleBE=e.bind(null,Td,4,0);function r(n,i,s,o,a){var c=n(o,a+i),u=n(o,a+s),f=(u>>31)*2+1,l=u>>>20&2047,h=4294967296*(u&1048575)+c;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}t.readDoubleLE=r.bind(null,Bd,0,4),t.readDoubleBE=r.bind(null,Id,4,0)}(),t}function Dd(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Td(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function Bd(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Id(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Nd=_((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Od=_(Rd=>{"use strict";var sf=Rd;sf.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};sf.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,c;r<n;)c=e[r++],c<128?o[a++]=c:c>191&&c<224?o[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(c>>10),o[a++]=56320+(c&1023)):o[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};sf.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var Ud=_((qB,Pd)=>{"use strict";Pd.exports=Nv;function Nv(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(c){if(c<1||c>i)return t(c);o+c>n&&(s=t(n),o=0);var u=e.call(s,o,o+=c);return o&7&&(o=(o|7)+1),u}}});var Md=_((HB,Fd)=>{"use strict";Fd.exports=We;var hs=xn();function We(t,e){this.lo=t>>>0,this.hi=e>>>0}var mn=We.zero=new We(0,0);mn.toNumber=function(){return 0};mn.zzEncode=mn.zzDecode=function(){return this};mn.length=function(){return 1};var Rv=We.zeroHash="\0\0\0\0\0\0\0\0";We.fromNumber=function(e){if(e===0)return mn;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new We(n,i)};We.from=function(e){if(typeof e=="number")return We.fromNumber(e);if(hs.isString(e))if(hs.Long)e=hs.Long.fromString(e);else return We.fromNumber(parseInt(e,10));return e.low||e.high?new We(e.low>>>0,e.high>>>0):mn};We.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};We.prototype.toLong=function(e){return hs.Long?new hs.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Yr=String.prototype.charCodeAt;We.fromHash=function(e){return e===Rv?mn:new We((Yr.call(e,0)|Yr.call(e,1)<<8|Yr.call(e,2)<<16|Yr.call(e,3)<<24)>>>0,(Yr.call(e,4)|Yr.call(e,5)<<8|Yr.call(e,6)<<16|Yr.call(e,7)<<24)>>>0)};We.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};We.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};We.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};We.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var xn=_(of=>{"use strict";var P=of;P.asPromise=xd();P.base64=Sd();P.EventEmitter=Ad();P.float=Ld();P.inquire=Nd();P.utf8=Od();P.pool=Ud();P.LongBits=Md();P.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);P.global=P.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||of;P.emptyArray=Object.freeze?Object.freeze([]):[];P.emptyObject=Object.freeze?Object.freeze({}):{};P.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};P.isString=function(e){return typeof e=="string"||e instanceof String};P.isObject=function(e){return e&&typeof e=="object"};P.isset=P.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};P.Buffer=function(){try{var t=P.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();P._Buffer_from=null;P._Buffer_allocUnsafe=null;P.newBuffer=function(e){return typeof e=="number"?P.Buffer?P._Buffer_allocUnsafe(e):new P.Array(e):P.Buffer?P._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};P.Array=typeof Uint8Array<"u"?Uint8Array:Array;P.Long=P.global.dcodeIO&&P.global.dcodeIO.Long||P.global.Long||P.inquire("long");P.key2Re=/^true|false|0|1$/;P.key32Re=/^-?(?:0|[1-9][0-9]*)$/;P.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;P.longToHash=function(e){return e?P.LongBits.from(e).toHash():P.LongBits.zeroHash};P.longFromHash=function(e,r){var n=P.LongBits.fromHash(e);return P.Long?P.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function Kd(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}P.merge=Kd;P.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Vd(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Kd(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}P.newError=Vd;P.ProtocolError=Vd("ProtocolError");P.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};P.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};P.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};P._configure=function(){var t=P.Buffer;if(!t){P._Buffer_from=P._Buffer_allocUnsafe=null;return}P._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},P._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var uf=_((GB,Wd)=>{"use strict";Wd.exports=Ke;var or=xn(),cf,zd=or.LongBits,Ov=or.utf8;function Gt(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Ke(t){this.buf=t,this.pos=0,this.len=t.length}var qd=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ke(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ke(e);throw Error("illegal buffer")},Gd=function(){return or.Buffer?function(r){return(Ke.create=function(i){return or.Buffer.isBuffer(i)?new cf(i):qd(i)})(r)}:qd};Ke.create=Gd();Ke.prototype._slice=or.Array.prototype.subarray||or.Array.prototype.slice;Ke.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Gt(this,10);return e}}();Ke.prototype.int32=function(){return this.uint32()|0};Ke.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function af(){var t=new zd(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Gt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Gt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Ke.prototype.bool=function(){return this.uint32()!==0};function ta(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Ke.prototype.fixed32=function(){if(this.pos+4>this.len)throw Gt(this,4);return ta(this.buf,this.pos+=4)};Ke.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Gt(this,4);return ta(this.buf,this.pos+=4)|0};function Hd(){if(this.pos+8>this.len)throw Gt(this,8);return new zd(ta(this.buf,this.pos+=4),ta(this.buf,this.pos+=4))}Ke.prototype.float=function(){if(this.pos+4>this.len)throw Gt(this,4);var e=or.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Ke.prototype.double=function(){if(this.pos+8>this.len)throw Gt(this,4);var e=or.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Ke.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Gt(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Ke.prototype.string=function(){var e=this.bytes();return Ov.read(e,0,e.length)};Ke.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Gt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Gt(this);while(this.buf[this.pos++]&128);return this};Ke.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Ke._configure=function(t){cf=t,Ke.create=Gd(),cf._configure();var e=or.Long?"toLong":"toNumber";or.merge(Ke.prototype,{int64:function(){return af.call(this)[e](!1)},uint64:function(){return af.call(this)[e](!0)},sint64:function(){return af.call(this).zzDecode()[e](!1)},fixed64:function(){return Hd.call(this)[e](!0)},sfixed64:function(){return Hd.call(this)[e](!1)}})}});var Yd=_((WB,Xd)=>{"use strict";Xd.exports=wn;var $d=uf();(wn.prototype=Object.create($d.prototype)).constructor=wn;var jd=xn();function wn(t){$d.call(this,t)}wn._configure=function(){jd.Buffer&&(wn.prototype._slice=jd.Buffer.prototype.slice)};wn.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};wn._configure()});var gf=_((jB,ep)=>{"use strict";ep.exports=se;var Nt=xn(),ff,ra=Nt.LongBits,Jd=Nt.base64,Zd=Nt.utf8;function ds(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function hf(){}function Pv(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function se(){this.len=0,this.head=new ds(hf,0,0),this.tail=this.head,this.states=null}var Qd=function(){return Nt.Buffer?function(){return(se.create=function(){return new ff})()}:function(){return new se}};se.create=Qd();se.alloc=function(e){return new Nt.Array(e)};Nt.Array!==Array&&(se.alloc=Nt.pool(se.alloc,Nt.Array.prototype.subarray));se.prototype._push=function(e,r,n){return this.tail=this.tail.next=new ds(e,r,n),this.len+=r,this};function df(t,e,r){e[r]=t&255}function Uv(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function pf(t,e){this.len=t,this.next=void 0,this.val=e}pf.prototype=Object.create(ds.prototype);pf.prototype.fn=Uv;se.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new pf((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};se.prototype.int32=function(e){return e<0?this._push(yf,10,ra.fromNumber(e)):this.uint32(e)};se.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function yf(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}se.prototype.uint64=function(e){var r=ra.from(e);return this._push(yf,r.length(),r)};se.prototype.int64=se.prototype.uint64;se.prototype.sint64=function(e){var r=ra.from(e).zzEncode();return this._push(yf,r.length(),r)};se.prototype.bool=function(e){return this._push(df,1,e?1:0)};function lf(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}se.prototype.fixed32=function(e){return this._push(lf,4,e>>>0)};se.prototype.sfixed32=se.prototype.fixed32;se.prototype.fixed64=function(e){var r=ra.from(e);return this._push(lf,4,r.lo)._push(lf,4,r.hi)};se.prototype.sfixed64=se.prototype.fixed64;se.prototype.float=function(e){return this._push(Nt.float.writeFloatLE,4,e)};se.prototype.double=function(e){return this._push(Nt.float.writeDoubleLE,8,e)};var Fv=Nt.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};se.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(df,1,0);if(Nt.isString(e)){var n=se.alloc(r=Jd.length(e));Jd.decode(e,n,0),e=n}return this.uint32(r)._push(Fv,r,e)};se.prototype.string=function(e){var r=Zd.length(e);return r?this.uint32(r)._push(Zd.write,r,e):this._push(df,1,0)};se.prototype.fork=function(){return this.states=new Pv(this),this.head=this.tail=new ds(hf,0,0),this.len=0,this};se.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ds(hf,0,0),this.len=0),this};se.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};se.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};se._configure=function(t){ff=t,se.create=Qd(),ff._configure()}});var np=_(($B,rp)=>{"use strict";rp.exports=ar;var tp=gf();(ar.prototype=Object.create(tp.prototype)).constructor=ar;var Jr=xn();function ar(){tp.call(this)}ar._configure=function(){ar.alloc=Jr._Buffer_allocUnsafe,ar.writeBytesBuffer=Jr.Buffer&&Jr.Buffer.prototype instanceof Uint8Array&&Jr.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};ar.prototype.bytes=function(e){Jr.isString(e)&&(e=Jr._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(ar.writeBytesBuffer,r,e),this};function Mv(t,e,r){t.length<40?Jr.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}ar.prototype.string=function(e){var r=Jr.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Mv,r,e),this};ar._configure()});var wp=_(Ie=>{"use strict";var up=Ie&&Ie.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.getNodeVersion=Ie.detectOS=Ie.parseUserAgent=Ie.browserName=Ie.detect=Ie.ReactNativeInfo=Ie.BotInfo=Ie.SearchBotDeviceInfo=Ie.NodeInfo=Ie.BrowserInfo=void 0;var hp=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}();Ie.BrowserInfo=hp;var dp=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}();Ie.NodeInfo=dp;var pp=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}();Ie.SearchBotDeviceInfo=pp;var yp=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();Ie.BotInfo=yp;var gp=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}();Ie.ReactNativeInfo=gp;var Hv=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,zv=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,fp=3,Gv=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Hv]],lp=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Wv(t){return t?vf(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new gp:typeof navigator<"u"?vf(navigator.userAgent):xp()}Ie.detect=Wv;function bp(t){return t!==""&&Gv.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function jv(t){var e=bp(t);return e?e[0]:null}Ie.browserName=jv;function vf(t){var e=bp(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new yp;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<fp&&(i=up(up([],i,!0),$v(fp-i.length),!0)):i=[];var s=i.join("."),o=mp(t),a=zv.exec(t);return a&&a[1]?new pp(r,s,o,a[1]):new hp(r,s,o)}Ie.parseUserAgent=vf;function mp(t){for(var e=0,r=lp.length;e<r;e++){var n=lp[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}Ie.detectOS=mp;function xp(){var t=typeof process<"u"&&process.version;return t?new dp(process.version.slice(1)):null}Ie.getNodeVersion=xp;function $v(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}});var kp=_(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});function n3(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Lf.isSerializableHash=n3});var da=_(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});function i3(t,e,r){return~(t-1)&e|t-1&r}xi.select=i3;function s3(t,e){return(t|0)-(e|0)-1>>>31&1}xi.lessOrEqual=s3;function Lp(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}xi.compare=Lp;function o3(t,e){return t.length===0||e.length===0?!1:Lp(t,e)!==0}xi.equal=o3});var cr=_(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});function a3(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Nf.wipe=a3});var Rp=_(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});var ur=kp(),c3=da(),u3=cr(),Np=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),ur.isSerializableHash(this._inner)&&ur.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),u3.wipe(n)}return t.prototype.reset=function(){if(!ur.isSerializableHash(this._inner)||!ur.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){ur.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ur.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!ur.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!ur.isSerializableHash(this._inner)||!ur.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!ur.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();gs.HMAC=Np;function f3(t,e,r){var n=new Np(t,e);n.update(r);var i=n.digest();return n.clean(),i}gs.hmac=f3;gs.equal=c3.equal});var Up=_(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var Op=Rp(),Pp=cr(),l3=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Op.hmac(this._hash,n,r);this._hmac=new Op.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Pp.wipe(this._buffer),Pp.wipe(this._counter),this._bufpos=0},t}();Rf.HKDF=l3});var Mp=_(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.BrowserRandomSource=void 0;var Fp=65536,Of=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(e);for(let n=0;n<r.length;n+=Fp)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Fp)));return r}};pa.BrowserRandomSource=Of});var Kp=_(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.NodeRandomSource=void 0;var h3=cr(),Pf=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Ge<"u"){let e=Ge("crypto");e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,h3.wipe)(r),n}};ya.NodeRandomSource=Pf});var Vp=_(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.SystemRandomSource=void 0;var d3=Mp(),p3=Kp(),Uf=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new d3.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new p3.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};ga.SystemRandomSource=Uf});var qp=_(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});function y3(t,e){var r=t>>>16&65535,n=t&65535,i=e>>>16&65535,s=e&65535;return n*s+(r*s+n*i<<16>>>0)|0}Dt.mul=Math.imul||y3;function g3(t,e){return t+e|0}Dt.add=g3;function b3(t,e){return t-e|0}Dt.sub=b3;function m3(t,e){return t<<e|t>>>32-e}Dt.rotl=m3;function x3(t,e){return t<<32-e|t>>>e}Dt.rotr=x3;function w3(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}Dt.isInteger=Number.isInteger||w3;Dt.MAX_SAFE_INTEGER=9007199254740991;Dt.isSafeInteger=function(t){return Dt.isInteger(t)&&t>=-Dt.MAX_SAFE_INTEGER&&t<=Dt.MAX_SAFE_INTEGER}});var bs=_(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var Hp=qp();function v3(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}X.readInt16BE=v3;function E3(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}X.readUint16BE=E3;function S3(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}X.readInt16LE=S3;function _3(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}X.readUint16LE=_3;function zp(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}X.writeUint16BE=zp;X.writeInt16BE=zp;function Gp(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}X.writeUint16LE=Gp;X.writeInt16LE=Gp;function Ff(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}X.readInt32BE=Ff;function Mf(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}X.readUint32BE=Mf;function Kf(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}X.readInt32LE=Kf;function Vf(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}X.readUint32LE=Vf;function ba(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}X.writeUint32BE=ba;X.writeInt32BE=ba;function ma(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}X.writeUint32LE=ma;X.writeInt32LE=ma;function A3(t,e){e===void 0&&(e=0);var r=Ff(t,e),n=Ff(t,e+4);return r*4294967296+n-(n>>31)*4294967296}X.readInt64BE=A3;function C3(t,e){e===void 0&&(e=0);var r=Mf(t,e),n=Mf(t,e+4);return r*4294967296+n}X.readUint64BE=C3;function D3(t,e){e===void 0&&(e=0);var r=Kf(t,e),n=Kf(t,e+4);return n*4294967296+r-(r>>31)*4294967296}X.readInt64LE=D3;function T3(t,e){e===void 0&&(e=0);var r=Vf(t,e),n=Vf(t,e+4);return n*4294967296+r}X.readUint64LE=T3;function Wp(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ba(t/4294967296>>>0,e,r),ba(t>>>0,e,r+4),e}X.writeUint64BE=Wp;X.writeInt64BE=Wp;function jp(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ma(t>>>0,e,r),ma(t/4294967296>>>0,e,r+4),e}X.writeUint64LE=jp;X.writeInt64LE=jp;function B3(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}X.readUintBE=B3;function I3(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}X.readUintLE=I3;function k3(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Hp.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}X.writeUintBE=k3;function L3(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Hp.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}X.writeUintLE=L3;function N3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}X.readFloat32BE=N3;function R3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}X.readFloat32LE=R3;function O3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}X.readFloat64BE=O3;function P3(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}X.readFloat64LE=P3;function U3(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}X.writeFloat32BE=U3;function F3(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}X.writeFloat32LE=F3;function M3(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}X.writeFloat64BE=M3;function K3(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}X.writeFloat64LE=K3});var Jp=_(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.randomStringForEntropy=dt.randomString=dt.randomUint32=dt.randomBytes=dt.defaultRandomSource=void 0;var V3=Vp(),q3=bs(),$p=cr();dt.defaultRandomSource=new V3.SystemRandomSource;function qf(t,e=dt.defaultRandomSource){return e.randomBytes(t)}dt.randomBytes=qf;function H3(t=dt.defaultRandomSource){let e=qf(4,t),r=(0,q3.readUint32LE)(e);return(0,$p.wipe)(e),r}dt.randomUint32=H3;var Xp="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Yp(t,e=Xp,r=dt.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,s=256-256%i;for(;t>0;){let o=qf(Math.ceil(t*256/s),r);for(let a=0;a<o.length&&t>0;a++){let c=o[a];c<s&&(n+=e.charAt(c%i),t--)}(0,$p.wipe)(o)}return n}dt.randomString=Yp;function z3(t,e=Xp,r=dt.defaultRandomSource){let n=Math.ceil(t/(Math.log(e.length)/Math.LN2));return Yp(n,e,r)}dt.randomStringForEntropy=z3});var ty=_(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.sharedKey=Pe.generateKeyPair=Pe.generateKeyPairFromSeed=Pe.scalarMultBase=Pe.scalarMult=Pe.SHARED_KEY_LENGTH=Pe.SECRET_KEY_LENGTH=Pe.PUBLIC_KEY_LENGTH=void 0;var G3=Jp(),W3=cr();Pe.PUBLIC_KEY_LENGTH=32;Pe.SECRET_KEY_LENGTH=32;Pe.SHARED_KEY_LENGTH=32;function fr(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var Zp=new Uint8Array(32);Zp[0]=9;var j3=fr([56129,1]);function Hf(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function ms(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let s=n&(t[i]^e[i]);t[i]^=s,e[i]^=s}}function $3(t,e){let r=fr(),n=fr();for(let i=0;i<16;i++)n[i]=e[i];Hf(n),Hf(n),Hf(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let o=1;o<15;o++)r[o]=n[o]-65535-(r[o-1]>>16&1),r[o-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let s=r[15]>>16&1;r[14]&=65535,ms(n,r,1-s)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function X3(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function xa(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function wa(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function Lr(t,e,r){let n,i,s=0,o=0,a=0,c=0,u=0,f=0,l=0,h=0,p=0,d=0,y=0,g=0,b=0,v=0,w=0,C=0,E=0,S=0,T=0,I=0,O=0,F=0,z=0,V=0,re=0,ce=0,K=0,H=0,D=0,q=0,ve=0,Z=r[0],Q=r[1],te=r[2],ue=r[3],fe=r[4],le=r[5],he=r[6],de=r[7],rt=r[8],nt=r[9],it=r[10],st=r[11],ot=r[12],at=r[13],ct=r[14],ut=r[15];n=e[0],s+=n*Z,o+=n*Q,a+=n*te,c+=n*ue,u+=n*fe,f+=n*le,l+=n*he,h+=n*de,p+=n*rt,d+=n*nt,y+=n*it,g+=n*st,b+=n*ot,v+=n*at,w+=n*ct,C+=n*ut,n=e[1],o+=n*Z,a+=n*Q,c+=n*te,u+=n*ue,f+=n*fe,l+=n*le,h+=n*he,p+=n*de,d+=n*rt,y+=n*nt,g+=n*it,b+=n*st,v+=n*ot,w+=n*at,C+=n*ct,E+=n*ut,n=e[2],a+=n*Z,c+=n*Q,u+=n*te,f+=n*ue,l+=n*fe,h+=n*le,p+=n*he,d+=n*de,y+=n*rt,g+=n*nt,b+=n*it,v+=n*st,w+=n*ot,C+=n*at,E+=n*ct,S+=n*ut,n=e[3],c+=n*Z,u+=n*Q,f+=n*te,l+=n*ue,h+=n*fe,p+=n*le,d+=n*he,y+=n*de,g+=n*rt,b+=n*nt,v+=n*it,w+=n*st,C+=n*ot,E+=n*at,S+=n*ct,T+=n*ut,n=e[4],u+=n*Z,f+=n*Q,l+=n*te,h+=n*ue,p+=n*fe,d+=n*le,y+=n*he,g+=n*de,b+=n*rt,v+=n*nt,w+=n*it,C+=n*st,E+=n*ot,S+=n*at,T+=n*ct,I+=n*ut,n=e[5],f+=n*Z,l+=n*Q,h+=n*te,p+=n*ue,d+=n*fe,y+=n*le,g+=n*he,b+=n*de,v+=n*rt,w+=n*nt,C+=n*it,E+=n*st,S+=n*ot,T+=n*at,I+=n*ct,O+=n*ut,n=e[6],l+=n*Z,h+=n*Q,p+=n*te,d+=n*ue,y+=n*fe,g+=n*le,b+=n*he,v+=n*de,w+=n*rt,C+=n*nt,E+=n*it,S+=n*st,T+=n*ot,I+=n*at,O+=n*ct,F+=n*ut,n=e[7],h+=n*Z,p+=n*Q,d+=n*te,y+=n*ue,g+=n*fe,b+=n*le,v+=n*he,w+=n*de,C+=n*rt,E+=n*nt,S+=n*it,T+=n*st,I+=n*ot,O+=n*at,F+=n*ct,z+=n*ut,n=e[8],p+=n*Z,d+=n*Q,y+=n*te,g+=n*ue,b+=n*fe,v+=n*le,w+=n*he,C+=n*de,E+=n*rt,S+=n*nt,T+=n*it,I+=n*st,O+=n*ot,F+=n*at,z+=n*ct,V+=n*ut,n=e[9],d+=n*Z,y+=n*Q,g+=n*te,b+=n*ue,v+=n*fe,w+=n*le,C+=n*he,E+=n*de,S+=n*rt,T+=n*nt,I+=n*it,O+=n*st,F+=n*ot,z+=n*at,V+=n*ct,re+=n*ut,n=e[10],y+=n*Z,g+=n*Q,b+=n*te,v+=n*ue,w+=n*fe,C+=n*le,E+=n*he,S+=n*de,T+=n*rt,I+=n*nt,O+=n*it,F+=n*st,z+=n*ot,V+=n*at,re+=n*ct,ce+=n*ut,n=e[11],g+=n*Z,b+=n*Q,v+=n*te,w+=n*ue,C+=n*fe,E+=n*le,S+=n*he,T+=n*de,I+=n*rt,O+=n*nt,F+=n*it,z+=n*st,V+=n*ot,re+=n*at,ce+=n*ct,K+=n*ut,n=e[12],b+=n*Z,v+=n*Q,w+=n*te,C+=n*ue,E+=n*fe,S+=n*le,T+=n*he,I+=n*de,O+=n*rt,F+=n*nt,z+=n*it,V+=n*st,re+=n*ot,ce+=n*at,K+=n*ct,H+=n*ut,n=e[13],v+=n*Z,w+=n*Q,C+=n*te,E+=n*ue,S+=n*fe,T+=n*le,I+=n*he,O+=n*de,F+=n*rt,z+=n*nt,V+=n*it,re+=n*st,ce+=n*ot,K+=n*at,H+=n*ct,D+=n*ut,n=e[14],w+=n*Z,C+=n*Q,E+=n*te,S+=n*ue,T+=n*fe,I+=n*le,O+=n*he,F+=n*de,z+=n*rt,V+=n*nt,re+=n*it,ce+=n*st,K+=n*ot,H+=n*at,D+=n*ct,q+=n*ut,n=e[15],C+=n*Z,E+=n*Q,S+=n*te,T+=n*ue,I+=n*fe,O+=n*le,F+=n*he,z+=n*de,V+=n*rt,re+=n*nt,ce+=n*it,K+=n*st,H+=n*ot,D+=n*at,q+=n*ct,ve+=n*ut,s+=38*E,o+=38*S,a+=38*T,c+=38*I,u+=38*O,f+=38*F,l+=38*z,h+=38*V,p+=38*re,d+=38*ce,y+=38*K,g+=38*H,b+=38*D,v+=38*q,w+=38*ve,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,s+=i-1+37*(i-1),t[0]=s,t[1]=o,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=l,t[7]=h,t[8]=p,t[9]=d,t[10]=y,t[11]=g,t[12]=b,t[13]=v,t[14]=w,t[15]=C}function xs(t,e){Lr(t,e,e)}function Y3(t,e){let r=fr();for(let n=0;n<16;n++)r[n]=e[n];for(let n=253;n>=0;n--)xs(r,r),n!==2&&n!==4&&Lr(r,r,e);for(let n=0;n<16;n++)t[n]=r[n]}function zf(t,e){let r=new Uint8Array(32),n=new Float64Array(80),i=fr(),s=fr(),o=fr(),a=fr(),c=fr(),u=fr();for(let p=0;p<31;p++)r[p]=t[p];r[31]=t[31]&127|64,r[0]&=248,X3(n,e);for(let p=0;p<16;p++)s[p]=n[p];i[0]=a[0]=1;for(let p=254;p>=0;--p){let d=r[p>>>3]>>>(p&7)&1;ms(i,s,d),ms(o,a,d),xa(c,i,o),wa(i,i,o),xa(o,s,a),wa(s,s,a),xs(a,c),xs(u,i),Lr(i,o,i),Lr(o,s,c),xa(c,i,o),wa(i,i,o),xs(s,i),wa(o,a,u),Lr(i,o,j3),xa(i,i,a),Lr(o,o,i),Lr(i,a,u),Lr(a,s,n),xs(s,c),ms(i,s,d),ms(o,a,d)}for(let p=0;p<16;p++)n[p+16]=i[p],n[p+32]=o[p],n[p+48]=s[p],n[p+64]=a[p];let f=n.subarray(32),l=n.subarray(16);Y3(f,f),Lr(l,l,f);let h=new Uint8Array(32);return $3(h,l),h}Pe.scalarMult=zf;function Qp(t){return zf(t,Zp)}Pe.scalarMultBase=Qp;function ey(t){if(t.length!==Pe.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${Pe.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(t);return{publicKey:Qp(e),secretKey:e}}Pe.generateKeyPairFromSeed=ey;function J3(t){let e=(0,G3.randomBytes)(32,t),r=ey(e);return(0,W3.wipe)(e),r}Pe.generateKeyPair=J3;function Z3(t,e,r=!1){if(t.length!==Pe.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==Pe.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=zf(t,e);if(r){let i=0;for(let s=0;s<n.length;s++)i|=n[s];if(i===0)throw new Error("X25519: invalid shared key")}return n}Pe.sharedKey=Z3});var ny=_(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});var Ea=bs(),va=cr();Zr.DIGEST_LENGTH=32;Zr.BLOCK_SIZE=64;var ry=function(){function t(){this.digestLength=Zr.DIGEST_LENGTH,this.blockSize=Zr.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){va.wipe(this._buffer),va.wipe(this._temp),this.reset()},t.prototype.update=function(e,r){if(r===void 0&&(r=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(Gf(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=Gf(this._temp,this._state,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},t.prototype.finish=function(e){if(!this._finished){var r=this._bytesHashed,n=this._bufferLength,i=r/536870912|0,s=r<<3,o=r%64<56?64:128;this._buffer[n]=128;for(var a=n+1;a<o-8;a++)this._buffer[a]=0;Ea.writeUint32BE(i,this._buffer,o-8),Ea.writeUint32BE(s,this._buffer,o-4),Gf(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(var a=0;a<this.digestLength/4;a++)Ea.writeUint32BE(this._state[a],e,a*4);return this},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(e){va.wipe(e.state),e.buffer&&va.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},t}();Zr.SHA256=ry;var Q3=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function Gf(t,e,r,n,i){for(;i>=64;){for(var s=e[0],o=e[1],a=e[2],c=e[3],u=e[4],f=e[5],l=e[6],h=e[7],p=0;p<16;p++){var d=n+p*4;t[p]=Ea.readUint32BE(r,d)}for(var p=16;p<64;p++){var y=t[p-2],g=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=t[p-15];var b=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;t[p]=(g+t[p-7]|0)+(b+t[p-16]|0)}for(var p=0;p<64;p++){var g=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&f^~u&l)|0)+(h+(Q3[p]+t[p]|0)|0)|0,b=((s>>>2|s<<32-2)^(s>>>13|s<<32-13)^(s>>>22|s<<32-22))+(s&o^s&a^o&a)|0;h=l,l=f,f=u,u=c+g|0,c=a,a=o,o=s,s=g+b|0}e[0]+=s,e[1]+=o,e[2]+=a,e[3]+=c,e[4]+=u,e[5]+=f,e[6]+=l,e[7]+=h,n+=64,i-=64}return n}function eE(t){var e=new ry;e.update(t);var r=e.digest();return e.clean(),r}Zr.hash=eE});var sy=_(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});var pt=bs(),Wf=cr(),tE=20;function rE(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,o=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],l=r[19]<<24|r[18]<<16|r[17]<<8|r[16],h=r[23]<<24|r[22]<<16|r[21]<<8|r[20],p=r[27]<<24|r[26]<<16|r[25]<<8|r[24],d=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=e[3]<<24|e[2]<<16|e[1]<<8|e[0],g=e[7]<<24|e[6]<<16|e[5]<<8|e[4],b=e[11]<<24|e[10]<<16|e[9]<<8|e[8],v=e[15]<<24|e[14]<<16|e[13]<<8|e[12],w=n,C=i,E=s,S=o,T=a,I=c,O=u,F=f,z=l,V=h,re=p,ce=d,K=y,H=g,D=b,q=v,ve=0;ve<tE;ve+=2)w=w+T|0,K^=w,K=K>>>32-16|K<<16,z=z+K|0,T^=z,T=T>>>32-12|T<<12,C=C+I|0,H^=C,H=H>>>32-16|H<<16,V=V+H|0,I^=V,I=I>>>32-12|I<<12,E=E+O|0,D^=E,D=D>>>32-16|D<<16,re=re+D|0,O^=re,O=O>>>32-12|O<<12,S=S+F|0,q^=S,q=q>>>32-16|q<<16,ce=ce+q|0,F^=ce,F=F>>>32-12|F<<12,E=E+O|0,D^=E,D=D>>>32-8|D<<8,re=re+D|0,O^=re,O=O>>>32-7|O<<7,S=S+F|0,q^=S,q=q>>>32-8|q<<8,ce=ce+q|0,F^=ce,F=F>>>32-7|F<<7,C=C+I|0,H^=C,H=H>>>32-8|H<<8,V=V+H|0,I^=V,I=I>>>32-7|I<<7,w=w+T|0,K^=w,K=K>>>32-8|K<<8,z=z+K|0,T^=z,T=T>>>32-7|T<<7,w=w+I|0,q^=w,q=q>>>32-16|q<<16,re=re+q|0,I^=re,I=I>>>32-12|I<<12,C=C+O|0,K^=C,K=K>>>32-16|K<<16,ce=ce+K|0,O^=ce,O=O>>>32-12|O<<12,E=E+F|0,H^=E,H=H>>>32-16|H<<16,z=z+H|0,F^=z,F=F>>>32-12|F<<12,S=S+T|0,D^=S,D=D>>>32-16|D<<16,V=V+D|0,T^=V,T=T>>>32-12|T<<12,E=E+F|0,H^=E,H=H>>>32-8|H<<8,z=z+H|0,F^=z,F=F>>>32-7|F<<7,S=S+T|0,D^=S,D=D>>>32-8|D<<8,V=V+D|0,T^=V,T=T>>>32-7|T<<7,C=C+O|0,K^=C,K=K>>>32-8|K<<8,ce=ce+K|0,O^=ce,O=O>>>32-7|O<<7,w=w+I|0,q^=w,q=q>>>32-8|q<<8,re=re+q|0,I^=re,I=I>>>32-7|I<<7;pt.writeUint32LE(w+n|0,t,0),pt.writeUint32LE(C+i|0,t,4),pt.writeUint32LE(E+s|0,t,8),pt.writeUint32LE(S+o|0,t,12),pt.writeUint32LE(T+a|0,t,16),pt.writeUint32LE(I+c|0,t,20),pt.writeUint32LE(O+u|0,t,24),pt.writeUint32LE(F+f|0,t,28),pt.writeUint32LE(z+l|0,t,32),pt.writeUint32LE(V+h|0,t,36),pt.writeUint32LE(re+p|0,t,40),pt.writeUint32LE(ce+d|0,t,44),pt.writeUint32LE(K+y|0,t,48),pt.writeUint32LE(H+g|0,t,52),pt.writeUint32LE(D+b|0,t,56),pt.writeUint32LE(q+v|0,t,60)}function iy(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){rE(a,s,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];iE(s,0,o)}return Wf.wipe(a),i===0&&Wf.wipe(s),n}Sa.streamXOR=iy;function nE(t,e,r,n){return n===void 0&&(n=0),Wf.wipe(r),iy(t,e,r,r,n)}Sa.stream=nE;function iE(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var ay=_(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var sE=da(),_a=cr();Nr.DIGEST_LENGTH=16;var oy=function(){function t(e){this.digestLength=Nr.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var n=e[2]|e[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var s=e[6]|e[7]<<8;this._r[3]=(i>>>7|s<<9)&8191;var o=e[8]|e[9]<<8;this._r[4]=(s>>>4|o<<12)&255,this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(o>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,n){for(var i=this._fin?0:2048,s=this._h[0],o=this._h[1],a=this._h[2],c=this._h[3],u=this._h[4],f=this._h[5],l=this._h[6],h=this._h[7],p=this._h[8],d=this._h[9],y=this._r[0],g=this._r[1],b=this._r[2],v=this._r[3],w=this._r[4],C=this._r[5],E=this._r[6],S=this._r[7],T=this._r[8],I=this._r[9];n>=16;){var O=e[r+0]|e[r+1]<<8;s+=O&8191;var F=e[r+2]|e[r+3]<<8;o+=(O>>>13|F<<3)&8191;var z=e[r+4]|e[r+5]<<8;a+=(F>>>10|z<<6)&8191;var V=e[r+6]|e[r+7]<<8;c+=(z>>>7|V<<9)&8191;var re=e[r+8]|e[r+9]<<8;u+=(V>>>4|re<<12)&8191,f+=re>>>1&8191;var ce=e[r+10]|e[r+11]<<8;l+=(re>>>14|ce<<2)&8191;var K=e[r+12]|e[r+13]<<8;h+=(ce>>>11|K<<5)&8191;var H=e[r+14]|e[r+15]<<8;p+=(K>>>8|H<<8)&8191,d+=H>>>5|i;var D=0,q=D;q+=s*y,q+=o*(5*I),q+=a*(5*T),q+=c*(5*S),q+=u*(5*E),D=q>>>13,q&=8191,q+=f*(5*C),q+=l*(5*w),q+=h*(5*v),q+=p*(5*b),q+=d*(5*g),D+=q>>>13,q&=8191;var ve=D;ve+=s*g,ve+=o*y,ve+=a*(5*I),ve+=c*(5*T),ve+=u*(5*S),D=ve>>>13,ve&=8191,ve+=f*(5*E),ve+=l*(5*C),ve+=h*(5*w),ve+=p*(5*v),ve+=d*(5*b),D+=ve>>>13,ve&=8191;var Z=D;Z+=s*b,Z+=o*g,Z+=a*y,Z+=c*(5*I),Z+=u*(5*T),D=Z>>>13,Z&=8191,Z+=f*(5*S),Z+=l*(5*E),Z+=h*(5*C),Z+=p*(5*w),Z+=d*(5*v),D+=Z>>>13,Z&=8191;var Q=D;Q+=s*v,Q+=o*b,Q+=a*g,Q+=c*y,Q+=u*(5*I),D=Q>>>13,Q&=8191,Q+=f*(5*T),Q+=l*(5*S),Q+=h*(5*E),Q+=p*(5*C),Q+=d*(5*w),D+=Q>>>13,Q&=8191;var te=D;te+=s*w,te+=o*v,te+=a*b,te+=c*g,te+=u*y,D=te>>>13,te&=8191,te+=f*(5*I),te+=l*(5*T),te+=h*(5*S),te+=p*(5*E),te+=d*(5*C),D+=te>>>13,te&=8191;var ue=D;ue+=s*C,ue+=o*w,ue+=a*v,ue+=c*b,ue+=u*g,D=ue>>>13,ue&=8191,ue+=f*y,ue+=l*(5*I),ue+=h*(5*T),ue+=p*(5*S),ue+=d*(5*E),D+=ue>>>13,ue&=8191;var fe=D;fe+=s*E,fe+=o*C,fe+=a*w,fe+=c*v,fe+=u*b,D=fe>>>13,fe&=8191,fe+=f*g,fe+=l*y,fe+=h*(5*I),fe+=p*(5*T),fe+=d*(5*S),D+=fe>>>13,fe&=8191;var le=D;le+=s*S,le+=o*E,le+=a*C,le+=c*w,le+=u*v,D=le>>>13,le&=8191,le+=f*b,le+=l*g,le+=h*y,le+=p*(5*I),le+=d*(5*T),D+=le>>>13,le&=8191;var he=D;he+=s*T,he+=o*S,he+=a*E,he+=c*C,he+=u*w,D=he>>>13,he&=8191,he+=f*v,he+=l*b,he+=h*g,he+=p*y,he+=d*(5*I),D+=he>>>13,he&=8191;var de=D;de+=s*I,de+=o*T,de+=a*S,de+=c*E,de+=u*C,D=de>>>13,de&=8191,de+=f*w,de+=l*v,de+=h*b,de+=p*g,de+=d*y,D+=de>>>13,de&=8191,D=(D<<2)+D|0,D=D+q|0,q=D&8191,D=D>>>13,ve+=D,s=q,o=ve,a=Z,c=Q,u=te,f=ue,l=fe,h=le,p=he,d=de,r+=16,n-=16}this._h[0]=s,this._h[1]=o,this._h[2]=a,this._h[3]=c,this._h[4]=u,this._h[5]=f,this._h[6]=l,this._h[7]=h,this._h[8]=p,this._h[9]=d},t.prototype.finish=function(e,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,s,o,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=1<<13,s=(i^1)-1,a=0;a<10;a++)n[a]&=s;for(s=~s,a=0;a<10;a++)this._h[a]=this._h[a]&s|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,o=this._h[0]+this._pad[0],this._h[0]=o&65535,a=1;a<8;a++)o=(this._h[a]+this._pad[a]|0)+(o>>>16)|0,this._h[a]=o&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var s=0;s<i;s++)this._buffer[this._leftover+s]=e[r+s];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,r,i),r+=i,n-=i),n){for(var s=0;s<n;s++)this._buffer[this._leftover+s]=e[r+s];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return _a.wipe(this._buffer),_a.wipe(this._r),_a.wipe(this._h),_a.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();Nr.Poly1305=oy;function oE(t,e){var r=new oy(t);r.update(e);var n=r.digest();return r.clean(),n}Nr.oneTimeAuth=oE;function aE(t,e){return t.length!==Nr.DIGEST_LENGTH||e.length!==Nr.DIGEST_LENGTH?!1:sE.equal(t,e)}Nr.equal=aE});var jf=_(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});var Aa=sy(),cE=ay(),ws=cr(),cy=bs(),uE=da();Rr.KEY_LENGTH=32;Rr.NONCE_LENGTH=12;Rr.TAG_LENGTH=16;var uy=new Uint8Array(16),fE=function(){function t(e){if(this.nonceLength=Rr.NONCE_LENGTH,this.tagLength=Rr.TAG_LENGTH,e.length!==Rr.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Aa.stream(this._key,s,o,4);var a=r.length+this.tagLength,c;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(a);return Aa.streamXOR(this._key,s,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),o,c.subarray(0,c.length-this.tagLength),n),ws.wipe(s),c},t.prototype.open=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var s=new Uint8Array(16);s.set(e,s.length-e.length);var o=new Uint8Array(32);Aa.stream(this._key,s,o,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,o,r.subarray(0,r.length-this.tagLength),n),!uE.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,u;if(i){if(i.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(c);return Aa.streamXOR(this._key,s,r.subarray(0,r.length-this.tagLength),u,4),ws.wipe(s),u},t.prototype.clean=function(){return ws.wipe(this._key),this},t.prototype._authenticate=function(e,r,n,i){var s=new cE.Poly1305(r);i&&(s.update(i),i.length%16>0&&s.update(uy.subarray(i.length%16))),s.update(n),n.length%16>0&&s.update(uy.subarray(n.length%16));var o=new Uint8Array(8);i&&cy.writeUint64LE(i.length,o),s.update(o),cy.writeUint64LE(n.length,o),s.update(o);for(var a=s.digest(),c=0;c<a.length;c++)e[c]=a[c];s.clean(),ws.wipe(a),ws.wipe(o)},t}();Rr.ChaCha20Poly1305=fE});var we=_((Rk,vy)=>{vy.exports={options:{usePureJavaScript:!1}}});var _y=_((Ok,Sy)=>{var Yf={};Sy.exports=Yf;var Ey={};Yf.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=hE(t,e);else{var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%s,u=u/s|0;for(;u>0;)a.push(u%s),u=u/s|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};Yf.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=Ey[e];if(!r){r=Ey[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,s=e.charAt(0),o=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<o.length;++c)u+=o[c]*i,o[c]=u&255,u>>=8;for(;u>0;)o.push(u&255),u>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function hE(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=e[s[r]];return c}});var Ve=_((Pk,Ty)=>{var Ay=we(),Cy=_y(),m=Ty.exports=Ay.util=Ay.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){m.nextTick=process.nextTick,typeof setImmediate=="function"?m.setImmediate=setImmediate:m.setImmediate=m.nextTick;return}if(typeof setImmediate=="function"){m.setImmediate=function(){return setImmediate.apply(void 0,arguments)},m.nextTick=function(a){return setImmediate(a)};return}if(m.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var o=a,t="forge.setImmediate",e=[];m.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var s=m.setImmediate;m.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),s(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}m.nextTick=m.setImmediate})();m.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;m.globalScope=function(){return m.isNodejs?globalThis:typeof self>"u"?window:self}();m.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};m.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};m.isArrayBufferView=function(t){return t&&m.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Ss(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}m.ByteBuffer=Jf;function Jf(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(m.isArrayBuffer(t)||m.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Jf||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}m.ByteStringBuffer=Jf;var dE=4096;m.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>dE&&(this.data.substr(0,1),this._constructedStringLength=0)};m.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};m.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};m.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};m.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};m.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};m.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(m.encodeUtf8(t))};m.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};m.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};m.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};m.ByteStringBuffer.prototype.putInt=function(t,e){Ss(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};m.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};m.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};m.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};m.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};m.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};m.ByteStringBuffer.prototype.getInt=function(t){Ss(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};m.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};m.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};m.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};m.ByteStringBuffer.prototype.copy=function(){var t=m.createBuffer(this.data);return t.read=this.read,t};m.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};m.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};m.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};m.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.ByteStringBuffer.prototype.toString=function(){return m.decodeUtf8(this.bytes())};function pE(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=m.isArrayBuffer(t),n=m.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}m.DataBuffer=pE;m.DataBuffer.prototype.length=function(){return this.write-this.read};m.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};m.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};m.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};m.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};m.DataBuffer.prototype.putBytes=function(t,e){if(m.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(m.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof m.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&m.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof m.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=m.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=m.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};m.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};m.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};m.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};m.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};m.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};m.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};m.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};m.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};m.DataBuffer.prototype.putInt=function(t,e){Ss(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};m.DataBuffer.prototype.putSignedInt=function(t,e){return Ss(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};m.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};m.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};m.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};m.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};m.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};m.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};m.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};m.DataBuffer.prototype.getInt=function(t){Ss(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};m.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};m.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};m.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};m.DataBuffer.prototype.copy=function(){return new m.DataBuffer(this)};m.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};m.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};m.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};m.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return m.binary.raw.encode(e);if(t==="hex")return m.binary.hex.encode(e);if(t==="base64")return m.binary.base64.encode(e);if(t==="utf8")return m.text.utf8.decode(e);if(t==="utf16")return m.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};m.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=m.encodeUtf8(t)),new m.ByteBuffer(t)};m.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};m.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};m.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};m.bytesToHex=function(t){return m.createBuffer(t).toHex()};m.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Qr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",en=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Dy="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";m.encode64=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.length;)i=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=Qr.charAt(i>>2),r+=Qr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Qr.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Qr.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,s,o=0;o<t.length;)r=en[t.charCodeAt(o++)-43],n=en[t.charCodeAt(o++)-43],i=en[t.charCodeAt(o++)-43],s=en[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(e+=String.fromCharCode((i&3)<<6|s)));return e};m.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};m.decodeUtf8=function(t){return decodeURIComponent(escape(t))};m.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Cy.encode,decode:Cy.decode}};m.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};m.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};m.binary.hex.encode=m.bytesToHex;m.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(t.length&1&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n};m.binary.base64.encode=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.byteLength;)i=t[a++],s=t[a++],o=t[a++],r+=Qr.charAt(i>>2),r+=Qr.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Qr.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Qr.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,c=0,u=r;c<t.length;)i=en[t.charCodeAt(c++)-43],s=en[t.charCodeAt(c++)-43],o=en[t.charCodeAt(c++)-43],a=en[t.charCodeAt(c++)-43],n[u++]=i<<2|s>>4,o!==64&&(n[u++]=(s&15)<<4|o>>2,a!==64&&(n[u++]=(o&3)<<6|a));return e?u-r:n.subarray(0,u)};m.binary.base58.encode=function(t,e){return m.binary.baseN.encode(t,Dy,e)};m.binary.base58.decode=function(t,e){return m.binary.baseN.decode(t,Dy,e)};m.text={utf8:{},utf16:{}};m.text.utf8.encode=function(t,e,r){t=m.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};m.text.utf8.decode=function(t){return m.decodeUtf8(String.fromCharCode.apply(null,t))};m.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n};m.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};m.deflate=function(t,e,r){if(e=m.decode64(t.deflate(m.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};m.inflate=function(t,e,r){var n=t.inflate(m.encode64(e)).rval;return n===null?null:m.decode64(n)};var Zf=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=m.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Qf=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(m.decode64(r))),r},yE=function(t,e,r,n){var i=Qf(t,e);i===null&&(i={}),i[r]=n,Zf(t,e,i)},gE=function(t,e,r){var n=Qf(t,e);return n!==null&&(n=r in n?n[r]:null),n},bE=function(t,e,r){var n=Qf(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),Zf(t,e,n)}},mE=function(t,e){Zf(t,e,null)},Da=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return n};m.setItem=function(t,e,r,n,i){Da(yE,arguments,i)};m.getItem=function(t,e,r,n){return Da(gE,arguments,n)};m.removeItem=function(t,e,r,n){Da(bE,arguments,n)};m.clearItems=function(t,e,r){Da(mE,arguments,r)};m.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};m.format=function(t){for(var e=/%./g,r,n,i=0,s=[],o=0;r=e.exec(t);){n=t.substring(o,e.lastIndex-2),n.length>0&&s.push(n),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};m.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-u).toFixed(s).slice(2):"")};m.formatSize=function(t){return t>=1073741824?t=m.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=m.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=m.formatNumber(t/1024,0)+" KiB":t=m.formatNumber(t,0)+" bytes",t};m.bytesFromIP=function(t){return t.indexOf(".")!==-1?m.bytesFromIPv4(t):t.indexOf(":")!==-1?m.bytesFromIPv6(t):null};m.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=m.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};m.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=m.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=m.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};m.bytesToIP=function(t){return t.length===4?m.bytesToIPv4(t):t.length===16?m.bytesToIPv6(t):null};m.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};m.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=m.bytesToHex(t[i]+t[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};m.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in m&&!t.update)return e(null,m.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return m.cores=navigator.hardwareConcurrency,e(null,m.cores);if(typeof Worker>"u")return m.cores=1,e(null,m.cores);if(typeof Blob>"u")return m.cores=2,e(null,m.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,c){if(a===0){var u=Math.floor(o.reduce(function(f,l){return f+l},0)/o.length);return m.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,m.cores)}i(c,function(f,l){o.push(s(c,l)),n(o,a-1,c)})}function i(o,a){for(var c=[],u=[],f=0;f<o;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(u.push(h.data),u.length===o){for(var p=0;p<o;++p)c[p].terminate();a(null,u)}}),c.push(l)}for(var f=0;f<o;++f)c[f].postMessage(f)}function s(o,a){for(var c=[],u=0;u<o;++u)for(var f=a[u],l=c[u]=[],h=0;h<o;++h)if(u!==h){var p=a[h];(f.st>p.st&&f.st<p.et||p.st>f.st&&p.st<f.et)&&l.push(h)}return c.reduce(function(d,y){return Math.max(d,y.length)},0)}}});var Ta=_((Uk,By)=>{var _s=we();_s.pki=_s.pki||{};var e0=By.exports=_s.pki.oids=_s.oids=_s.oids||{};function k(t,e){e0[t]=e,e0[e]=t}function be(t,e){e0[t]=e}k("1.2.840.113549.1.1.1","rsaEncryption");k("1.2.840.113549.1.1.4","md5WithRSAEncryption");k("1.2.840.113549.1.1.5","sha1WithRSAEncryption");k("1.2.840.113549.1.1.7","RSAES-OAEP");k("1.2.840.113549.1.1.8","mgf1");k("1.2.840.113549.1.1.9","pSpecified");k("1.2.840.113549.1.1.10","RSASSA-PSS");k("1.2.840.113549.1.1.11","sha256WithRSAEncryption");k("1.2.840.113549.1.1.12","sha384WithRSAEncryption");k("1.2.840.113549.1.1.13","sha512WithRSAEncryption");k("1.3.101.112","EdDSA25519");k("1.2.840.10040.4.3","dsa-with-sha1");k("1.3.14.3.2.7","desCBC");k("1.3.14.3.2.26","sha1");k("1.3.14.3.2.29","sha1WithRSASignature");k("2.16.840.1.101.3.4.2.1","sha256");k("2.16.840.1.101.3.4.2.2","sha384");k("2.16.840.1.101.3.4.2.3","sha512");k("2.16.840.1.101.3.4.2.4","sha224");k("2.16.840.1.101.3.4.2.5","sha512-224");k("2.16.840.1.101.3.4.2.6","sha512-256");k("1.2.840.113549.2.2","md2");k("1.2.840.113549.2.5","md5");k("1.2.840.113549.1.7.1","data");k("1.2.840.113549.1.7.2","signedData");k("1.2.840.113549.1.7.3","envelopedData");k("1.2.840.113549.1.7.4","signedAndEnvelopedData");k("1.2.840.113549.1.7.5","digestedData");k("1.2.840.113549.1.7.6","encryptedData");k("1.2.840.113549.1.9.1","emailAddress");k("1.2.840.113549.1.9.2","unstructuredName");k("1.2.840.113549.1.9.3","contentType");k("1.2.840.113549.1.9.4","messageDigest");k("1.2.840.113549.1.9.5","signingTime");k("1.2.840.113549.1.9.6","counterSignature");k("1.2.840.113549.1.9.7","challengePassword");k("1.2.840.113549.1.9.8","unstructuredAddress");k("1.2.840.113549.1.9.14","extensionRequest");k("1.2.840.113549.1.9.20","friendlyName");k("1.2.840.113549.1.9.21","localKeyId");k("1.2.840.113549.1.9.22.1","x509Certificate");k("1.2.840.113549.1.12.10.1.1","keyBag");k("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");k("1.2.840.113549.1.12.10.1.3","certBag");k("1.2.840.113549.1.12.10.1.4","crlBag");k("1.2.840.113549.1.12.10.1.5","secretBag");k("1.2.840.113549.1.12.10.1.6","safeContentsBag");k("1.2.840.113549.1.5.13","pkcs5PBES2");k("1.2.840.113549.1.5.12","pkcs5PBKDF2");k("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");k("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");k("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");k("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");k("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");k("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");k("1.2.840.113549.2.7","hmacWithSHA1");k("1.2.840.113549.2.8","hmacWithSHA224");k("1.2.840.113549.2.9","hmacWithSHA256");k("1.2.840.113549.2.10","hmacWithSHA384");k("1.2.840.113549.2.11","hmacWithSHA512");k("1.2.840.113549.3.7","des-EDE3-CBC");k("2.16.840.1.101.3.4.1.2","aes128-CBC");k("2.16.840.1.101.3.4.1.22","aes192-CBC");k("2.16.840.1.101.3.4.1.42","aes256-CBC");k("2.5.4.3","commonName");k("2.5.4.4","surname");k("2.5.4.5","serialNumber");k("2.5.4.6","countryName");k("2.5.4.7","localityName");k("2.5.4.8","stateOrProvinceName");k("2.5.4.9","streetAddress");k("2.5.4.10","organizationName");k("2.5.4.11","organizationalUnitName");k("2.5.4.12","title");k("2.5.4.13","description");k("2.5.4.15","businessCategory");k("2.5.4.17","postalCode");k("2.5.4.42","givenName");k("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");k("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");k("2.16.840.1.113730.1.1","nsCertType");k("2.16.840.1.113730.1.13","nsComment");be("2.5.29.1","authorityKeyIdentifier");be("2.5.29.2","keyAttributes");be("2.5.29.3","certificatePolicies");be("2.5.29.4","keyUsageRestriction");be("2.5.29.5","policyMapping");be("2.5.29.6","subtreesConstraint");be("2.5.29.7","subjectAltName");be("2.5.29.8","issuerAltName");be("2.5.29.9","subjectDirectoryAttributes");be("2.5.29.10","basicConstraints");be("2.5.29.11","nameConstraints");be("2.5.29.12","policyConstraints");be("2.5.29.13","basicConstraints");k("2.5.29.14","subjectKeyIdentifier");k("2.5.29.15","keyUsage");be("2.5.29.16","privateKeyUsagePeriod");k("2.5.29.17","subjectAltName");k("2.5.29.18","issuerAltName");k("2.5.29.19","basicConstraints");be("2.5.29.20","cRLNumber");be("2.5.29.21","cRLReason");be("2.5.29.22","expirationDate");be("2.5.29.23","instructionCode");be("2.5.29.24","invalidityDate");be("2.5.29.25","cRLDistributionPoints");be("2.5.29.26","issuingDistributionPoint");be("2.5.29.27","deltaCRLIndicator");be("2.5.29.28","issuingDistributionPoint");be("2.5.29.29","certificateIssuer");be("2.5.29.30","nameConstraints");k("2.5.29.31","cRLDistributionPoints");k("2.5.29.32","certificatePolicies");be("2.5.29.33","policyMappings");be("2.5.29.34","policyConstraints");k("2.5.29.35","authorityKeyIdentifier");be("2.5.29.36","policyConstraints");k("2.5.29.37","extKeyUsage");be("2.5.29.46","freshestCRL");be("2.5.29.54","inhibitAnyPolicy");k("1.3.6.1.4.1.11129.2.4.2","timestampList");k("1.3.6.1.5.5.7.1.1","authorityInfoAccess");k("1.3.6.1.5.5.7.3.1","serverAuth");k("1.3.6.1.5.5.7.3.2","clientAuth");k("1.3.6.1.5.5.7.3.3","codeSigning");k("1.3.6.1.5.5.7.3.4","emailProtection");k("1.3.6.1.5.5.7.3.8","timeStamping")});var Cs=_((Fk,ky)=>{var Ce=we();Ve();Ta();var L=ky.exports=Ce.asn1=Ce.asn1||{};L.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};L.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};L.create=function(t,e,r,n,i){if(Ce.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:t,type:e,constructed:r,composed:r||Ce.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=L.copy(a)),a};L.copy=function(t,e){var r;if(Ce.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(L.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:L.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};L.equals=function(t,e,r){if(Ce.util.isArray(t)){if(!Ce.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!L.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&L.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};L.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function As(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var xE=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;As(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};L.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Ce.util.createBuffer(t));var r=t.length(),n=Ba(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function Ba(t,e,r,n){var i;As(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;i=t.length();var c=xE(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var f,l,h=(s&32)===32;if(h)if(f=[],c===void 0)for(;;){if(As(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),f.push(Ba(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),f.push(Ba(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(f===void 0&&o===L.Class.UNIVERSAL&&a===L.Type.BITSTRING&&(l=t.bytes(c)),f===void 0&&n.decodeBitStrings&&o===L.Class.UNIVERSAL&&a===L.Type.BITSTRING&&c>1){var p=t.read,d=e,y=0;if(a===L.Type.BITSTRING&&(As(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},b=Ba(t,e,r+1,g),v=i-t.length();e-=v,a==L.Type.BITSTRING&&v++;var w=b.tagClass;v===c&&(w===L.Class.UNIVERSAL||w===L.Class.CONTEXT_SPECIFIC)&&(f=[b])}catch{}f===void 0&&(t.read=p,e=d)}if(f===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===L.Type.BMPSTRING)for(f="";c>0;c-=2)As(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(c),e-=c}var C=l===void 0?null:{bitStringContents:l};return L.create(o,a,h,f,C)}L.toDer=function(t){var e=Ce.util.createBuffer(),r=t.tagClass|t.type,n=Ce.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=L.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(L.toDer(t.value[s]))}else if(t.type===L.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===L.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(n),e};L.oidToDer=function(t){var e=t.split("."),r=Ce.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,s,o,a=2;a<e.length;++a){n=!0,i=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};L.derToOid=function(t){var e;typeof t=="string"&&(t=Ce.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};L.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var f=parseInt(t.substr(u+1,2),10),l=parseInt(t.substr(u+4,2),10),h=f*60+l;h*=6e4,c==="+"?e.setTime(+e-h):e.setTime(+e+h)}return e};L.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var l=t.length-5,h=t.charAt(l);if(h==="+"||h==="-"){var p=parseInt(t.substr(l+1,2),10),d=parseInt(t.substr(l+4,2),10);u=p*60+d,u*=6e4,h==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(s,o,a,c)),e};L.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};L.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};L.integerToDer=function(t){var e=Ce.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};L.derToInteger=function(t){typeof t=="string"&&(t=Ce.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};L.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&Ce.util.isArray(e.value))for(var s=0,o=0;i&&o<e.value.length;++o)i=e.value[o].optional||!1,t.value[s]&&(i=L.validate(t.value[s],e.value[o],r,n),i?++s:e.value[o].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Iy=/[^\\u0000-\\u00ff]/;L.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case L.Class.UNIVERSAL:n+="Universal:";break;case L.Class.APPLICATION:n+="Application:";break;case L.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case L.Class.PRIVATE:n+="Private:";break}if(t.tagClass===L.Class.UNIVERSAL)switch(n+=t.type,t.type){case L.Type.NONE:n+=" (None)";break;case L.Type.BOOLEAN:n+=" (Boolean)";break;case L.Type.INTEGER:n+=" (Integer)";break;case L.Type.BITSTRING:n+=" (Bit string)";break;case L.Type.OCTETSTRING:n+=" (Octet string)";break;case L.Type.NULL:n+=" (Null)";break;case L.Type.OID:n+=" (Object Identifier)";break;case L.Type.ODESC:n+=" (Object Descriptor)";break;case L.Type.EXTERNAL:n+=" (External or Instance of)";break;case L.Type.REAL:n+=" (Real)";break;case L.Type.ENUMERATED:n+=" (Enumerated)";break;case L.Type.EMBEDDED:n+=" (Embedded PDV)";break;case L.Type.UTF8:n+=" (UTF8)";break;case L.Type.ROID:n+=" (Relative Object Identifier)";break;case L.Type.SEQUENCE:n+=" (Sequence)";break;case L.Type.SET:n+=" (Set)";break;case L.Type.PRINTABLESTRING:n+=" (Printable String)";break;case L.Type.IA5String:n+=" (IA5String (ASCII))";break;case L.Type.UTCTIME:n+=" (UTC time)";break;case L.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case L.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=L.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",t.type===L.Type.OID){var c=L.derToOid(t.value);n+=c,Ce.pki&&Ce.pki.oids&&c in Ce.pki.oids&&(n+=" ("+Ce.pki.oids[c]+") ")}if(t.type===L.Type.INTEGER)try{n+=L.derToInteger(t.value)}catch{n+="0x"+Ce.util.bytesToHex(t.value)}else if(t.type===L.Type.BITSTRING){if(t.value.length>1?n+="0x"+Ce.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===L.Type.OCTETSTRING)Iy.test(t.value)||(n+="("+t.value+") "),n+="0x"+Ce.util.bytesToHex(t.value);else if(t.type===L.Type.UTF8)try{n+=Ce.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+Ce.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===L.Type.PRINTABLESTRING||t.type===L.Type.IA5String?n+=t.value:Iy.test(t.value)?n+="0x"+Ce.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var r0=_((Mk,Ly)=>{var je=we();Ve();Ly.exports=je.cipher=je.cipher||{};je.cipher.algorithms=je.cipher.algorithms||{};je.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=je.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new je.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};je.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=je.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new je.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};je.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),je.cipher.algorithms[t]=e};je.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in je.cipher.algorithms?je.cipher.algorithms[t]:null};var t0=je.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};t0.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=je.util.createBuffer(),this.output=t.output||je.util.createBuffer(),this.mode.start(e)};t0.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};t0.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var i0=_((Kk,Ny)=>{var $e=we();Ve();$e.cipher=$e.cipher||{};var J=Ny.exports=$e.cipher.modes=$e.cipher.modes||{};J.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};J.ecb.prototype.start=function(t){};J.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};J.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};J.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};J.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};J.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};J.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Ia(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};J.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};J.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};J.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};J.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};J.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=$e.util.createBuffer(),this._partialBytes=0};J.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ia(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=$e.util.createBuffer(),this._partialBytes=0};J.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ia(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};J.ofb.prototype.decrypt=J.ofb.prototype.encrypt;J.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=$e.util.createBuffer(),this._partialBytes=0};J.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ia(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};J.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}ka(this._inBlock)};J.ctr.prototype.decrypt=J.ctr.prototype.encrypt;J.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=$e.util.createBuffer(),this._partialBytes=0,this._R=3774873600};J.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=$e.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=$e.util.createBuffer(t.additionalData):r=$e.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=$e.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(n0(n*8)))}this._inBlock=this._j0.slice(0),ka(this._inBlock),this._partialBytes=0,r=$e.util.createBuffer(r),this._aDataLength=n0(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};J.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),ka(this._inBlock)};J.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),ka(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};J.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=$e.util.createBuffer();var n=this._aDataLength.concat(n0(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};J.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};J.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};J.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};J.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};J.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=o/n|0,u=(n-1-o%n)*e;a[c]=1<<e-1<<u,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};J.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var u=i[s^n];i[s]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function Ia(t,e){if(typeof t=="string"&&(t=$e.util.createBuffer(t)),$e.util.isArray(t)&&t.length>4){var r=t;t=$e.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!$e.util.isArray(t)){for(var i=[],s=e/4,n=0;n<s;++n)i.push(t.getInt32());t=i}return t}function ka(t){t[t.length-1]=t[t.length-1]+1&4294967295}function n0(t){return[t/4294967296|0,t&4294967295]}});var c0=_((Vk,Uy)=>{var _e=we();r0();i0();Ve();Uy.exports=_e.aes=_e.aes||{};_e.aes.startEncrypting=function(t,e,r,n){var i=La({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};_e.aes.createEncryptionCipher=function(t,e){return La({key:t,output:null,decrypt:!1,mode:e})};_e.aes.startDecrypting=function(t,e,r,n){var i=La({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};_e.aes.createDecryptionCipher=function(t,e){return La({key:t,output:null,decrypt:!0,mode:e})};_e.aes.Algorithm=function(t,e){a0||Oy();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return o0(r._w,n,i,!1)},decrypt:function(n,i){return o0(r._w,n,i,!0)}}}),r._init=!1};_e.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=_e.util.createBuffer(e);else if(_e.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=_e.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!_e.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!_e.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Py(e,t.decrypt&&!o),this._init=!0}};_e.aes._expandKey=function(t,e){return a0||Oy(),Py(t,e)};_e.aes._updateBlock=o0;Si("AES-ECB",_e.cipher.modes.ecb);Si("AES-CBC",_e.cipher.modes.cbc);Si("AES-CFB",_e.cipher.modes.cfb);Si("AES-OFB",_e.cipher.modes.ofb);Si("AES-CTR",_e.cipher.modes.ctr);Si("AES-GCM",_e.cipher.modes.gcm);function Si(t,e){var r=function(){return new _e.aes.Algorithm(t,e)};_e.cipher.registerAlgorithm(t,r)}var a0=!1,Ei=4,gt,s0,Ry,Sn,Wt;function Oy(){a0=!0,Ry=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;gt=new Array(256),s0=new Array(256),Sn=new Array(4),Wt=new Array(4);for(var e=0;e<4;++e)Sn[e]=new Array(256),Wt[e]=new Array(256);for(var r=0,n=0,i,s,o,a,c,u,f,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,gt[r]=a,s0[a]=r,c=t[a],i=t[r],s=t[i],o=t[s],u=c<<24^a<<16^a<<8^(a^c),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var l=0;l<4;++l)Sn[l][r]=u,Wt[l][a]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^o]]],n^=t[t[n]])}}function Py(t,e){for(var r=t.slice(0),n,i=1,s=r.length,o=s+6+1,a=Ei*o,c=s;c<a;++c)n=r[c-1],c%s===0?(n=gt[n>>>16&255]<<24^gt[n>>>8&255]<<16^gt[n&255]<<8^gt[n>>>24]^Ry[i]<<24,i++):s>6&&c%s===4&&(n=gt[n>>>24]<<24^gt[n>>>16&255]<<16^gt[n>>>8&255]<<8^gt[n&255]),r[c]=r[c-s]^n;if(e){var u,f=Wt[0],l=Wt[1],h=Wt[2],p=Wt[3],d=r.slice(0);a=r.length;for(var c=0,y=a-Ei;c<a;c+=Ei,y-=Ei)if(c===0||c===a-Ei)d[c]=r[y],d[c+1]=r[y+3],d[c+2]=r[y+2],d[c+3]=r[y+1];else for(var g=0;g<Ei;++g)u=r[y+g],d[c+(3&-g)]=f[gt[u>>>24]]^l[gt[u>>>16&255]]^h[gt[u>>>8&255]]^p[gt[u&255]];r=d}return r}function o0(t,e,r,n){var i=t.length/4-1,s,o,a,c,u;n?(s=Wt[0],o=Wt[1],a=Wt[2],c=Wt[3],u=s0):(s=Sn[0],o=Sn[1],a=Sn[2],c=Sn[3],u=gt);var f,l,h,p,d,y,g;f=e[0]^t[0],l=e[n?3:1]^t[1],h=e[2]^t[2],p=e[n?1:3]^t[3];for(var b=3,v=1;v<i;++v)d=s[f>>>24]^o[l>>>16&255]^a[h>>>8&255]^c[p&255]^t[++b],y=s[l>>>24]^o[h>>>16&255]^a[p>>>8&255]^c[f&255]^t[++b],g=s[h>>>24]^o[p>>>16&255]^a[f>>>8&255]^c[l&255]^t[++b],p=s[p>>>24]^o[f>>>16&255]^a[l>>>8&255]^c[h&255]^t[++b],f=d,l=y,h=g;r[0]=u[f>>>24]<<24^u[l>>>16&255]<<16^u[h>>>8&255]<<8^u[p&255]^t[++b],r[n?3:1]=u[l>>>24]<<24^u[h>>>16&255]<<16^u[p>>>8&255]<<8^u[f&255]^t[++b],r[2]=u[h>>>24]<<24^u[p>>>16&255]<<16^u[f>>>8&255]<<8^u[l&255]^t[++b],r[n?1:3]=u[p>>>24]<<24^u[f>>>16&255]<<16^u[l>>>8&255]<<8^u[h&255]^t[++b]}function La(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=_e.cipher.createDecipher(r,t.key):n=_e.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof _e.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var Ky=_((qk,My)=>{var ke=we();r0();i0();Ve();My.exports=ke.des=ke.des||{};ke.des.startEncrypting=function(t,e,r,n){var i=Na({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ke.des.createEncryptionCipher=function(t,e){return Na({key:t,output:null,decrypt:!1,mode:e})};ke.des.startDecrypting=function(t,e,r,n){var i=Na({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};ke.des.createDecryptionCipher=function(t,e){return Na({key:t,output:null,decrypt:!0,mode:e})};ke.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return Fy(r._keys,n,i,!1)},decrypt:function(n,i){return Fy(r._keys,n,i,!0)}}}),r._init=!1};ke.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=ke.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=TE(e),this._init=!0}};lr("DES-ECB",ke.cipher.modes.ecb);lr("DES-CBC",ke.cipher.modes.cbc);lr("DES-CFB",ke.cipher.modes.cfb);lr("DES-OFB",ke.cipher.modes.ofb);lr("DES-CTR",ke.cipher.modes.ctr);lr("3DES-ECB",ke.cipher.modes.ecb);lr("3DES-CBC",ke.cipher.modes.cbc);lr("3DES-CFB",ke.cipher.modes.cfb);lr("3DES-OFB",ke.cipher.modes.ofb);lr("3DES-CTR",ke.cipher.modes.ctr);function lr(t,e){var r=function(){return new ke.des.Algorithm(t,e)};ke.cipher.registerAlgorithm(t,r)}var wE=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],vE=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],EE=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],SE=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],_E=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],AE=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],CE=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],DE=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function TE(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,w,C=0;C<y;C++){var E=t.getInt32(),S=t.getInt32();w=(E>>>4^S)&252645135,S^=w,E^=w<<4,w=(S>>>-16^E)&65535,E^=w,S^=w<<-16,w=(E>>>2^S)&858993459,S^=w,E^=w<<2,w=(S>>>-16^E)&65535,E^=w,S^=w<<-16,w=(E>>>1^S)&1431655765,S^=w,E^=w<<1,w=(S>>>8^E)&16711935,E^=w,S^=w<<8,w=(E>>>1^S)&1431655765,S^=w,E^=w<<1,w=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=w;for(var T=0;T<b.length;++T){b[T]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var I=e[E>>>28]|r[E>>>24&15]|n[E>>>20&15]|i[E>>>16&15]|s[E>>>12&15]|o[E>>>8&15]|a[E>>>4&15],O=c[S>>>28]|u[S>>>24&15]|f[S>>>20&15]|l[S>>>16&15]|h[S>>>12&15]|p[S>>>8&15]|d[S>>>4&15];w=(O>>>16^I)&65535,g[v++]=I^w,g[v++]=O^w<<16}}return g}function Fy(t,e,r,n){var i=t.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],c=e[1];o=(a>>>4^c)&252645135,c^=o,a^=o<<4,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var f=s[u+1],l=s[u+2],h=s[u];h!=f;h+=l){var p=c^t[h],d=(c>>>4|c<<28)^t[h+1];o=a,a=c,c=o^(vE[p>>>24&63]|SE[p>>>16&63]|AE[p>>>8&63]|DE[p&63]|wE[d>>>24&63]|EE[d>>>16&63]|_E[d>>>8&63]|CE[d&63])}o=a,a=c,c=o}a=a>>>1|a<<31,c=c>>>1|c<<31,o=(a>>>1^c)&1431655765,c^=o,a^=o<<1,o=(c>>>8^a)&16711935,a^=o,c^=o<<8,o=(c>>>2^a)&858993459,a^=o,c^=o<<2,o=(a>>>16^c)&65535,c^=o,a^=o<<16,o=(a>>>4^c)&252645135,c^=o,a^=o<<4,r[0]=a,r[1]=c}function Na(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=ke.cipher.createDecipher(r,t.key):n=ke.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof ke.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var _n=_((Hk,Vy)=>{var Ra=we();Vy.exports=Ra.md=Ra.md||{};Ra.md.algorithms=Ra.md.algorithms||{}});var Hy=_((zk,qy)=>{var Pr=we();_n();Ve();var BE=qy.exports=Pr.hmac=Pr.hmac||{};BE.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Pr.md.algorithms)e=Pr.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=Pr.util.createBuffer(o);else if(Pr.util.isArray(o)){var a=o;o=Pr.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=Pr.util.createBuffer(),n=Pr.util.createBuffer(),u=o.length();for(var c=0;c<u;++c){var a=o.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=o,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(s){e.update(s)},i.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},i.digest=i.getMac,i}});var Gy=_((Gk,zy)=>{var bt=we();Hy();_n();Ve();var IE=bt.pkcs5=bt.pkcs5||{},Ur;bt.util.isNodejs&&!bt.options.usePureJavaScript&&(Ur=Ge("crypto"));zy.exports=bt.pbkdf2=IE.pbkdf2=function(t,e,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),bt.util.isNodejs&&!bt.options.usePureJavaScript&&Ur.pbkdf2&&(i===null||typeof i!="object")&&(Ur.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?Ur.pbkdf2Sync.length===4?Ur.pbkdf2(t,e,r,n,function(w,C){if(w)return s(w);s(null,C.toString("binary"))}):Ur.pbkdf2(t,e,r,n,i,function(w,C){if(w)return s(w);s(null,C.toString("binary"))}):Ur.pbkdf2Sync.length===4?Ur.pbkdf2Sync(t,e,r,n).toString("binary"):Ur.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in bt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=bt.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var c=Math.ceil(n/o),u=n-(c-1)*o,f=bt.hmac.create();f.start(i,t);var l="",h,p,d;if(!s){for(var y=1;y<=c;++y){f.start(null,null),f.update(e),f.update(bt.util.int32ToBytes(y)),h=d=f.digest().getBytes();for(var g=2;g<=r;++g)f.start(null,null),f.update(d),p=f.digest().getBytes(),h=bt.util.xorBytes(h,p,o),d=p;l+=y<c?h:h.substr(0,u)}return l}var y=1,g;function b(){if(y>c)return s(null,l);f.start(null,null),f.update(e),f.update(bt.util.int32ToBytes(y)),h=d=f.digest().getBytes(),g=2,v()}function v(){if(g<=r)return f.start(null,null),f.update(d),p=f.digest().getBytes(),h=bt.util.xorBytes(h,p,o),d=p,++g,bt.util.setImmediate(v);l+=y<c?h:h.substr(0,u),++y,b()}b()}});var $y=_((Wk,jy)=>{var Pa=we();Ve();var Wy=jy.exports=Pa.pem=Pa.pem||{};Wy.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Oa(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Oa(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Oa(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Oa(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Pa.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Wy.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(t),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Pa.util.decode64(s[3])};if(e.push(a),!!s[2]){for(var c=s[2].split(i),u=0;s&&u<c.length;){for(var f=c[u].replace(/\s+$/,""),l=u+1;l<c.length;++l){var h=c[l];if(!/\s/.test(h[0]))break;f+=h,u=l}if(s=f.match(n),s){for(var p={name:s[1],values:[]},d=s[2].split(","),y=0;y<d.length;++y)p.values.push(kE(d[y]));if(a.procType)if(!a.contentDomain&&p.name==="Content-Domain")a.contentDomain=d[0]||"";else if(!a.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:d[0],parameters:d[1]||null}}else a.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:d[0],type:d[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Oa(t){for(var e=t.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<e.length;++i,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=i-o-1,o=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(o=i);return e}function kE(t){return t.replace(/^\s+/,"")}});var e1=_((jk,Qy)=>{var hr=we();_n();Ve();var Yy=Qy.exports=hr.sha256=hr.sha256||{};hr.md.sha256=hr.md.algorithms.sha256=Yy;Yy.create=function(){Jy||LE();var t=null,e=hr.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=hr.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=hr.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),Xy(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=hr.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(u0.substr(0,n.blockLength-o));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Xy(l,r,i);var h=hr.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var u0=null,Jy=!1,Zy=null;function LE(){u0=String.fromCharCode(128),u0+=hr.util.fillString(String.fromCharCode(0),64),Zy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Jy=!0}function Xy(t,e,r){for(var n,i,s,o,a,c,u,f,l,h,p,d,y,g,b,v=r.length();v>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,l=t.h1,h=t.h2,p=t.h3,d=t.h4,y=t.h5,g=t.h6,b=t.h7,u=0;u<64;++u)o=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),a=g^d&(y^g),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&l|h&(f^l),n=b+o+a+Zy[u]+e[u],i=s+c,b=g,g=y,y=d,d=p+n>>>0,p=h,h=l,l=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+l|0,t.h2=t.h2+h|0,t.h3=t.h3+p|0,t.h4=t.h4+d|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+b|0,v-=64}}});var r1=_(($k,t1)=>{var dr=we();Ve();var Ua=null;dr.util.isNodejs&&!dr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ua=Ge("crypto"));var NE=t1.exports=dr.prng=dr.prng||{};NE.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var l=e.plugin.cipher,h=e.plugin.increment,p=e.plugin.formatKey,d=e.plugin.formatSeed,y=dr.util.createBuffer();e.key=null,g();function g(b){if(b)return f(b);if(y.length()>=u)return f(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return dr.util.nextTick(function(){s(g)});var v=l(e.key,e.seed);e.generated+=v.length,y.putBytes(v),e.key=p(l(e.key,h(e.seed))),e.seed=d(l(e.key,e.seed)),dr.util.setImmediate(g)}},e.generateSync=function(u){var f=e.plugin.cipher,l=e.plugin.increment,h=e.plugin.formatKey,p=e.plugin.formatSeed;e.key=null;for(var d=dr.util.createBuffer();d.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&o();var y=f(e.key,e.seed);e.generated+=y.length,d.putBytes(y),e.key=h(f(e.key,l(e.seed))),e.seed=p(f(e.key,e.seed))}return d.getBytes(u)};function s(u){if(e.pools[0].messageLength>=32)return a(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(l,h){if(l)return u(l);e.collect(h),a(),u()})}function o(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,l=0;l<32;++l)e.reseeds%f===0&&(u.update(e.pools[l].digest().getBytes()),e.pools[l].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var h=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(h),e.generated=0}function c(u){var f=null,l=dr.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(E){return h.getRandomValues(E)});var p=dr.util.createBuffer();if(f)for(;p.length()<u;){var d=Math.max(1,Math.min(u-p.length(),65536)/4),y=new Uint32Array(Math.floor(d));try{f(y);for(var g=0;g<y.length;++g)p.putInt32(y[g])}catch(E){if(!(typeof QuotaExceededError<"u"&&E instanceof QuotaExceededError))throw E}}if(p.length()<u)for(var b,v,w,C=Math.floor(Math.random()*65536);p.length()<u;){v=16807*(C&65535),b=16807*(C>>16),v+=(b&32767)<<16,v+=b>>15,v=(v&2147483647)+(v>>31),C=v&4294967295;for(var g=0;g<3;++g)w=C>>>(g<<3),w^=Math.floor(Math.random()*256),p.putByte(w&255)}return p.getBytes(u)}return Ua?(e.seedFile=function(u,f){Ua.randomBytes(u,function(l,h){if(l)return f(l);f(null,h.toString())})},e.seedFileSync=function(u){return Ua.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,c(u))}catch(l){f(l)}},e.seedFileSync=c),e.collect=function(u){for(var f=u.length,l=0;l<f;++l)e.pools[e.pool].update(u.substr(l,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(u>>h&255);e.collect(l)},e.registerWorker=function(u){if(u===self)e.seedFile=function(l,h){function p(d){var y=d.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",p),h(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&e.seedFile(h.forge.prng.needed,function(p,d){u.postMessage({forge:{prng:{err:p,bytes:d}}})})};u.addEventListener("message",f)}},e}});var Ds=_((Xk,f0)=>{var Xe=we();c0();e1();r1();Ve();(function(){if(Xe.random&&Xe.random.getBytes){f0.exports=Xe.random;return}(function(t){var e={},r=new Array(4),n=Xe.util.createBuffer();e.formatKey=function(l){var h=Xe.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),Xe.aes._expandKey(l,!1)},e.formatSeed=function(l){var h=Xe.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},e.cipher=function(l,h){return Xe.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(l){return++l[3],l},e.md=Xe.md.sha256;function i(){var l=Xe.prng.create(e);return l.getBytes=function(h,p){return l.generate(h,p)},l.getBytesSync=function(h){return l.generate(h)},l}var s=i(),o=null,a=Xe.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(o=function(l){return c.getRandomValues(l)}),Xe.options.usePureJavaScript||!Xe.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}s.collect(u),u=null}t&&(t().mousemove(function(l){s.collectInt(l.clientX,16),s.collectInt(l.clientY,16)}),t().keypress(function(l){s.collectInt(l.charCode,8)}))}if(!Xe.random)Xe.random=s;else for(var f in s)Xe.random[f]=s[f];Xe.random.createInstance=i,f0.exports=Xe.random})(typeof jQuery<"u"?jQuery:null)})()});var o1=_((Yk,s1)=>{var Et=we();Ve();var l0=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],n1=[1,2,3,5],RE=function(t,e){return t<<e&65535|(t&65535)>>16-e},OE=function(t,e){return(t&65535)>>e|t<<16-e&65535};s1.exports=Et.rc2=Et.rc2||{};Et.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Et.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(l0[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,l0[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,l0[r.at(a+1)^r.at(a+s)]);return r};var i1=function(t,e,r){var n=!1,i=null,s=null,o=null,a,c,u,f,l=[];for(t=Et.rc2.expandKey(t,e),u=0;u<64;u++)l.push(t.getInt16Le());r?(a=function(d){for(u=0;u<4;u++)d[u]+=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),d[u]=RE(d[u],n1[u]),f++},c=function(d){for(u=0;u<4;u++)d[u]+=l[d[(u+3)%4]&63]}):(a=function(d){for(u=3;u>=0;u--)d[u]=OE(d[u],n1[u]),d[u]-=l[f]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),f--},c=function(d){for(u=3;u>=0;u--)d[u]-=l[d[(u+3)%4]&63]});var h=function(d){var y=[];for(u=0;u<4;u++){var g=i.getInt16Le();o!==null&&(r?g^=o.getInt16Le():o.putInt16Le(g)),y.push(g&65535)}f=r?0:63;for(var b=0;b<d.length;b++)for(var v=0;v<d[b][0];v++)d[b][1](y);for(u=0;u<4;u++)o!==null&&(r?o.putInt16Le(y[u]):y[u]^=o.getInt16Le()),s.putInt16Le(y[u])},p=null;return p={start:function(d,y){d&&typeof d=="string"&&(d=Et.util.createBuffer(d)),n=!1,i=Et.util.createBuffer(),s=y||new Et.util.createBuffer,o=d,p.output=s},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(d){var y=!0;if(r)if(d)y=d(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(y&&(n=!0,p.update()),!r&&(y=i.length()===0,y))if(d)y=d(8,s,!r);else{var b=s.length(),v=s.at(b-1);v>b?y=!1:s.truncate(v)}return y}},p};Et.rc2.startEncrypting=function(t,e,r){var n=Et.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Et.rc2.createEncryptionCipher=function(t,e){return i1(t,e,!0)};Et.rc2.startDecrypting=function(t,e,r){var n=Et.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Et.rc2.createDecryptionCipher=function(t,e){return i1(t,e,!1)}});var Ka=_((Jk,p1)=>{var h0=we();p1.exports=h0.jsbn=h0.jsbn||{};var Fr,PE=0xdeadbeefcafe,a1=(PE&16777215)==15715070;function B(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}h0.jsbn.BigInteger=B;function oe(){return new B(null)}function UE(t,e,r,n,i,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function FE(t,e,r,n,i,s){for(var o=e&32767,a=e>>15;--s>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,f=a*c+u*o;c=o*c+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(f>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function c1(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,f=a*c+u*o;c=o*c+((f&16383)<<14)+r.data[n]+i,i=(c>>28)+(f>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(B.prototype.am=c1,Fr=28):a1&&navigator.appName=="Microsoft Internet Explorer"?(B.prototype.am=FE,Fr=30):a1&&navigator.appName!="Netscape"?(B.prototype.am=UE,Fr=26):(B.prototype.am=c1,Fr=28);B.prototype.DB=Fr;B.prototype.DM=(1<<Fr)-1;B.prototype.DV=1<<Fr;var d0=52;B.prototype.FV=Math.pow(2,d0);B.prototype.F1=d0-Fr;B.prototype.F2=2*Fr-d0;var ME="0123456789abcdefghijklmnopqrstuvwxyz",Fa=new Array,_i,Rt;_i="0".charCodeAt(0);for(Rt=0;Rt<=9;++Rt)Fa[_i++]=Rt;_i="a".charCodeAt(0);for(Rt=10;Rt<36;++Rt)Fa[_i++]=Rt;_i="A".charCodeAt(0);for(Rt=10;Rt<36;++Rt)Fa[_i++]=Rt;function u1(t){return ME.charAt(t)}function f1(t,e){var r=Fa[t.charCodeAt(e)];return r??-1}function KE(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function VE(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function tn(t){var e=oe();return e.fromInt(t),e}function qE(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var o=r==8?t[n]&255:f1(t,n);if(o<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&t[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&B.ZERO.subTo(this,this)}function HE(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function zE(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=u1(n));o>=0;)a<e?(n=(this.data[o]&(1<<a)-1)<<e-a,n|=this.data[--o]>>(a+=this.DB-e)):(n=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=u1(n));return i?s:"0"}function GE(){var t=oe();return B.ZERO.subTo(this,t),t}function WE(){return this.s<0?this.negate():this}function jE(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Ma(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function $E(){return this.t<=0?0:this.DB*(this.t-1)+Ma(this.data[this.t-1]^this.s&this.DM)}function XE(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function YE(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function JE(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function ZE(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function QE(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function e8(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&B.ZERO.subTo(e,e)}function t8(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function r8(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=oe());var s=oe(),o=this.s,a=t.s,c=this.DB-Ma(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),i.lShiftTo(c,r)):(n.copyTo(s),i.copyTo(r));var u=s.t,f=s.data[u-1];if(f!=0){var l=f*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),h=this.FV/l,p=(1<<this.F1)/l,d=1<<this.F2,y=r.t,g=y-u,b=e??oe();for(s.dlShiftTo(g,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),B.ONE.dlShiftTo(u,b),b.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--g>=0;){var v=r.data[--y]==f?this.DM:Math.floor(r.data[y]*h+(r.data[y-1]+d)*p);if((r.data[y]+=s.am(0,v,r,g,0,u))<v)for(s.dlShiftTo(g,b),r.subTo(b,r);r.data[y]<--v;)r.subTo(b,r)}e!=null&&(r.drShiftTo(u,e),o!=a&&B.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&B.ZERO.subTo(r,r)}}}function n8(t){var e=oe();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(B.ZERO)>0&&t.subTo(e,e),e}function An(t){this.m=t}function i8(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function s8(t){return t}function o8(t){t.divRemTo(this.m,null,t)}function a8(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function c8(t,e){t.squareTo(e),this.reduce(e)}An.prototype.convert=i8;An.prototype.revert=s8;An.prototype.reduce=o8;An.prototype.mulTo=a8;An.prototype.sqrTo=c8;function u8(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Cn(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function f8(t){var e=oe();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(B.ZERO)>0&&this.m.subTo(e,e),e}function l8(t){var e=oe();return t.copyTo(e),this.reduce(e),e}function h8(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function d8(t,e){t.squareTo(e),this.reduce(e)}function p8(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Cn.prototype.convert=f8;Cn.prototype.revert=l8;Cn.prototype.reduce=h8;Cn.prototype.mulTo=p8;Cn.prototype.sqrTo=d8;function y8(){return(this.t>0?this.data[0]&1:this.s)==0}function g8(t,e){if(t>4294967295||t<1)return B.ONE;var r=oe(),n=oe(),i=e.convert(this),s=Ma(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function b8(t,e){var r;return t<256||e.isEven()?r=new An(e):r=new Cn(e),this.exp(t,r)}B.prototype.copyTo=KE;B.prototype.fromInt=VE;B.prototype.fromString=qE;B.prototype.clamp=HE;B.prototype.dlShiftTo=XE;B.prototype.drShiftTo=YE;B.prototype.lShiftTo=JE;B.prototype.rShiftTo=ZE;B.prototype.subTo=QE;B.prototype.multiplyTo=e8;B.prototype.squareTo=t8;B.prototype.divRemTo=r8;B.prototype.invDigit=u8;B.prototype.isEven=y8;B.prototype.exp=g8;B.prototype.toString=zE;B.prototype.negate=GE;B.prototype.abs=WE;B.prototype.compareTo=jE;B.prototype.bitLength=$E;B.prototype.mod=n8;B.prototype.modPowInt=b8;B.ZERO=tn(0);B.ONE=tn(1);function m8(){var t=oe();return this.copyTo(t),t}function x8(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function w8(){return this.t==0?this.s:this.data[0]<<24>>24}function v8(){return this.t==0?this.s:this.data[0]<<16>>16}function E8(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function S8(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function _8(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=tn(r),i=oe(),s=oe(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function A8(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var c=f1(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=e*o+c,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&B.ZERO.subTo(this,this)}function C8(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(B.ONE.shiftLeft(t-1),p0,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(B.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function D8(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function T8(t){return this.compareTo(t)==0}function B8(t){return this.compareTo(t)<0?this:t}function I8(t){return this.compareTo(t)>0?this:t}function k8(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function L8(t,e){return t&e}function N8(t){var e=oe();return this.bitwiseTo(t,L8,e),e}function p0(t,e){return t|e}function R8(t){var e=oe();return this.bitwiseTo(t,p0,e),e}function l1(t,e){return t^e}function O8(t){var e=oe();return this.bitwiseTo(t,l1,e),e}function h1(t,e){return t&~e}function P8(t){var e=oe();return this.bitwiseTo(t,h1,e),e}function U8(){for(var t=oe(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function F8(t){var e=oe();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function M8(t){var e=oe();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function K8(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function V8(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+K8(this.data[t]);return this.s<0?this.t*this.DB:-1}function q8(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function H8(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=q8(this.data[r]^e);return t}function z8(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function G8(t,e){var r=B.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function W8(t){return this.changeBit(t,p0)}function j8(t){return this.changeBit(t,h1)}function $8(t){return this.changeBit(t,l1)}function X8(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Y8(t){var e=oe();return this.addTo(t,e),e}function J8(t){var e=oe();return this.subTo(t,e),e}function Z8(t){var e=oe();return this.multiplyTo(t,e),e}function Q8(t){var e=oe();return this.divRemTo(t,e,null),e}function e4(t){var e=oe();return this.divRemTo(t,null,e),e}function t4(t){var e=oe(),r=oe();return this.divRemTo(t,e,r),new Array(e,r)}function r4(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function n4(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Ts(){}function d1(t){return t}function i4(t,e,r){t.multiplyTo(e,r)}function s4(t,e){t.squareTo(e)}Ts.prototype.convert=d1;Ts.prototype.revert=d1;Ts.prototype.mulTo=i4;Ts.prototype.sqrTo=s4;function o4(t){return this.exp(t,new Ts)}function a4(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function c4(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Ai(t){this.r2=oe(),this.q3=oe(),B.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function u4(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=oe();return t.copyTo(e),this.reduce(e),e}function f4(t){return t}function l4(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function h4(t,e){t.squareTo(e),this.reduce(e)}function d4(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Ai.prototype.convert=u4;Ai.prototype.revert=f4;Ai.prototype.reduce=l4;Ai.prototype.mulTo=d4;Ai.prototype.sqrTo=h4;function p4(t,e){var r=t.bitLength(),n,i=tn(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new An(e):e.isEven()?s=new Ai(e):s=new Cn(e);var o=new Array,a=3,c=n-1,u=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=oe();for(s.sqrTo(o[1],f);a<=u;)o[a]=oe(),s.mulTo(f,o[a-2],o[a]),a+=2}var l=t.t-1,h,p=!0,d=oe(),y;for(r=Ma(t.data[l])-1;l>=0;){for(r>=c?h=t.data[l]>>r-c&u:(h=(t.data[l]&(1<<r+1)-1)<<c-r,l>0&&(h|=t.data[l-1]>>this.DB+r-c)),a=n;!(h&1);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),p)o[h].copyTo(i),p=!1;else{for(;a>1;)s.sqrTo(i,d),s.sqrTo(d,i),a-=2;a>0?s.sqrTo(i,d):(y=i,i=d,d=y),s.mulTo(d,o[h],i)}for(;l>=0&&!(t.data[l]&1<<r);)s.sqrTo(i,d),y=i,i=d,d=y,--r<0&&(r=this.DB-1,--l)}return s.revert(i)}function y4(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function g4(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function b4(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return B.ZERO;for(var r=t.clone(),n=this.clone(),i=tn(1),s=tn(0),o=tn(0),a=tn(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(B.ONE)!=0)return B.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var jt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],m4=(1<<26)/jt[jt.length-1];function x4(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=jt[jt.length-1]){for(e=0;e<jt.length;++e)if(r.data[0]==jt[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<jt.length;){for(var n=jt[e],i=e+1;i<jt.length&&n<m4;)n*=jt[i++];for(n=r.modInt(n);e<i;)if(n%jt[e++]==0)return!1}return r.millerRabin(t)}function w4(t){var e=this.subtract(B.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=v4(),s,o=0;o<t;++o){do s=new B(this.bitLength(),i);while(s.compareTo(B.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(n,this);if(a.compareTo(B.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(B.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function v4(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}B.prototype.chunkSize=E8;B.prototype.toRadix=_8;B.prototype.fromRadix=A8;B.prototype.fromNumber=C8;B.prototype.bitwiseTo=k8;B.prototype.changeBit=G8;B.prototype.addTo=X8;B.prototype.dMultiply=r4;B.prototype.dAddOffset=n4;B.prototype.multiplyLowerTo=a4;B.prototype.multiplyUpperTo=c4;B.prototype.modInt=g4;B.prototype.millerRabin=w4;B.prototype.clone=m8;B.prototype.intValue=x8;B.prototype.byteValue=w8;B.prototype.shortValue=v8;B.prototype.signum=S8;B.prototype.toByteArray=D8;B.prototype.equals=T8;B.prototype.min=B8;B.prototype.max=I8;B.prototype.and=N8;B.prototype.or=R8;B.prototype.xor=O8;B.prototype.andNot=P8;B.prototype.not=U8;B.prototype.shiftLeft=F8;B.prototype.shiftRight=M8;B.prototype.getLowestSetBit=V8;B.prototype.bitCount=H8;B.prototype.testBit=z8;B.prototype.setBit=W8;B.prototype.clearBit=j8;B.prototype.flipBit=$8;B.prototype.add=Y8;B.prototype.subtract=J8;B.prototype.multiply=Z8;B.prototype.divide=Q8;B.prototype.remainder=e4;B.prototype.divideAndRemainder=t4;B.prototype.modPow=p4;B.prototype.modInverse=b4;B.prototype.pow=o4;B.prototype.gcd=y4;B.prototype.isProbablePrime=x4});var x1=_((Zk,m1)=>{var pr=we();_n();Ve();var g1=m1.exports=pr.sha1=pr.sha1||{};pr.md.sha1=pr.md.algorithms.sha1=g1;g1.create=function(){b1||E4();var t=null,e=pr.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=pr.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=pr.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),y1(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=pr.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(y0.substr(0,n.blockLength-o));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var l={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};y1(l,r,i);var h=pr.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var y0=null,b1=!1;function E4(){y0=String.fromCharCode(128),y0+=pr.util.fillString(String.fromCharCode(0),64),b1=!0}function y1(t,e,r){for(var n,i,s,o,a,c,u,f,l=r.length();l>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,c=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=a^s&(o^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=s&o|a&(s^o),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=s^o^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,l-=64}}});var E1=_((Qk,v1)=>{var yr=we();Ve();Ds();x1();var w1=v1.exports=yr.pkcs1=yr.pkcs1||{};w1.encode_rsa_oaep=function(t,e,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=yr.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),c=a-2*s.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),s.update(n,"raw");for(var f=s.digest(),l="",h=c-e.length,p=0;p<h;p++)l+="\0";var d=f.getBytes()+l+""+e;if(!i)i=yr.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=s.digestLength,u}var y=Va(i,a-s.digestLength-1,o),g=yr.util.xorBytes(d,y,d.length),b=Va(g,s.digestLength,o),v=yr.util.xorBytes(i,b,i.length);return"\0"+v+g};w1.decode_rsa_oaep=function(t,e,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=o,g}if(i===void 0?i=yr.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),l=Va(f,i.digestLength,s),h=yr.util.xorBytes(u,l,u.length),p=Va(h,o-i.digestLength-1,s),d=yr.util.xorBytes(f,p,f.length),y=d.substring(0,i.digestLength),g=c!=="\0",b=0;b<i.digestLength;++b)g|=a.charAt(b)!==y.charAt(b);for(var v=1,w=i.digestLength,C=i.digestLength;C<d.length;C++){var E=d.charCodeAt(C),S=E&1^1,T=v?65534:0;g|=E&T,v=v&S,w+=v}if(g||d.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(w+1)};function Va(t,e,r){r||(r=yr.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),n+=r.digest().getBytes()}return n.substring(0,e)}});var S1=_((eL,g0)=>{var rn=we();Ve();Ka();Ds();(function(){if(rn.prime){g0.exports=rn.prime;return}var t=g0.exports=rn.prime=rn.prime||{},e=rn.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(l,h){return l|h};t.generateProbablePrime=function(l,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var y=h.prng||rn.random,g={nextBytes:function(b){for(var v=y.getBytesSync(b.length),w=0;w<b.length;++w)b[w]=v.charCodeAt(w)}};if(d.name==="PRIMEINC")return s(l,g,d.options,p);throw new Error("Invalid prime generation algorithm: "+d.name)};function s(l,h,p,d){return"workers"in p?c(l,h,p,d):o(l,h,p,d)}function o(l,h,p,d){var y=u(l,h),g=0,b=f(y.bitLength());"millerRabinTests"in p&&(b=p.millerRabinTests);var v=10;"maxBlockTime"in p&&(v=p.maxBlockTime),a(y,l,h,g,b,v,d)}function a(l,h,p,d,y,g,b){var v=+new Date;do{if(l.bitLength()>h&&(l=u(h,p)),l.isProbablePrime(y))return b(null,l);l.dAddOffset(r[d++%8],0)}while(g<0||+new Date-v<g);rn.util.setImmediate(function(){a(l,h,p,d,y,g,b)})}function c(l,h,p,d){if(typeof Worker>"u")return o(l,h,p,d);var y=u(l,h),g=p.workers,b=p.workLoad||100,v=b*30/8,w=p.workerScript||"forge/prime.worker.js";if(g===-1)return rn.util.estimateCores(function(E,S){E&&(S=2),g=S-1,C()});C();function C(){g=Math.max(1,g);for(var E=[],S=0;S<g;++S)E[S]=new Worker(w);for(var T=g,S=0;S<g;++S)E[S].addEventListener("message",O);var I=!1;function O(F){if(!I){--T;var z=F.data;if(z.found){for(var V=0;V<E.length;++V)E[V].terminate();return I=!0,d(null,new e(z.prime,16))}y.bitLength()>l&&(y=u(l,h));var re=y.toString(16);F.target.postMessage({hex:re,workLoad:b}),y.dAddOffset(v,0)}}}}function u(l,h){var p=new e(l,h),d=l-1;return p.testBit(d)||p.bitwiseTo(e.ONE.shiftLeft(d),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var m0=_((tL,I1)=>{var U=we();Cs();Ka();Ta();E1();S1();Ds();Ve();typeof ne>"u"&&(ne=U.jsbn.BigInteger);var ne,b0=U.util.isNodejs?Ge("crypto"):null,x=U.asn1,Ot=U.util;U.pki=U.pki||{};I1.exports=U.pki.rsa=U.rsa=U.rsa||{};var W=U.pki,S4=[6,4,2,4,2,4,6,2],_4={name:"PrivateKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},A4={name:"RSAPrivateKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},C4={name:"RSAPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},D4=U.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},T4={name:"DigestInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:x.Class.UNIVERSAL,type:x.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:x.Class.UNIVERSAL,type:x.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},B4=function(t){var e;if(t.algorithm in W.oids)e=W.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=x.oidToDer(e).getBytes(),i=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),s=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);s.value.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,n)),s.value.push(x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,""));var o=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(o),x.toDer(i).getBytes()},T1=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(ne.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(ne.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new ne(U.util.bytesToHex(U.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(ne.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(s)<0;)i=i.add(e.p);var o=i.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(n.modInverse(e.n)).mod(e.n),o};W.rsa.encrypt=function(t,e,r){var n=r,i,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=B1(t,e,r)):(i=U.util.createBuffer(),i.putBytes(t));for(var o=new ne(i.toHex(),16),a=T1(o,e,n),c=a.toString(16),u=U.util.createBuffer(),f=s-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(U.util.hexToBytes(c)),u.getBytes()};W.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=i,s}var o=new ne(U.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=T1(o,e,r),c=a.toString(16),u=U.util.createBuffer(),f=i-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(U.util.hexToBytes(c)),n!==!1?qa(u.getBytes(),e,r):u.getBytes()};W.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||U.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:i,eInt:e||65537,e:new ne(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};W.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new ne(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new ne(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(ne.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(k4(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(S4[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(ne.ONE).gcd(t.e).compareTo(ne.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(ne.ONE),t.q1=t.q.subtract(ne.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(ne.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:W.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:W.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};W.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!U.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(_1("generateKeyPair"))return b0.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:W.privateKeyFromPem(u),publicKey:W.publicKeyFromPem(c)})});if(A1("generateKey")&&A1("exportKey"))return Ot.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:D1(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Ot.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=W.privateKeyFromAsn1(x.fromDer(U.util.createBuffer(a)));n(null,{privateKey:c,publicKey:W.setRsaPublicKey(c.n,c.e)})}});if(C1("generateKey")&&C1("exportKey")){var i=Ot.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:D1(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=Ot.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var l=f.target.result,h=W.privateKeyFromAsn1(x.fromDer(U.util.createBuffer(l)));n(null,{privateKey:h,publicKey:W.setRsaPublicKey(h.n,h.e)})},u.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(_1("generateKeyPairSync")){var s=b0.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:W.privateKeyFromPem(s.privateKey),publicKey:W.publicKeyFromPem(s.publicKey)}}}var o=W.rsa.createKeyPairGenerationState(t,e,r);if(!n)return W.rsa.stepKeyPairGenerationState(o,0),o.keys;I4(o,r,n)};W.setRsaPublicKey=W.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return B1(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return U.pkcs1.encode_rsa_oaep(c,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return W.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(c,u){u=qa(u,r,!0);var f=x.fromDer(u,{parseAllBytes:o._parseAllDigestBytes}),l={},h=[];if(!x.validate(f,T4,l,h)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=h,p}var d=x.derToOid(l.algorithmIdentifier);if(!(d===U.oids.md2||d===U.oids.md5||d===U.oids.sha1||d===U.oids.sha224||d===U.oids.sha256||d===U.oids.sha384||d===U.oids.sha512||d===U.oids["sha512-224"]||d===U.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=d,p}if((d===U.oids.md2||d===U.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===l.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(c,u){return u=qa(u,r,!0),c===u}});var a=W.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};W.setRsaPrivateKey=W.rsa.setPrivateKey=function(t,e,r,n,i,s,o,a){var c={n:t,e,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return c.decrypt=function(u,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=W.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:qa};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(p,d){return U.pkcs1.decode_rsa_oaep(d,p,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,c,!1)},c.sign=function(u,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:B4},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},l=1);var h=f.encode(u,c.n.bitLength());return W.rsa.encrypt(h,c,l)},c};W.wrapRsaPrivateKey=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(0).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(W.oids.rsaEncryption).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,x.toDer(t).getBytes())])};W.privateKeyFromAsn1=function(t){var e={},r=[];if(x.validate(t,_4,e,r)&&(t=x.fromDer(U.util.createBuffer(e.privateKey))),e={},r=[],!x.validate(t,A4,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,c,u,f,l;return i=U.util.createBuffer(e.privateKeyModulus).toHex(),s=U.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=U.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=U.util.createBuffer(e.privateKeyPrime1).toHex(),c=U.util.createBuffer(e.privateKeyPrime2).toHex(),u=U.util.createBuffer(e.privateKeyExponent1).toHex(),f=U.util.createBuffer(e.privateKeyExponent2).toHex(),l=U.util.createBuffer(e.privateKeyCoefficient).toHex(),W.setRsaPrivateKey(new ne(i,16),new ne(s,16),new ne(o,16),new ne(a,16),new ne(c,16),new ne(u,16),new ne(f,16),new ne(l,16))};W.privateKeyToAsn1=W.privateKeyToRSAPrivateKey=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(0).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.n)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.e)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.d)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.p)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.q)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.dP)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.dQ)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.qInv))])};W.publicKeyFromAsn1=function(t){var e={},r=[];if(x.validate(t,D4,e,r)){var n=x.derToOid(e.publicKeyOid);if(n!==W.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!x.validate(t,C4,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=U.util.createBuffer(e.publicKeyModulus).toHex(),o=U.util.createBuffer(e.publicKeyExponent).toHex();return W.setRsaPublicKey(new ne(s,16),new ne(o,16))};W.publicKeyToAsn1=W.publicKeyToSubjectPublicKeyInfo=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(W.oids.rsaEncryption).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,[W.publicKeyToRSAPublicKey(t)])])};W.publicKeyToRSAPublicKey=function(t){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.n)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,gr(t.e))])};function B1(t,e,r){var n=U.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<o;++c)n.putByte(a)}else for(;o>0;){for(var u=0,f=U.random.getBytes(o),c=0;c<o;++c)a=f.charCodeAt(c),a===0?++u:n.putByte(a);o=u}return n.putByte(0),n.putBytes(t),n}function qa(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),s=U.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++c}else if(a===2)for(c=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++c}var f=s.getByte();if(f!==0||c!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function I4(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){s(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,c){U.prime.generateProbablePrime(a,n,c)}function o(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(ne.ONE).gcd(t.e).compareTo(ne.ONE)!==0){t.p=null,i();return}if(t.q.subtract(ne.ONE).gcd(t.e).compareTo(ne.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(ne.ONE),t.q1=t.q.subtract(ne.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(ne.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:W.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:W.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function gr(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=U.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function k4(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _1(t){return U.util.isNodejs&&typeof b0[t]=="function"}function A1(t){return typeof Ot.globalScope<"u"&&typeof Ot.globalScope.crypto=="object"&&typeof Ot.globalScope.crypto.subtle=="object"&&typeof Ot.globalScope.crypto.subtle[t]=="function"}function C1(t){return typeof Ot.globalScope<"u"&&typeof Ot.globalScope.msCrypto=="object"&&typeof Ot.globalScope.msCrypto.subtle=="object"&&typeof Ot.globalScope.msCrypto.subtle[t]=="function"}function D1(t){for(var e=U.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var P1=_((rL,O1)=>{var N=we();c0();Cs();Ky();_n();Ta();Gy();$y();Ds();o1();m0();Ve();typeof k1>"u"&&(k1=N.jsbn.BigInteger);var k1,A=N.asn1,j=N.pki=N.pki||{};O1.exports=j.pbe=N.pbe=N.pbe||{};var Dn=j.oids,L4={name:"EncryptedPrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},N4={name:"PBES2Algorithms",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},R4={name:"pkcs-12PbeParams",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"iterations"}]};j.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=N.random.getBytesSync(r.saltSize),i=r.count,s=A.integerToDer(i),o,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,l;switch(r.algorithm){case"aes128":o=16,u=16,f=Dn["aes128-CBC"],l=N.aes.createEncryptionCipher;break;case"aes192":o=24,u=16,f=Dn["aes192-CBC"],l=N.aes.createEncryptionCipher;break;case"aes256":o=32,u=16,f=Dn["aes256-CBC"],l=N.aes.createEncryptionCipher;break;case"des":o=8,u=8,f=Dn.desCBC,l=N.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),d=R1(p),y=N.pkcs5.pbkdf2(e,n,i,o,d),g=N.random.getBytesSync(u),b=l(y);b.start(g),b.update(A.toDer(t)),b.finish(),c=b.output.getBytes();var v=O4(n,s,o,p);a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Dn.pkcs5PBES2).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Dn.pkcs5PBKDF2).getBytes()),v]),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(f).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){o=24;var w=new N.util.ByteBuffer(n),y=j.pbe.generatePkcs12Key(e,w,1,i,o),g=j.pbe.generatePkcs12Key(e,w,2,i,o),b=N.des.createEncryptionCipher(y);b.start(g),b.update(A.toDer(t)),b.finish(),c=b.output.getBytes(),a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Dn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,n),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var C=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[a,A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,c)]);return C};j.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!A.validate(t,L4,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=A.derToOid(n.encryptionOid),a=j.pbe.getCipher(o,n.encryptionParams,e),c=N.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=A.fromDer(a.output)),r};j.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:A.toDer(t).getBytes()};return N.pem.encode(r,{maxline:e})};j.encryptedPrivateKeyFromPem=function(t){var e=N.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return A.fromDer(e.body)};j.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=j.wrapRsaPrivateKey(j.privateKeyToAsn1(t));return n=j.encryptPrivateKeyInfo(n,e,r),j.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=N.random.getBytesSync(8),a=N.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=N.random.getBytesSync(8),a=N.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=N.pbe.opensslDeriveBytes(e,s.substr(0,8),o),f=a(u);f.start(s),f.update(A.toDer(j.privateKeyToAsn1(t))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:N.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return N.pem.encode(l)};j.decryptRsaPrivateKey=function(t,e){var r=null,n=N.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=N.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=N.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=N.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=N.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=N.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(l){return N.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":s=8,o=function(l){return N.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":s=16,o=function(l){return N.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=N.util.hexToBytes(n.dekInfo.parameters),c=N.pbe.opensslDeriveBytes(e,a.substr(0,8),s),u=o(c);if(u.start(a),u.update(N.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=j.decryptPrivateKeyInfo(A.fromDer(r),e):r=A.fromDer(r),r!==null&&(r=j.privateKeyFromAsn1(r)),r};j.pbe.generatePkcs12Key=function(t,e,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in N.md))throw new Error('"sha1" hash algorithm unavailable.');s=N.md.sha1.create()}var c=s.digestLength,u=s.blockLength,f=new N.util.ByteBuffer,l=new N.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)l.putInt16(t.charCodeAt(a));l.putInt16(0)}var h=l.length(),p=e.length(),d=new N.util.ByteBuffer;d.fillWithByte(r,u);var y=u*Math.ceil(p/u),g=new N.util.ByteBuffer;for(a=0;a<y;a++)g.putByte(e.at(a%p));var b=u*Math.ceil(h/u),v=new N.util.ByteBuffer;for(a=0;a<b;a++)v.putByte(l.at(a%h));var w=g;w.putBuffer(v);for(var C=Math.ceil(i/c),E=1;E<=C;E++){var S=new N.util.ByteBuffer;S.putBytes(d.bytes()),S.putBytes(w.bytes());for(var T=0;T<n;T++)s.start(),s.update(S.getBytes()),S=s.digest();var I=new N.util.ByteBuffer;for(a=0;a<u;a++)I.putByte(S.at(a%c));var O=Math.ceil(p/u)+Math.ceil(h/u),F=new N.util.ByteBuffer;for(o=0;o<O;o++){var z=new N.util.ByteBuffer(w.getBytes(u)),V=511;for(a=I.length()-1;a>=0;a--)V=V>>8,V+=I.at(a)+z.at(a),z.setAt(a,V&255);F.putBuffer(z)}w=F,f.putBuffer(S)}return f.truncate(f.length()-i),f};j.pbe.getCipher=function(t,e,r){switch(t){case j.oids.pkcs5PBES2:return j.pbe.getCipherForPBES2(t,e,r);case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case j.oids["pbewithSHAAnd40BitRC2-CBC"]:return j.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};j.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!A.validate(e,N4,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(t=A.derToOid(n.kdfOid),t!==j.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=A.derToOid(n.encOid),t!==j.oids["aes128-CBC"]&&t!==j.oids["aes192-CBC"]&&t!==j.oids["aes256-CBC"]&&t!==j.oids["des-EDE3-CBC"]&&t!==j.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=N.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(j.oids[t]){case"aes128-CBC":c=16,u=N.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=N.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=N.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=N.des.createDecryptionCipher;break;case"desCBC":c=8,u=N.des.createDecryptionCipher;break}var f=N1(n.prfOid),l=N.pkcs5.pbkdf2(r,o,a,c,f),h=n.encIv,p=u(l);return p.start(h),p};j.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!A.validate(e,R4,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=N.util.createBuffer(n.salt),a=N.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,f;switch(t){case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=N.des.startDecrypting;break;case j.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(y,g){var b=N.rc2.createDecryptionCipher(y,40);return b.start(g,null),b};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var l=N1(n.prfOid),h=j.pbe.generatePkcs12Key(r,o,1,a,c,l);l.start();var p=j.pbe.generatePkcs12Key(r,o,2,a,u,l);return f(h,p)};j.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in N.md))throw new Error('"md5" hash algorithm unavailable.');n=N.md.md5.create()}e===null&&(e="");for(var i=[L1(n,t+e)],s=16,o=1;s<r;++o,s+=16)i.push(L1(n,i[o-1]+t+e));return i.join("").substr(0,r)};function L1(t,e){return t.start().update(e).digest().getBytes()}function N1(t){var e;if(!t)e="hmacWithSHA1";else if(e=j.oids[A.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return R1(e)}function R1(t){var e=N.md;switch(t){case"hmacWithSHA224":e=N.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function O4(t,e,r,n){var i=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,t),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,N.util.hexToBytes(r.toString(16))),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(j.oids[n]).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")])),i}});var Y1=_((LL,X1)=>{var De=we();_n();Ve();var Is=X1.exports=De.sha512=De.sha512||{};De.md.sha512=De.md.algorithms.sha512=Is;var j1=De.sha384=De.sha512.sha384=De.sha512.sha384||{};j1.create=function(){return Is.create("SHA-384")};De.md.sha384=De.md.algorithms.sha384=j1;De.sha512.sha256=De.sha512.sha256||{create:function(){return Is.create("SHA-512/256")}};De.md["sha512/256"]=De.md.algorithms["sha512/256"]=De.sha512.sha256;De.sha512.sha224=De.sha512.sha224||{create:function(){return Is.create("SHA-512/224")}};De.md["sha512/224"]=De.md.algorithms["sha512/224"]=De.sha512.sha224;Is.create=function(t){if($1||G4(),typeof t>"u"&&(t="SHA-512"),!(t in Ln))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=Ln[t],r=null,n=De.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=De.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=De.util.encodeUtf8(c));var f=c.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=f[1],f[1]=f[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(c),W1(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=De.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=u&a.blockLength-1;c.putBytes(E0.substr(0,a.blockLength-f));for(var l,h,p=a.fullMessageLength[0]*8,d=0;d<a.fullMessageLength.length-1;++d)l=a.fullMessageLength[d+1]*8,h=l/4294967296>>>0,p+=h,c.putInt32(p>>>0),p=l>>>0;c.putInt32(p);for(var y=new Array(r.length),d=0;d<r.length;++d)y[d]=r[d].slice(0);W1(y,i,c);var g=De.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var d=0;d<b;++d)g.putInt32(y[d][0]),(d!==b-1||t!=="SHA-512/224")&&g.putInt32(y[d][1]);return g},a};var E0=null,$1=!1,S0=null,Ln=null;function G4(){E0=String.fromCharCode(128),E0+=De.util.fillString(String.fromCharCode(0),128),S0=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Ln={},Ln["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Ln["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Ln["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Ln["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],$1=!0}function W1(t,e,r){for(var n,i,s,o,a,c,u,f,l,h,p,d,y,g,b,v,w,C,E,S,T,I,O,F,z,V,re,ce,K,H,D,q,ve,Z,Q,te=r.length();te>=128;){for(K=0;K<16;++K)e[K][0]=r.getInt32()>>>0,e[K][1]=r.getInt32()>>>0;for(;K<80;++K)q=e[K-2],H=q[0],D=q[1],n=((H>>>19|D<<13)^(D>>>29|H<<3)^H>>>6)>>>0,i=((H<<13|D>>>19)^(D<<3|H>>>29)^(H<<26|D>>>6))>>>0,Z=e[K-15],H=Z[0],D=Z[1],s=((H>>>1|D<<31)^(H>>>8|D<<24)^H>>>7)>>>0,o=((H<<31|D>>>1)^(H<<24|D>>>8)^(H<<25|D>>>7))>>>0,ve=e[K-7],Q=e[K-16],D=i+ve[1]+o+Q[1],e[K][0]=n+ve[0]+s+Q[0]+(D/4294967296>>>0)>>>0,e[K][1]=D>>>0;for(y=t[0][0],g=t[0][1],b=t[1][0],v=t[1][1],w=t[2][0],C=t[2][1],E=t[3][0],S=t[3][1],T=t[4][0],I=t[4][1],O=t[5][0],F=t[5][1],z=t[6][0],V=t[6][1],re=t[7][0],ce=t[7][1],K=0;K<80;++K)u=((T>>>14|I<<18)^(T>>>18|I<<14)^(I>>>9|T<<23))>>>0,f=((T<<18|I>>>14)^(T<<14|I>>>18)^(I<<23|T>>>9))>>>0,l=(z^T&(O^z))>>>0,h=(V^I&(F^V))>>>0,a=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,c=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,p=(y&b|w&(y^b))>>>0,d=(g&v|C&(g^v))>>>0,D=ce+f+h+S0[K][1]+e[K][1],n=re+u+l+S0[K][0]+e[K][0]+(D/4294967296>>>0)>>>0,i=D>>>0,D=c+d,s=a+p+(D/4294967296>>>0)>>>0,o=D>>>0,re=z,ce=V,z=O,V=F,O=T,F=I,D=S+i,T=E+n+(D/4294967296>>>0)>>>0,I=D>>>0,E=w,S=C,w=b,C=v,b=y,v=g,D=i+o,y=n+s+(D/4294967296>>>0)>>>0,g=D>>>0;D=t[0][1]+g,t[0][0]=t[0][0]+y+(D/4294967296>>>0)>>>0,t[0][1]=D>>>0,D=t[1][1]+v,t[1][0]=t[1][0]+b+(D/4294967296>>>0)>>>0,t[1][1]=D>>>0,D=t[2][1]+C,t[2][0]=t[2][0]+w+(D/4294967296>>>0)>>>0,t[2][1]=D>>>0,D=t[3][1]+S,t[3][0]=t[3][0]+E+(D/4294967296>>>0)>>>0,t[3][1]=D>>>0,D=t[4][1]+I,t[4][0]=t[4][0]+T+(D/4294967296>>>0)>>>0,t[4][1]=D>>>0,D=t[5][1]+F,t[5][0]=t[5][0]+O+(D/4294967296>>>0)>>>0,t[5][1]=D>>>0,D=t[6][1]+V,t[6][0]=t[6][0]+z+(D/4294967296>>>0)>>>0,t[6][1]=D>>>0,D=t[7][1]+ce,t[7][0]=t[7][0]+re+(D/4294967296>>>0)>>>0,t[7][1]=D>>>0,te-=128}}});var Pg=_((_R,Og)=>{"use strict";function C6(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=n}var o=t.length,a=t.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var d=0,y=0,g=0,b=p.length;g!==b&&p[g]===0;)g++,d++;for(var v=(b-g)*u+1>>>0,w=new Uint8Array(v);g!==b;){for(var C=p[g],E=0,S=v-1;(C!==0||E<y)&&S!==-1;S--,E++)C+=256*w[S]>>>0,w[S]=C%o>>>0,C=C/o>>>0;if(C!==0)throw new Error("Non-zero carry");y=E,g++}for(var T=v-y;T!==v&&w[T]===0;)T++;for(var I=a.repeat(d);T<v;++T)I+=t.charAt(w[T]);return I}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var d=0;if(p[d]!==" "){for(var y=0,g=0;p[d]===a;)y++,d++;for(var b=(p.length-d)*c+1>>>0,v=new Uint8Array(b);p[d];){var w=e[p.charCodeAt(d)];if(w===255)return;for(var C=0,E=b-1;(w!==0||C<g)&&E!==-1;E--,C++)w+=o*v[E]>>>0,v[E]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");g=C,d++}if(p[d]!==" "){for(var S=b-g;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(y+(b-S)),I=y;S!==b;)T[I++]=v[S++];return T}}}function h(p){var d=l(p);if(d)return d;throw new Error("Non-base"+o+" character")}return{encode:f,decodeUnsafe:l,decode:h}}Og.exports=C6});var sc=_((AR,Ug)=>{"use strict";var D6=new TextDecoder,T6=t=>D6.decode(t),B6=new TextEncoder,I6=t=>B6.encode(t);function k6(t,e){let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}Ug.exports={decodeText:T6,encodeText:I6,concat:k6}});var Mg=_((CR,Fg)=>{"use strict";var{encodeText:L6}=sc(),M0=class{constructor(e,r,n,i){this.name=e,this.code=r,this.codeBuf=L6(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};Fg.exports=M0});var Vg=_((DR,Kg)=>{"use strict";var N6=(t,e,r)=>{let n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;let s=new Uint8Array(i*r/8|0),o=0,a=0,c=0;for(let u=0;u<i;++u){let f=n[t[u]];if(f===void 0)throw new SyntaxError("Invalid character "+t[u]);a=a<<r|f,o+=r,o>=8&&(o-=8,s[c++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return s},R6=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},O6=t=>e=>({encode(r){return R6(r,e,t)},decode(r){return N6(r,e,t)}});Kg.exports={rfc4648:O6}});var Gg=_((TR,zg)=>{"use strict";var Vs=Pg(),P6=Mg(),{rfc4648:tt}=Vg(),{decodeText:U6,encodeText:F6}=sc(),M6=()=>({encode:U6,decode:F6}),qg=[["identity","\0",M6,""],["base2","0",tt(1),"01"],["base8","7",tt(3),"01234567"],["base10","9",Vs,"0123456789"],["base16","f",tt(4),"0123456789abcdef"],["base16upper","F",tt(4),"0123456789ABCDEF"],["base32hex","v",tt(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",tt(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",tt(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",tt(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",tt(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",tt(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",tt(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",tt(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",tt(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Vs,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Vs,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Vs,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Vs,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",tt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",tt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",tt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",tt(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Hg=qg.reduce((t,e)=>(t[e[0]]=new P6(e[0],e[1],e[2],e[3]),t),{}),K6=qg.reduce((t,e)=>(t[e[1]]=Hg[e[0]],t),{});zg.exports={names:Hg,codes:K6}});var $g=_((Kr,jg)=>{"use strict";var Oi=Gg(),{encodeText:V6,decodeText:oc,concat:Wg}=sc();function q6(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=Un(t);return W6(r,e),Wg([n,e],n.length+e.length)}function H6(t,e){let r=Un(t),n=V6(r.encode(e));return Wg([r.codeBuf,n],r.codeBuf.length+n.length)}function z6(t){t instanceof Uint8Array&&(t=oc(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),Un(t[0]).decode(t.substring(1))}function G6(t){if(t instanceof Uint8Array&&(t=oc(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return Un(t[0]).name}catch{return!1}}function W6(t,e){Un(t).decode(oc(e))}function Un(t){if(Object.prototype.hasOwnProperty.call(Oi.names,t))return Oi.names[t];if(Object.prototype.hasOwnProperty.call(Oi.codes,t))return Oi.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function j6(t){return t instanceof Uint8Array&&(t=oc(t)),Un(t[0])}Kr=jg.exports=q6;Kr.encode=H6;Kr.decode=z6;Kr.isEncoded=G6;Kr.encoding=Un;Kr.encodingFromData=j6;var $6=Object.freeze(Oi.names),X6=Object.freeze(Oi.codes);Kr.names=$6;Kr.codes=X6});var Zg=_((BR,Jg)=>{Jg.exports=Yg;var Xg=128,Y6=127,J6=~Y6,Z6=Math.pow(2,31);function Yg(t,e,r){e=e||[],r=r||0;for(var n=r;t>=Z6;)e[r++]=t&255|Xg,t/=128;for(;t&J6;)e[r++]=t&255|Xg,t>>>=7;return e[r]=t|0,Yg.bytes=r-n+1,e}});var t2=_((IR,e2)=>{e2.exports=K0;var Q6=128,Qg=127;function K0(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw K0.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Qg)<<i:(o&Qg)*Math.pow(2,i),i+=7}while(o>=Q6);return K0.bytes=s-n,r}});var n2=_((kR,r2)=>{var eS=Math.pow(2,7),tS=Math.pow(2,14),rS=Math.pow(2,21),nS=Math.pow(2,28),iS=Math.pow(2,35),sS=Math.pow(2,42),oS=Math.pow(2,49),aS=Math.pow(2,56),cS=Math.pow(2,63);r2.exports=function(t){return t<eS?1:t<tS?2:t<rS?3:t<nS?4:t<iS?5:t<sS?6:t<oS?7:t<aS?8:t<cS?9:10}});var s2=_((LR,i2)=>{i2.exports={encode:Zg(),decode:t2(),encodingLength:n2()}});var a2=_((NR,o2)=>{"use strict";var uS=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});o2.exports={names:uS}});var u2=_((RR,c2)=>{"use strict";function fS(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var y=0,g=0,b=0,v=d.length;b!==v&&d[b]===0;)b++,y++;for(var w=(v-b)*f+1>>>0,C=new Uint8Array(w);b!==v;){for(var E=d[b],S=0,T=w-1;(E!==0||S<g)&&T!==-1;T--,S++)E+=256*C[T]>>>0,C[T]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");g=S,b++}for(var I=w-g;I!==w&&C[I]===0;)I++;for(var O=c.repeat(y);I<w;++I)O+=t.charAt(C[I]);return O}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var y=0;if(d[y]!==" "){for(var g=0,b=0;d[y]===c;)g++,y++;for(var v=(d.length-y)*u+1>>>0,w=new Uint8Array(v);d[y];){var C=r[d.charCodeAt(y)];if(C===255)return;for(var E=0,S=v-1;(C!==0||E<b)&&S!==-1;S--,E++)C+=a*w[S]>>>0,w[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=E,y++}if(d[y]!==" "){for(var T=v-b;T!==v&&w[T]===0;)T++;for(var I=new Uint8Array(g+(v-T)),O=g;T!==v;)I[O++]=w[T++];return I}}}function p(d){var y=h(d);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:p}}var lS=fS,hS=lS;c2.exports=hS});var Er=_(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});var f2=new Uint8Array(0),dS=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),pS=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):f2},yS=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},gS=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},bS=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),mS=t=>new TextEncoder().encode(t),xS=t=>new TextDecoder().decode(t);vr.coerce=gS;vr.empty=f2;vr.equals=yS;vr.fromHex=pS;vr.fromString=mS;vr.isBinary=bS;vr.toHex=dS;vr.toString=xS});var Zt=_(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});var wS=u2(),vS=Er(),V0=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},q0=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return z0(this,e)}},H0=class{constructor(e){this.decoders=e}or(e){return z0(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},z0=(t,e)=>new H0({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),ac=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new V0(e,r,n),this.decoder=new q0(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},G0=({name:t,prefix:e,encode:r,decode:n})=>new ac(t,e,r,n),ES=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=wS(r,e);return G0({prefix:t,name:e,encode:n,decode:s=>vS.coerce(i(s))})},SS=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=i[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},_S=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},AS=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>G0({prefix:e,name:t,encode(i){return _S(i,n,r)},decode(i){return SS(i,n,r,t)}});Fn.Codec=ac;Fn.baseX=ES;Fn.from=G0;Fn.or=z0;Fn.rfc4648=AS});var h2=_(W0=>{"use strict";Object.defineProperty(W0,"__esModule",{value:!0});var CS=Zt(),l2=Er(),DS=CS.from({prefix:"\0",name:"identity",encode:t=>l2.toString(t),decode:t=>l2.fromString(t)});W0.identity=DS});var d2=_(j0=>{"use strict";Object.defineProperty(j0,"__esModule",{value:!0});var TS=Zt(),BS=TS.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});j0.base2=BS});var p2=_($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});var IS=Zt(),kS=IS.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});$0.base8=kS});var y2=_(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});var LS=Zt(),NS=LS.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});X0.base10=NS});var b2=_(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});var g2=Zt(),RS=g2.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),OS=g2.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});cc.base16=RS;cc.base16upper=OS});var Y0=_(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});var Vr=Zt(),PS=Vr.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),US=Vr.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),FS=Vr.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),MS=Vr.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),KS=Vr.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),VS=Vr.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qS=Vr.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),HS=Vr.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zS=Vr.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});Qt.base32=PS;Qt.base32hex=KS;Qt.base32hexpad=qS;Qt.base32hexpadupper=HS;Qt.base32hexupper=VS;Qt.base32pad=FS;Qt.base32padupper=MS;Qt.base32upper=US;Qt.base32z=zS});var x2=_(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var m2=Zt(),GS=m2.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),WS=m2.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});uc.base36=GS;uc.base36upper=WS});var J0=_(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});var w2=Zt(),jS=w2.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$S=w2.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});fc.base58btc=jS;fc.base58flickr=$S});var v2=_(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});var lc=Zt(),XS=lc.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),YS=lc.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),JS=lc.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ZS=lc.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});Pi.base64=XS;Pi.base64pad=YS;Pi.base64url=JS;Pi.base64urlpad=ZS});var S2=_(Z0=>{"use strict";Object.defineProperty(Z0,"__esModule",{value:!0});var QS=Zt(),E2=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),e5=E2.reduce((t,e,r)=>(t[r]=e,t),[]),t5=E2.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function r5(t){return t.reduce((e,r)=>(e+=e5[r],e),"")}function n5(t){let e=[];for(let r of t){let n=t5[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var i5=QS.from({prefix:"\u{1F680}",name:"base256emoji",encode:r5,decode:n5});Z0.base256emoji=i5});var T2=_((jR,D2)=>{"use strict";var s5=C2,_2=128,o5=127,a5=~o5,c5=Math.pow(2,31);function C2(t,e,r){e=e||[],r=r||0;for(var n=r;t>=c5;)e[r++]=t&255|_2,t/=128;for(;t&a5;)e[r++]=t&255|_2,t>>>=7;return e[r]=t|0,C2.bytes=r-n+1,e}var u5=Q0,f5=128,A2=127;function Q0(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Q0.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&A2)<<i:(o&A2)*Math.pow(2,i),i+=7}while(o>=f5);return Q0.bytes=s-n,r}var l5=Math.pow(2,7),h5=Math.pow(2,14),d5=Math.pow(2,21),p5=Math.pow(2,28),y5=Math.pow(2,35),g5=Math.pow(2,42),b5=Math.pow(2,49),m5=Math.pow(2,56),x5=Math.pow(2,63),w5=function(t){return t<l5?1:t<h5?2:t<d5?3:t<p5?4:t<y5?5:t<g5?6:t<b5?7:t<m5?8:t<x5?9:10},v5={encode:s5,decode:u5,encodingLength:w5},E5=v5,S5=E5;D2.exports=S5});var Hs=_(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var hc=T2(),_5=(t,e=0)=>[hc.decode(t,e),hc.decode.bytes],A5=(t,e,r=0)=>(hc.encode(t,e,r),e),C5=t=>hc.encodingLength(t);qs.decode=_5;qs.encodeTo=A5;qs.encodingLength=C5});var Mi=_(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var B2=Er(),Ui=Hs(),D5=(t,e)=>{let r=e.byteLength,n=Ui.encodingLength(t),i=n+Ui.encodingLength(r),s=new Uint8Array(i+r);return Ui.encodeTo(t,s,0),Ui.encodeTo(r,s,n),s.set(e,i),new zs(t,r,e,s)},T5=t=>{let e=B2.coerce(t),[r,n]=Ui.decode(e),[i,s]=Ui.decode(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new zs(r,i,o,e)},B5=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&B2.equals(t.bytes,e.bytes),zs=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};Fi.Digest=zs;Fi.create=D5;Fi.decode=T5;Fi.equals=B5});var yc=_(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});var I2=Mi(),I5=({name:t,code:e,encode:r})=>new dc(t,e,r),dc=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?I2.create(this.code,r):r.then(n=>I2.create(this.code,n))}else throw Error("Unknown type, must be binary type")}};pc.Hasher=dc;pc.from=I5});var R2=_(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});var k5=Ge("crypto"),k2=yc(),L2=Er();function L5(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var N2=L5(k5),N5=k2.from({name:"sha2-256",code:18,encode:t=>L2.coerce(N2.default.createHash("sha256").update(t).digest())}),R5=k2.from({name:"sha2-512",code:19,encode:t=>L2.coerce(N2.default.createHash("sha512").update(t).digest())});gc.sha256=N5;gc.sha512=R5});var U2=_(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var O5=Er(),P5=Mi(),O2=0,U5="identity",P2=O5.coerce,F5=t=>P5.create(O2,P2(t)),M5={code:O2,name:U5,encode:P2,digest:F5};el.identity=M5});var M2=_(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var F2=Er(),K5="raw",V5=85,q5=t=>F2.coerce(t),H5=t=>F2.coerce(t);Ki.code=V5;Ki.decode=H5;Ki.encode=q5;Ki.name=K5});var K2=_(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});var z5=new TextEncoder,G5=new TextDecoder,W5="json",j5=512,$5=t=>z5.encode(JSON.stringify(t)),X5=t=>JSON.parse(G5.decode(t));Vi.code=j5;Vi.decode=X5;Vi.encode=$5;Vi.name=W5});var rl=_(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var Ws=Hs(),bc=Mi(),an=J0(),wc=Y0(),Y5=Er(),Je=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:xc,byteLength:xc,code:mc,version:mc,multihash:mc,bytes:mc,_baseCache:xc,asCID:xc})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Gs)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==e_)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Je.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=bc.create(e,r);return Je.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&bc.equals(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return Z5(r,i,e||an.base58btc.encoder);default:return Q5(r,i,e||wc.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return r_(/^0\.0/,n_),!!(e&&(e[q2]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Je)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new Je(r,n,i,s||V2(r,n,i.bytes))}else if(e!=null&&e[q2]===!0){let{version:r,multihash:n,code:i}=e,s=bc.decode(n);return Je.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Gs)throw new Error(`Version 0 CID must use dag-pb (code: ${Gs}) block encoding`);return new Je(e,r,n,n.bytes)}case 1:{let i=V2(e,r,n.bytes);return new Je(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Je.create(0,Gs,e)}static createV1(e,r){return Je.create(1,e,r)}static decode(e){let[r,n]=Je.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Je.inspectBytes(e),n=r.size-r.multihashSize,i=Y5.coerce(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new bc.Digest(r.multihashCode,r.digestSize,s,i);return[r.version===0?Je.createV0(o):Je.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,h]=Ws.decode(e.subarray(r));return r+=h,l},i=n(),s=Gs;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),c=n(),u=r+c,f=u-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,i]=J5(e,r),s=Je.decode(i);return s._baseCache.set(n,e),s}},J5=(t,e)=>{switch(t[0]){case"Q":{let r=e||an.base58btc;return[an.base58btc.prefix,r.decode(`${an.base58btc.prefix}${t}`)]}case an.base58btc.prefix:{let r=e||an.base58btc;return[an.base58btc.prefix,r.decode(t)]}case wc.base32.prefix:{let r=e||wc.base32;return[wc.base32.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Z5=(t,e,r)=>{let{prefix:n}=r;if(n!==an.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},Q5=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},Gs=112,e_=18,V2=(t,e,r)=>{let n=Ws.encodingLength(t),i=n+Ws.encodingLength(e),s=new Uint8Array(i+r.byteLength);return Ws.encodeTo(t,s,0),Ws.encodeTo(e,s,n),s.set(r,i),s},q2=Symbol.for("@ipld/js-cid/CID"),mc={writable:!1,configurable:!1,enumerable:!0},xc={writable:!1,enumerable:!1,configurable:!1},t_="0.0.0-dev",r_=(t,e)=>{if(t.test(t_))console.warn(e);else throw new Error(e)},n_=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;tl.CID=Je});var H2=_(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var i_=rl(),s_=Hs(),o_=Er(),a_=yc(),c_=Mi();Mn.CID=i_.CID;Mn.varint=s_;Mn.bytes=o_;Mn.hasher=a_;Mn.digest=c_});var z2=_(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});var u_=h2(),f_=d2(),l_=p2(),h_=y2(),d_=b2(),p_=Y0(),y_=x2(),g_=J0(),b_=v2(),m_=S2(),x_=R2(),w_=U2(),v_=M2(),E_=K2();H2();var S_=rl(),__=yc(),A_=Mi(),C_=Hs(),D_=Er(),T_={...u_,...f_,...l_,...h_,...d_,...p_,...y_,...g_,...b_,...m_},B_={...x_,...w_},I_={raw:v_,json:E_};Sr.CID=S_.CID;Sr.hasher=__;Sr.digest=A_;Sr.varint=C_;Sr.bytes=D_;Sr.bases=T_;Sr.codecs=I_;Sr.hashes=B_});var vc=_(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});function k_(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}nl.asUint8Array=k_});var il=_(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});var G2=vc();function L_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null?G2.asUint8Array(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function N_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?G2.asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}Ec.alloc=L_;Ec.allocUnsafe=N_});var ol=_((oO,X2)=>{"use strict";var W2=z2(),R_=il();function $2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var j2=$2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),sl=$2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=R_.allocUnsafe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),O_={utf8:j2,"utf-8":j2,hex:W2.bases.base16,latin1:sl,ascii:sl,binary:sl,...W2.bases};X2.exports=O_});var Y2=_(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var P_=ol();function U_(t,e="utf8"){let r=P_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}al.toString=U_});var J2=_(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var F_=ol(),M_=vc();function K_(t,e="utf8"){let r=F_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?M_.asUint8Array(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}cl.fromString=K_});var Z2=_(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var V_=il(),q_=vc();function H_(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=V_.allocUnsafe(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return q_.asUint8Array(r)}ul.concat=H_});var ll=_((fO,ib)=>{"use strict";var Q2=$g(),qi=s2(),{names:js}=a2(),{toString:Sc}=Y2(),{fromString:z_}=J2(),{concat:G_}=Z2(),Hi={};for(let t in js){let e=t;Hi[js[e]]=e}Object.freeze(Hi);function W_(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return Sc(t,"base16")}function j_(t){return z_(t,"base16")}function $_(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return Sc(Q2.encode("base58btc",t)).slice(1)}function X_(t){let e=t instanceof Uint8Array?Sc(t):t;return Q2.decode("z"+e)}function eb(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=qi.decode(t);if(!rb(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(qi.decode.bytes);let r=qi.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(qi.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${Sc(t,"base16")}`);return{code:e,name:Hi[e],length:r,digest:t}}function Y_(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=tb(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");let i=qi.encode(n),s=qi.encode(r);return G_([i,s,t],i.length+s.length+t.length)}function tb(t){let e=t;if(typeof t=="string"){if(js[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=js[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(Hi[e]===void 0&&!fl(e))throw new Error(`Unrecognized function code: ${e}`);return e}function fl(t){return t>0&&t<16}function rb(t){return!!(fl(t)||Hi[t])}function nb(t){eb(t)}function J_(t){return nb(t),t.subarray(0,2)}ib.exports={names:js,codes:Hi,toHexString:W_,fromHexString:j_,toB58String:$_,fromB58String:X_,decode:eb,encode:Y_,coerceCode:tb,isAppCode:fl,validate:nb,prefix:J_,isValidCode:rb}});var uA={};Ze(uA,{webRTC:()=>cA,webRTCDirect:()=>aA});var Xs=Symbol.for("@libp2p/transport");var ml;(function(t){t[t.FATAL_ALL=0]="FATAL_ALL",t[t.NO_FATAL=1]="NO_FATAL"})(ml||(ml={}));var ee=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var It=G(Bl(),1);var Rc={};Ze(Rc,{base58btc:()=>Fe,base58flickr:()=>zb});function Mb(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var y=0,g=0,b=0,v=d.length;b!==v&&d[b]===0;)b++,y++;for(var w=(v-b)*f+1>>>0,C=new Uint8Array(w);b!==v;){for(var E=d[b],S=0,T=w-1;(E!==0||S<g)&&T!==-1;T--,S++)E+=256*C[T]>>>0,C[T]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");g=S,b++}for(var I=w-g;I!==w&&C[I]===0;)I++;for(var O=c.repeat(y);I<w;++I)O+=t.charAt(C[I]);return O}function h(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var y=0;if(d[y]!==" "){for(var g=0,b=0;d[y]===c;)g++,y++;for(var v=(d.length-y)*u+1>>>0,w=new Uint8Array(v);d[y];){var C=r[d.charCodeAt(y)];if(C===255)return;for(var E=0,S=v-1;(C!==0||E<b)&&S!==-1;S--,E++)C+=a*w[S]>>>0,w[S]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");b=E,y++}if(d[y]!==" "){for(var T=v-b;T!==v&&w[T]===0;)T++;for(var I=new Uint8Array(g+(v-T)),O=g;T!==v;)I[O++]=w[T++];return I}}}function p(d){var y=h(d);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:h,decode:p}}var Kb=Mb,Vb=Kb,Il=Vb;var vA=new Uint8Array(0);var kl=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Bt=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Ll=t=>new TextEncoder().encode(t),Nl=t=>new TextDecoder().decode(t);var Ic=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},kc=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ol(this,e)}},Lc=class{constructor(e){this.decoders=e}or(e){return Ol(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Ol=(t,e)=>new Lc({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Nc=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ic(e,r,n),this.decoder=new kc(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},zn=({name:t,prefix:e,encode:r,decode:n})=>new Nc(t,e,r,n),qr=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=Il(r,e);return zn({prefix:t,name:e,encode:n,decode:s=>Bt(i(s))})},qb=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=i[t[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Hb=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},Re=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>zn({prefix:e,name:t,encode(i){return Hb(i,n,r)},decode(i){return qb(i,n,r,t)}});var Fe=qr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zb=qr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Oc={};Ze(Oc,{base32:()=>Mt,base32hex:()=>$b,base32hexpad:()=>Yb,base32hexpadupper:()=>Jb,base32hexupper:()=>Xb,base32pad:()=>Wb,base32padupper:()=>jb,base32upper:()=>Gb,base32z:()=>Zb});var Mt=Re({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gb=Re({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wb=Re({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jb=Re({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$b=Re({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xb=Re({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yb=Re({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Jb=Re({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zb=Re({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Pc={};Ze(Pc,{base64:()=>Gn,base64pad:()=>Qb,base64url:()=>em,base64urlpad:()=>tm});var Gn=Re({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qb=Re({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),em=Re({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tm=Re({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});It.default.formatters.b=t=>t==null?"undefined":Fe.baseEncode(t);It.default.formatters.t=t=>t==null?"undefined":Mt.baseEncode(t);It.default.formatters.m=t=>t==null?"undefined":Gn.baseEncode(t);It.default.formatters.p=t=>t==null?"undefined":t.toString();It.default.formatters.c=t=>t==null?"undefined":t.toString();It.default.formatters.k=t=>t==null?"undefined":t.toString();function rm(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function lt(t){let e=rm(`${t}:trace`);return It.default.enabled(`${t}:trace`)&&It.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=(0,It.default)(`${t}:trace`)),Object.assign((0,It.default)(t),{error:(0,It.default)(`${t}:error`),trace:e})}var nm=Fl,Pl=128,im=127,sm=~im,om=Math.pow(2,31);function Fl(t,e,r){e=e||[],r=r||0;for(var n=r;t>=om;)e[r++]=t&255|Pl,t/=128;for(;t&sm;)e[r++]=t&255|Pl,t>>>=7;return e[r]=t|0,Fl.bytes=r-n+1,e}var am=Uc,cm=128,Ul=127;function Uc(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Uc.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&Ul)<<i:(o&Ul)*Math.pow(2,i),i+=7}while(o>=cm);return Uc.bytes=s-n,r}var um=Math.pow(2,7),fm=Math.pow(2,14),lm=Math.pow(2,21),hm=Math.pow(2,28),dm=Math.pow(2,35),pm=Math.pow(2,42),ym=Math.pow(2,49),gm=Math.pow(2,56),bm=Math.pow(2,63),mm=function(t){return t<um?1:t<fm?2:t<lm?3:t<hm?4:t<dm?5:t<pm?6:t<ym?7:t<gm?8:t<bm?9:10},xm={encode:nm,decode:am,encodingLength:mm},wm=xm,zi=wm;var Gi=(t,e=0)=>[zi.decode(t,e),zi.decode.bytes],Wn=(t,e,r=0)=>(zi.encode(t,e,r),e),jn=t=>zi.encodingLength(t);var er=(t,e)=>{let r=e.byteLength,n=jn(t),i=n+jn(r),s=new Uint8Array(i+r);return Wn(t,s,0),Wn(r,s,n),s.set(e,i),new $n(t,r,e,s)},un=t=>{let e=Bt(t),[r,n]=Gi(e),[i,s]=Gi(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new $n(r,i,o,e)},Ml=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&kl(t.bytes,r.bytes)}},$n=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Kl=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return Em(r,Fc(t),e||Fe.encoder);default:return Sm(r,Fc(t),e||Mt.encoder)}};var Vl=new WeakMap,Fc=t=>{let e=Vl.get(t);if(e==null){let r=new Map;return Vl.set(t,r),r}return e},xe=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Wi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==_m)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return xe.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=er(e,r);return xe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return xe.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&Ml(e.multihash,n.multihash)}toString(e){return Kl(this,e)}toJSON(){return{"/":Kl(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof xe)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:s,bytes:o}=r;return new xe(n,i,s,o||ql(n,i,s.bytes))}else if(r[Am]===!0){let{version:n,multihash:i,code:s}=r,o=un(i);return xe.create(n,s,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Wi)throw new Error(`Version 0 CID must use dag-pb (code: ${Wi}) block encoding`);return new xe(e,r,n,n.bytes)}case 1:{let i=ql(e,r,n.bytes);return new xe(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return xe.create(0,Wi,e)}static createV1(e,r){return xe.create(1,e,r)}static decode(e){let[r,n]=xe.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=xe.inspectBytes(e),n=r.size-r.multihashSize,i=Bt(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new $n(r.multihashCode,r.digestSize,s,i);return[r.version===0?xe.createV0(o):xe.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[l,h]=Gi(e.subarray(r));return r+=h,l},i=n(),s=Wi;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),c=n(),u=r+c,f=u-o;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,i]=vm(e,r),s=xe.decode(i);if(s.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Fc(s).set(n,e),s}},vm=(t,e)=>{switch(t[0]){case"Q":{let r=e||Fe;return[Fe.prefix,r.decode(`${Fe.prefix}${t}`)]}case Fe.prefix:{let r=e||Fe;return[Fe.prefix,r.decode(t)]}case Mt.prefix:{let r=e||Mt;return[Mt.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Em=(t,e,r)=>{let{prefix:n}=r;if(n!==Fe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},Sm=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},Wi=112,_m=18,ql=(t,e,r)=>{let n=jn(t),i=n+jn(e),s=new Uint8Array(i+r.byteLength);return Wn(t,s,0),Wn(e,s,n),s.set(r,i),s},Am=Symbol.for("@ipld/js-cid/CID");var Mc={};Ze(Mc,{identity:()=>Cm});var Cm=zn({prefix:"\0",name:"identity",encode:t=>Nl(t),decode:t=>Ll(t)});var Kc={};Ze(Kc,{base2:()=>Dm});var Dm=Re({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Vc={};Ze(Vc,{base8:()=>Tm});var Tm=Re({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var qc={};Ze(qc,{base10:()=>Bm});var Bm=qr({prefix:"9",name:"base10",alphabet:"0123456789"});var Hc={};Ze(Hc,{base16:()=>Im,base16upper:()=>km});var Im=Re({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),km=Re({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var zc={};Ze(zc,{base36:()=>Lm,base36upper:()=>Nm});var Lm=qr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Nm=qr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Gc={};Ze(Gc,{base256emoji:()=>Fm});var Hl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Rm=Hl.reduce((t,e,r)=>(t[r]=e,t),[]),Om=Hl.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Pm(t){return t.reduce((e,r)=>(e+=Rm[r],e),"")}function Um(t){let e=[];for(let r of t){let n=Om[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var Fm=zn({prefix:"\u{1F680}",name:"base256emoji",encode:Pm,decode:Um});var Xc={};Ze(Xc,{sha256:()=>et,sha512:()=>Mm});var $c=G(Ge("crypto"),1);var jc=({name:t,code:e,encode:r})=>new Wc(t,e,r),Wc=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?er(this.code,r):r.then(n=>er(this.code,n))}else throw Error("Unknown type, must be binary type")}};var et=jc({name:"sha2-256",code:18,encode:t=>Bt($c.default.createHash("sha256").update(t).digest())}),Mm=jc({name:"sha2-512",code:19,encode:t=>Bt($c.default.createHash("sha512").update(t).digest())});var Yc={};Ze(Yc,{identity:()=>Hr});var Gl=0,Km="identity",Wl=Bt,Vm=t=>er(Gl,Wl(t)),Hr={code:Gl,name:Km,encode:Wl,digest:Vm};var ZA=new TextEncoder,QA=new TextDecoder;var tr={...Mc,...Kc,...Vc,...qc,...Hc,...Oc,...zc,...Rc,...Pc,...Gc},iC={...Xc,...Yc};function qe(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var jl=Symbol.for("@libp2p/peer-id");var zm=Symbol.for("nodejs.util.inspect.custom"),$l=Object.values(tr).map(t=>t.decoder).reduce((t,e)=>t.or(e),tr.identity.decoder),Xl=114,Jc=36,Zc=37,ji=class{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[jl](){return!0}toString(){return this.string==null&&(this.string=Fe.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return xe.createV1(Xl,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return qe(this.multihash.bytes,e);if(typeof e=="string")return $i(e).equals(this);if(e?.multihash?.bytes!=null)return qe(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[zm](){return`PeerId(${this.toString()})`}},Xn=class extends ji{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}},Yn=class extends ji{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}},Jn=class extends ji{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}};function $i(t,e){if(e=e??$l,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=un(Fe.decode(`z${t}`));return t.startsWith("12D")?new Yn({multihash:r}):t.startsWith("16U")?new Jn({multihash:r}):new Xn({multihash:r})}return Gm($l.decode(t))}function Gm(t){try{let e=un(t);if(e.code===Hr.code){if(e.digest.length===Jc)return new Yn({multihash:e});if(e.digest.length===Zc)return new Jn({multihash:e})}if(e.code===et.code)return new Xn({multihash:e})}catch{return Wm(xe.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function Wm(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==Xl)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===et.code)return new Xn({multihash:t.multihash});if(e.code===Hr.code){if(e.digest.length===Jc)return new Yn({multihash:t.multihash});if(e.digest.length===Zc)return new Jn({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Qc(t,e){return t.length===Jc?new Yn({multihash:er(Hr.code,t),privateKey:e}):t.length===Zc?new Jn({multihash:er(Hr.code,t),privateKey:e}):new Xn({multihash:await et.digest(t),publicKey:t,privateKey:e})}var zr=Ge("node:net");function to(t){return!!(0,zr.isIP)(t)}function Gr(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function _r(t=0){return globalThis.Buffer?.alloc!=null?Gr(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function mt(t=0){return globalThis.Buffer?.allocUnsafe!=null?Gr(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Jl(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Yl=Jl("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),eu=Jl("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=mt(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),$m={utf8:Yl,"utf-8":Yl,hex:tr.base16,latin1:eu,ascii:eu,binary:eu,...tr},ro=$m;function $(t,e="utf8"){let r=ro[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Zl=zr.isIPv4,Xm=zr.isIPv6,tu=function(t){let e=0;if(t=t.toString().trim(),Zl(t)){let r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(Xm(t)){let r=t.split(":",8),n;for(n=0;n<r.length;n++){let s=Zl(r[n]),o;s&&(o=tu(r[n]),r[n]=$(o.slice(0,2),"base16")),o!=null&&++n<8&&r.splice(n,0,$(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let i=new Uint8Array(e+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);i[e++]=s>>8&255,i[e++]=s&255}return i}throw new Error("invalid ip address")},Ql=function(t,e=0,r){e=~~e,r=r??t.length-e;let n=new DataView(t.buffer);if(r===4){let i=[];for(let s=0;s<r;s++)i.push(t[e+s]);return i.join(".")}if(r===16){let i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(e+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Xi={},ru={},Jm=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];Jm.forEach(t=>{let e=Zm(...t);ru[e.code]=e,Xi[e.name]=e});function Zm(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function pe(t){if(typeof t=="number"){if(ru[t]!=null)return ru[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Xi[t]!=null)return Xi[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var rr=G(no(),1);function Ae(t,e="utf8"){let r=ro[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Gr(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function ye(t,e){e==null&&(e=t.reduce((i,s)=>i+s.length,0));let r=mt(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Gr(r)}var io=class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){let r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let s=0,o=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*i)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let h=Number.parseInt(l,e);if(!Number.isNaN(h))return h});if(f===void 0)break;if(s*=e,s+=f,s>u||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!n&&c&&o>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let r=0;r<e.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){let e=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let o=this.readSeparator(":",n,()=>this.readIPv4Addr());if(o!==void 0)return r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],[i+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),o=16-(n+2),[a]=e(s.subarray(0,o));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var VC=new io;var XC=parseInt("0xFFFF",16),YC=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var BD=pe("ip4"),ID=pe("ip6"),kD=pe("ipcidr");function yh(t,e){switch(pe(t).code){case 4:case 41:return mx(e);case 42:return dh(e);case 6:case 273:case 33:case 132:return bh(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return dh(e);case 421:return Ex(e);case 444:return ph(e);case 445:return ph(e);case 466:return vx(e);default:return $(e,"base16")}}function gh(t,e){switch(pe(t).code){case 4:return lh(e);case 41:return lh(e);case 42:return hh(e);case 6:case 273:case 33:case 132:return ou(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return hh(e);case 421:return xx(e);case 444:return Sx(e);case 445:return _x(e);case 466:return wx(e);default:return Ae(e,"base16")}}var su=Object.values(tr).map(t=>t.decoder),bx=function(){let t=su[0].or(su[1]);return su.slice(2).forEach(e=>t=t.or(e)),t}();function lh(t){if(!to(t))throw new Error("invalid ip address");return tu(t)}function mx(t){let e=Ql(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!to(e))throw new Error("invalid ip address");return e}function ou(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function bh(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function hh(t){let e=Ae(t),r=Uint8Array.from(rr.default.encode(e.length));return ye([r,e],r.length+e.length)}function dh(t){let e=rr.default.decode(t);if(t=t.slice(rr.default.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return $(t)}function xx(t){let e;t[0]==="Q"||t[0]==="1"?e=un(Fe.decode(`z${t}`)).bytes:e=xe.parse(t).multihash.bytes;let r=Uint8Array.from(rr.default.encode(e.length));return ye([r,e],r.length+e.length)}function wx(t){let e=bx.decode(t),r=Uint8Array.from(rr.default.encode(e.length));return ye([r,e],r.length+e.length)}function vx(t){let e=rr.default.decode(t),r=t.slice(rr.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+$(r,"base64url")}function Ex(t){let e=rr.default.decode(t),r=t.slice(rr.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return $(r,"base58btc")}function Sx(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let r=Mt.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ou(n);return ye([r,i],r.length+i.length)}function _x(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let r=Mt.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ou(n);return ye([r,i],r.length+i.length)}function ph(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=$(e,"base32"),i=bh(r);return`${n}:${i}`}var Zn=G(no(),1);function Ax(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],s=pe(i);if(s.size===0){e.push([i]);continue}if(n++,n>=r.length)throw xh("invalid address: "+t);if(s.path===!0){e.push([i,lu(r.slice(n).join("/"))]);break}e.push([i,r[n]])}return e}function Cx(t){let e=[];return t.map(r=>{let n=ao(r);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),lu(e.join("/"))}function Dx(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=ao(e);return e.length>1?[r.code,gh(r.code,e[1])]:[r.code]})}function au(t){return t.map(e=>{let r=ao(e);return e[1]!=null?[r.code,yh(r.code,e[1])]:[r.code]})}function cu(t){return oo(ye(t.map(e=>{let r=ao(e),n=Uint8Array.from(Zn.default.encode(r.code));return e.length>1&&e[1]!=null&&(n=ye([n,e[1]])),n})))}function uu(t,e){return t.size>0?t.size/8:t.size===0?0:Zn.default.decode(e)+(Zn.default.decode.bytes??0)}function so(t){let e=[],r=0;for(;r<t.length;){let n=Zn.default.decode(t,r),i=Zn.default.decode.bytes??0,s=pe(n),o=uu(s,t.slice(r+i));if(o===0){e.push([n]),r+=i;continue}let a=t.slice(r+i,r+i+o);if(r+=o+i,r>t.length)throw xh("Invalid address Uint8Array: "+$(t,"base16"));e.push([n,a])}return e}function fu(t){let e=so(t),r=au(e);return Cx(r)}function Tx(t){t=lu(t);let e=Ax(t),r=Dx(e);return cu(r)}function mh(t){return Tx(t)}function oo(t){let e=Bx(t);if(e!=null)throw e;return Uint8Array.from(t)}function Bx(t){try{so(t)}catch(e){return e}}function lu(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function xh(t){return new Error("Error parsing address: "+t)}function ao(t){return pe(t[0])}var hu=G(no(),1);var Ar=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ei=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Yi,Ji,Zi,Wr,wh,kx=Symbol.for("nodejs.util.inspect.custom"),Lx=[pe("dns").code,pe("dns4").code,pe("dns6").code,pe("dnsaddr").code],Nx=new Map,vh=Symbol.for("@multiformats/js-multiaddr/multiaddr");function Rx(t){return!!t?.[vh]}var Cr=class{constructor(e){if(Yi.set(this,void 0),Ji.set(this,void 0),Zi.set(this,void 0),Wr.set(this,void 0),this[wh]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=oo(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=mh(e)}else if(Rx(e))this.bytes=oo(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return Ar(this,Yi,"f")==null&&ei(this,Yi,fu(this.bytes),"f"),Ar(this,Yi,"f")}toJSON(){return this.toString()}toOptions(){let e,r,n,i,s="",o=pe("tcp"),a=pe("udp"),c=pe("ip4"),u=pe("ip6"),f=pe("dns6"),l=pe("ip6zone");for(let[p,d]of this.stringTuples())p===l.code&&(s=`%${d??""}`),Lx.includes(p)&&(r=o.name,i=443,n=`${d??""}${s}`,e=p===f.code?6:4),(p===o.code||p===a.code)&&(r=pe(p).name,i=parseInt(d??"")),(p===c.code||p===u.code)&&(r=pe(p).name,n=`${d??""}${s}`,e=p===u.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},pe(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let i=hu.default.decode(r,n),s=hu.default.decode.bytes??0,o=pe(i),a=uu(o,r.slice(n+s));n+=a+s,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return Ar(this,Ji,"f")==null&&ei(this,Ji,so(this.bytes),"f"),Ar(this,Ji,"f")}stringTuples(){return Ar(this,Zi,"f")==null&&ei(this,Zi,au(this.tuples()),"f"),Ar(this,Zi,"f")}encapsulate(e){return e=new Cr(e),new Cr(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Cr(n.slice(0,i))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new Cr(cu(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Xi.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?$(Fe.decode(`z${n}`),"base58btc"):$(xe.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){if(Ar(this,Wr,"f")===void 0)try{ei(this,Wr,this.stringTuples().filter(e=>pe(e[0]).path===!0)[0][1],"f"),Ar(this,Wr,"f")==null&&ei(this,Wr,null,"f")}catch{ei(this,Wr,null,"f")}return Ar(this,Wr,"f")}equals(e){return qe(this.bytes,e.bytes)}async resolve(e){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=Nx.get(r.name);if(n==null)throw new ee(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(s=>new Cr(s))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(Yi=new WeakMap,Ji=new WeakMap,Zi=new WeakMap,Wr=new WeakMap,wh=vh,kx)](){return`Multiaddr(${fu(this.bytes)})`}};function Qn(t){return new Cr(t)}var kt;(function(t){t.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",t.ERR_DATA_CHANNEL="ERR_DATA_CHANNEL",t.ERR_CONNECTION_CLOSED="ERR_CONNECTION_CLOSED",t.ERR_HASH_NOT_SUPPORTED="ERR_HASH_NOT_SUPPORTED",t.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",t.ERR_INVALID_FINGERPRINT="ERR_INVALID_FINGERPRINT",t.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",t.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",t.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",t.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"})(kt||(kt={}));var jr=class extends ee{constructor(e,r){super(`WebRTC transport error: ${e}`,r??""),this.name="WebRTCTransportError"}};var du=class extends jr{constructor(e,r){super(`[stream: ${e}] data channel error: ${r}`,kt.ERR_DATA_CHANNEL),this.name="WebRTC/DataChannelError"}};function xu(t,e){return new du(t,e)}var pu=class extends jr{constructor(e){super(`There was a problem with the Multiaddr which was passed in: ${e}`,kt.ERR_INVALID_MULTIADDR),this.name="WebRTC/InappropriateMultiaddrError"}};function ti(t){return new pu(t)}var yu=class extends jr{constructor(e){super(`There was a problem with a provided argument: ${e}`,kt.ERR_INVALID_PARAMETERS),this.name="WebRTC/InvalidArgumentError"}};function Qi(t){return new yu(t)}var gu=class extends jr{constructor(e,r){super(`Invalid fingerprint "${e}" within ${r}`,kt.ERR_INVALID_FINGERPRINT),this.name="WebRTC/InvalidFingerprintError"}};function wu(t,e){return new gu(t,e)}var bu=class extends jr{constructor(e){super(`A method (${e}) was called though it has been intentionally left unimplemented.`,kt.ERR_NOT_IMPLEMENTED),this.name="WebRTC/UnimplementedError"}};function Eh(t){return new bu(t)}var mu=class extends jr{constructor(e){super(`unsupported hash algorithm: ${e}`,kt.ERR_HASH_NOT_SUPPORTED),this.name="WebRTC/UnsupportedHashAlgorithmError"}};function Sh(t){return new mu(t)}var co=async function*(){},uo=async t=>{},_h=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ah=t=>[...Array(t)].map(()=>_h.at(Math.floor(Math.random()*_h.length))).join("");var Ch=lt("libp2p:webrtc:connection"),ln=class{peerConnection;remoteAddr;timeline;metrics;source=co();sink=uo;constructor(e){this.remoteAddr=e.remoteAddr,this.timeline=e.timeline,this.peerConnection=e.peerConnection}async close(e){e!==void 0&&Ch.error("error closing connection",e),Ch.trace("closing connection"),this.timeline.close=Date.now(),this.peerConnection.close(),this.metrics?.increment({close:!0})}};var es=class extends Error{constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function Dh(t){if(t!=null){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}function Th(t,e,r){let n=r??{},i=Dh(t);async function*s(){let o,a=()=>{o?.()};for(e.addEventListener("abort",a);;){let c;try{if(e.aborted){let{abortMessage:f,abortCode:l}=n;throw new es(f,l)}let u=new Promise((f,l)=>{o=()=>{let{abortMessage:h,abortCode:p}=n;l(new es(h,p))}});c=await Promise.race([u,i.next()]),o=null}catch(u){e.removeEventListener("abort",a);let f=u.type==="aborted"&&e.aborted;if(f&&n.onAbort!=null&&await n.onAbort(t),typeof i.return=="function")try{let l=i.return();l instanceof Promise&&l.catch(h=>{n.onReturnError!=null&&n.onReturnError(h)})}catch(l){n.onReturnError!=null&&n.onReturnError(l)}if(f&&n.returnOnAbort===!0)return;throw u}if(c.done===!0)break;yield c.value}e.removeEventListener("abort",a)}return s()}function Ox(t,e,r){return n=>t(Th(n,e,r))}function vu(t,e,r){return{sink:Ox(t.sink,e,{...r,onAbort:void 0}),source:Th(t.source,e,r)}}var Ih=Symbol.for("@achingbrain/uint8arraylist");function Bh(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(let n of t){let i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function fo(t){return!!t?.[Ih]}var me=class{constructor(...e){Object.defineProperty(this,Ih,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(let n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(fo(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(let n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(fo(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){let r=Bh(this.bufs,e);return r.buf[r.index]}set(e,r){let n=Bh(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(fo(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){let{bufs:n,length:i}=this._subList(e,r);return ye(n,i)}subarray(e,r){let{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:ye(n,i)}sublist(e,r){let{bufs:n,length:i}=this._subList(e,r),s=new me;return s.length=i,s.bufs=n,s}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let s=0;s<this.bufs.length;s++){let o=this.bufs[s],a=i,c=a+o.byteLength;if(i=c,e>=c)continue;let u=e>=a&&e<c,f=r>a&&r<=c;if(u&&f){if(e===a&&r===c){n.push(o);break}let l=e-a;n.push(o.subarray(l,l+(r-e)));break}if(u){if(e===0){n.push(o);continue}n.push(o.subarray(e-a));continue}if(f){if(r===c){n.push(o);break}n.push(o.subarray(0,r-a));break}n.push(o)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!fo(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let s=256,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=-1;for(let l=0;l<i;l++)o[n[l]]=l;let a=o,c=this.byteLength-n.byteLength,u=n.byteLength-1,f;for(let l=r;l<=c;l+=f){f=0;for(let h=u;h>=0;h--){let p=this.get(l+h);if(n[h]!==p){f=Math.max(1,h-a[p]);break}}if(f===0)return l}return-1}getInt8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){let n=mt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){let i=_r(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){let i=_r(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){let i=_r(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){let n=mt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){let i=_r(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){let i=_r(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){let i=_r(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){let i=_r(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){let i=_r(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof me)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!qe(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){let n=new me;return n.bufs=e,r==null&&(r=e.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}};function lo(t){return t instanceof Uint8Array?{get(e){return t[e]},set(e,r){t[e]=r}}:{get(e){return t.get(e)},set(e,r){t.set(e,r)}}}var kh=4294967296,_t=class{constructor(e=0,r=0){this.hi=e,this.lo=r}toBigInt(e){if(e===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(e){return Number(this.toBigInt(e))}zzDecode(){let e=-(this.lo&1),r=((this.lo>>>1|this.hi<<31)^e)>>>0,n=(this.hi>>>1^e)>>>0;return new _t(n,r)}zzEncode(){let e=this.hi>>31,r=((this.hi<<1|this.lo>>>31)^e)>>>0,n=(this.lo<<1^e)>>>0;return new _t(r,n)}toBytes(e,r=0){let n=lo(e);for(;this.hi>0;)n.set(r++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(r++,this.lo&127|128),this.lo=this.lo>>>7;n.set(r++,this.lo)}static fromBigInt(e){if(e===0n)return new _t;let r=e<0;r&&(e=-e);let n=Number(e>>32n)|0,i=Number(e-(BigInt(n)<<32n))|0;return r&&(n=~n>>>0,i=~i>>>0,++i>kh&&(i=0,++n>kh&&(n=0))),new _t(n,i)}static fromNumber(e){if(e===0)return new _t;let r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new _t(i,n)}static fromBytes(e,r=0){let n=lo(e),i=new _t,s=0;if(e.length-r>4){for(;s<4;++s)if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i;if(i.lo=(i.lo|(n.get(r)&127)<<28)>>>0,i.hi=(i.hi|(n.get(r)&127)>>4)>>>0,n.get(r++)<128)return i;s=0}else for(;s<4;++s){if(r>=e.length)throw RangeError(`index out of range: ${r} > ${e.length}`);if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i}if(e.length-r>4){for(;s<5;++s)if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}else if(r<e.byteLength)for(;s<5;++s){if(r>=e.length)throw RangeError(`index out of range: ${r} > ${e.length}`);if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}throw RangeError("invalid varint encoding")}};var Px=Math.pow(2,7),Ux=Math.pow(2,14),Fx=Math.pow(2,21),Mx=Math.pow(2,28),Kx=Math.pow(2,35),Vx=Math.pow(2,42),qx=Math.pow(2,49),Hx=Math.pow(2,56),zx=Math.pow(2,63),Ne={encodingLength(t){return t<Px?1:t<Ux?2:t<Fx?3:t<Mx?4:t<Kx?5:t<Vx?6:t<qx?7:t<Hx?8:t<zx?9:10},encode(t,e,r=0){if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return e==null&&(e=mt(Ne.encodingLength(t))),_t.fromNumber(t).toBytes(e,r),e},decode(t,e=0){return _t.fromBytes(t,e).toNumber(!0)}};function ho(t){return t[Symbol.asyncIterator]!=null}var po=t=>{let e=Ne.encodingLength(t),r=mt(e);return Ne.encode(t,r),po.bytes=e,r};po.bytes=0;function yo(t,e){e=e??{};let r=e.lengthEncoder??po;function*n(i){let s=r(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}return ho(t)?async function*(){for await(let i of t)yield*n(i)}():function*(){for(let i of t)yield*n(i)}()}yo.single=(t,e)=>{e=e??{};let r=e.lengthEncoder??po;return new me(r(t.byteLength),t)};var ni=G(ri(),1);var Wx=8,jx=1024*1024*4,hn;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(hn||(hn={}));var Su=t=>{let e=Ne.decode(t);return Su.bytes=Ne.encodingLength(e),e};Su.bytes=0;function Eu(t,e){let r=new me,n=hn.LENGTH,i=-1,s=e?.lengthDecoder??Su,o=e?.maxLengthLength??Wx,a=e?.maxDataLength??jx;function*c(){for(;r.byteLength>0;){if(n===hn.LENGTH)try{if(i=s(r),i<0)throw(0,ni.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw(0,ni.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let u=s.bytes;r.consume(u),e?.onLength!=null&&e.onLength(i),n=hn.DATA}catch(u){if(u instanceof RangeError){if(r.byteLength>o)throw(0,ni.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw u}if(n===hn.DATA){if(r.byteLength<i)break;let u=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(u),yield u,n=hn.LENGTH}}}return ho(t)?async function*(){for await(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,ni.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,ni.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}Eu.fromReader=(t,e)=>{let r=1,n=async function*(){for(;;)try{let{done:s,value:o}=await t.next(r);if(s===!0)return;o!=null&&(yield o)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return Eu(n,{...e??{},onLength:s=>{r=s}})};var go=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},ii=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new go(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new go(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function xt(t={}){return Xx(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function Xx(t,e){e=e??{};let r=e.onEnd,n=new ii,i,s,o,a=async()=>n.isEmpty()?o?{done:!0}:await new Promise((y,g)=>{s=b=>{s=null,n.push(b);try{y(t(n))}catch(v){g(v)}return i}}):t(n),c=y=>s!=null?s(y):(n.push(y),i),u=y=>(n=new ii,s!=null?s({error:y}):(n.push({error:y}),i)),f=y=>{if(o)return i;if(e?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:y})},l=y=>o?i:(o=!0,y!=null?u(y):c({done:!0})),h=()=>(n=new ii,l(),{done:!0}),p=y=>(l(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:h,throw:p,push:f,end:l,get readableLength(){return n.size}},r==null)return i;let d=i;return i={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(y){return d.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return d.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(y){return d.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return d.readableLength}},i}var bo=G(ri(),1),Rh=t=>Ne.decode(t);Rh.bytes=0;function _u(t,e){let r=xt();t.sink(r).catch(o=>{r.end(o)}),t.sink=async o=>{for await(let a of o)r.push(a);r.end()};let n=t.source;t.source[Symbol.iterator]!=null?n=t.source[Symbol.iterator]():t.source[Symbol.asyncIterator]!=null&&(n=t.source[Symbol.asyncIterator]());let i=new me,s={read:async o=>{if(o==null){let{done:c,value:u}=await n.next();return c===!0?new me:u}for(;i.byteLength<o;){let{value:c,done:u}=await n.next();if(u===!0)throw(0,bo.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");i.append(c)}let a=i.sublist(0,o);return i.consume(o),a},readLP:async()=>{let o=-1,a=new me,c=e?.lengthDecoder??Rh;for(;;){a.append(await s.read(1));try{o=c(a)}catch(u){if(u instanceof RangeError)continue;throw u}if(o>-1)break;if(e?.maxLengthLength!=null&&a.byteLength>e.maxLengthLength)throw(0,bo.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG")}if(e?.maxDataLength!=null&&o>e.maxDataLength)throw(0,bo.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");return await s.read(o)},readPB:async o=>{let a=await s.readLP();if(a==null)throw new Error("Value is null");let c=a instanceof Uint8Array?a:a.subarray();return o.decode(c)},write:o=>{o instanceof Uint8Array?r.push(o):r.push(o.subarray())},writeLP:o=>{s.write(yo.single(o,e))},writePB:(o,a)=>{s.writeLP(a.encode(o))},pb:o=>({read:async()=>await s.readPB(o),write:a=>{s.writePB(a,o)},unwrap:()=>s}),unwrap:()=>{let o=t.source;return t.source=async function*(){yield*i,yield*o}(),t}};return s}function nr(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}function Oh(t){return globalThis?.Buffer?.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}var mo=t=>{let e=Ne.encodingLength(t),r=Oh(e);return Ne.encode(t,r),mo.bytes=e,r};mo.bytes=0;function ts(t){t=t??{};let e=t.lengthEncoder??mo;return async function*(n){for await(let i of n){let s=e(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}}}ts.single=(t,e)=>{e=e??{};let r=e.lengthEncoder??mo;return new me(r(t.byteLength),t)};var rs=G(ri(),1),Yx=8,Jx=1024*1024*4,dn;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(dn||(dn={}));var Au=t=>{let e=Ne.decode(t);return Au.bytes=Ne.encodingLength(e),e};Au.bytes=0;function pn(t){return async function*(r){let n=new me,i=dn.LENGTH,s=-1,o=t?.lengthDecoder??Au,a=t?.maxLengthLength??Yx,c=t?.maxDataLength??Jx;for await(let u of r)for(n.append(u);n.byteLength>0;){if(i===dn.LENGTH)try{if(s=o(n),s<0)throw(0,rs.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(s>c)throw(0,rs.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let f=o.bytes;n.consume(f),t?.onLength!=null&&t.onLength(s),i=dn.DATA}catch(f){if(f instanceof RangeError){if(n.byteLength>a)throw(0,rs.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw f}if(i===dn.DATA){if(n.byteLength<s)break;let f=n.sublist(0,s);n.consume(s),t?.onData!=null&&t.onData(f),yield f,i=dn.LENGTH}}if(n.byteLength>0)throw(0,rs.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}}pn.fromReader=(t,e)=>{let r=1,n=async function*(){for(;;)try{let{done:s,value:o}=await t.next(r);if(s===!0)return;o!=null&&(yield o)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return pn({...e??{},onLength:s=>{r=s}})(n)};function Qx(t){return t[Symbol.asyncIterator]!=null}function ew(...t){let e=[];for(let r of t)Qx(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=xt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var xo=ew;function Ph(t,...e){if(t==null)throw new Error("Empty pipeline");if(Cu(t)){let n=t;t=()=>n.source}else if(Fh(t)||Uh(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&Cu(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)Cu(r[n])&&(r[n]=rw(r[n]));return tw(...r)}var tw=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},Uh=t=>t?.[Symbol.asyncIterator]!=null,Fh=t=>t?.[Symbol.iterator]!=null,Cu=t=>t==null?!1:t.sink!=null&&t.source!=null,rw=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=xt({objectMode:!0});r.then(()=>{n.end()},o=>{n.end(o)});let i,s=t.source;if(Uh(s))i=async function*(){yield*s,n.end()};else if(Fh(s))i=function*(){yield*s,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return xo(n,i())}return t.source};var Zu=G(pi(),1),Qu=G(pi(),1),yd=G(pi(),1),gd=G(pi(),1),bd=G(pi(),1),ht;(function(t){t[t.FIN=0]="FIN",t[t.STOP_SENDING=1]="STOP_SENDING",t[t.RESET=2]="RESET"})(ht||(ht={}));var ef=class extends bd.MessageType{constructor(){super("webrtc.pb.Message",[{no:1,name:"flag",kind:"enum",opt:!0,T:()=>["webrtc.pb.Message.Flag",ht]},{no:2,name:"message",kind:"scalar",opt:!0,T:12}])}create(e){let r={};return globalThis.Object.defineProperty(r,gd.MESSAGE_TYPE,{enumerable:!1,value:this}),e!==void 0&&(0,yd.reflectionMergePartial)(this,r,e),r}internalBinaryRead(e,r,n,i){let s=i??this.create(),o=e.pos+r;for(;e.pos<o;){let[a,c]=e.tag();switch(a){case 1:s.flag=e.int32();break;case 2:s.message=e.bytes();break;default:let u=n.readUnknownField;if(u==="throw")throw new globalThis.Error(`Unknown field ${a} (wire type ${c}) for ${this.typeName}`);let f=e.skip(c);u!==!1&&(u===!0?Qu.UnknownFieldHandler.onRead:u)(this.typeName,s,a,c,f)}}return s}internalBinaryWrite(e,r,n){e.flag!==void 0&&r.tag(1,Zu.WireType.Varint).int32(e.flag),e.message!==void 0&&r.tag(2,Zu.WireType.LengthDelimited).bytes(e.message);let i=n.writeUnknownFields;return i!==!1&&(i==!0?Qu.UnknownFieldHandler.onWrite:i)(this.typeName,e,r),r}},Jo=new ef;var tf=lt("libp2p:webrtc:stream");var Y;(function(t){t[t.OPEN=0]="OPEN",t[t.READ_CLOSED=1]="READ_CLOSED",t[t.WRITE_CLOSED=2]="WRITE_CLOSED",t[t.CLOSED=3]="CLOSED"})(Y||(Y={}));function Zo(t){throw new Error("Case not handled in switch")}var rf=class{state=Y.OPEN;isWriteClosed(){return this.state===Y.CLOSED||this.state===Y.WRITE_CLOSED}transition({direction:e,flag:r}){let n=this.state;if(this.state===Y.CLOSED)return[n,Y.CLOSED];if(e==="inbound")switch(r){case ht.FIN:this.state===Y.OPEN?this.state=Y.READ_CLOSED:this.state===Y.WRITE_CLOSED&&(this.state=Y.CLOSED);break;case ht.STOP_SENDING:this.state===Y.OPEN?this.state=Y.WRITE_CLOSED:this.state===Y.READ_CLOSED&&(this.state=Y.CLOSED);break;case ht.RESET:this.state=Y.CLOSED;break;default:Zo(r)}else switch(r){case ht.FIN:this.state===Y.OPEN?this.state=Y.WRITE_CLOSED:this.state===Y.READ_CLOSED&&(this.state=Y.CLOSED);break;case ht.STOP_SENDING:this.state===Y.OPEN?this.state=Y.READ_CLOSED:this.state===Y.WRITE_CLOSED&&(this.state=Y.CLOSED);break;case ht.RESET:this.state=Y.CLOSED;break;default:Zo(r)}return[n,this.state]}},Ht=class{id;stat;metadata;channel;streamState=new rf;_src;_innersrc=xt();opened=nr();_sinkCalled=!1;closeWritePromise=nr();closeCb;constructor(e){switch(this.channel=e.channel,this.channel.binaryType="arraybuffer",this.id=this.channel.label,this.stat=e.stat,this.channel.readyState){case"open":this.opened.resolve();break;case"closed":case"closing":this.streamState.state=Y.CLOSED,(this.stat.timeline.close===void 0||this.stat.timeline.close===0)&&(this.stat.timeline.close=new Date().getTime()),this.opened.resolve();break;case"connecting":break;default:Zo(this.channel.readyState)}this.metadata=e.metadata??{},this.channel.onopen=n=>{this.stat.timeline.open=new Date().getTime(),this.opened.resolve()},this.channel.onclose=n=>{this.close()},this.channel.onerror=n=>{let i=n.error;this.abort(i)};let r=this;this.channel.onmessage=async({data:n})=>{n===null||n.length===0||this._innersrc.push(new Uint8Array(n))},this._src=Ph(this._innersrc,pn(),n=>async function*(){for await(let i of n){let s=r.processIncomingProtobuf(i.subarray());s!=null&&(yield new me(s))}}())}set source(e){}get source(){return this._src}async sink(e){if(this._sinkCalled)throw new Error("sink already called on this stream");await this.opened.promise;try{await this._sink(e)}finally{this.closeWrite()}}async _sink(e){let r=this._closeWriteIterable();for await(let n of xo(r,e)){if(this.streamState.isWriteClosed())return;let i=Jo.toBinary({message:n.subarray()}),s=ts.single(i);this.channel.send(s.subarray())}}processIncomingProtobuf(e){let r=Jo.fromBinary(e);if(r.flag!==void 0){let[n,i]=this.streamState.transition({direction:"inbound",flag:r.flag});if(n!==i)switch(i){case Y.READ_CLOSED:this._innersrc.end();break;case Y.WRITE_CLOSED:this.closeWritePromise.resolve();break;case Y.CLOSED:this.close();break;case Y.OPEN:break;default:Zo(i)}}return r.message}close(){this.stat.timeline.close=new Date().getTime(),this.streamState.state=Y.CLOSED,this._innersrc.end(),this.closeWritePromise.resolve(),this.channel.close(),this.closeCb!==void 0&&this.closeCb(this)}closeRead(){let[e,r]=this.streamState.transition({direction:"outbound",flag:ht.STOP_SENDING});e!==r&&((e===Y.OPEN||e===Y.WRITE_CLOSED)&&(this._sendFlag(ht.STOP_SENDING),this._innersrc.end()),r===Y.CLOSED&&this.close())}closeWrite(){let[e,r]=this.streamState.transition({direction:"outbound",flag:ht.FIN});e!==r&&((e===Y.OPEN||e===Y.READ_CLOSED)&&(this._sendFlag(ht.FIN),this.closeWritePromise.resolve()),r===Y.CLOSED&&this.close())}abort(e){tf.error(`An error occurred, closing the stream for reading and writing: ${e.message}`),this.close()}reset(){let[e,r]=this.streamState.transition({direction:"outbound",flag:ht.RESET});e!==r&&(this._sendFlag(ht.RESET),this.close())}_sendFlag(e){try{tf.trace("Sending flag: %s",e.toString());let r=Jo.toBinary({flag:e});this.channel.send(ts.single(r).subarray())}catch(r){r instanceof Error&&tf.error(`Exception while sending flag ${e}: ${r.message}`)}}_closeWriteIterable(){let e=this;return{async*[Symbol.asyncIterator](){await e.closeWritePromise.promise,yield new Uint8Array(0)}}}eq(e){return e instanceof Ht?e.channel.id===this.channel.id:!1}};var bn=class{protocol;peerConnection;streamBuffer=[];metrics;constructor(e,r,n="/webrtc"){this.protocol=n,this.peerConnection=e,this.peerConnection.ondatachannel=({channel:i})=>{let s=new Ht({channel:i,stat:{direction:"inbound",timeline:{open:0}},closeCb:o=>{this.streamBuffer=this.streamBuffer.filter(a=>!o.eq(a))}});this.streamBuffer.push(s)},this.metrics=r}createStreamMuxer(e){return new nf(this.peerConnection,this.streamBuffer,this.protocol,e,this.metrics)}},nf=class{protocol;peerConnection;metrics;streams=[];init;close=()=>{};source=co();sink=uo;constructor(e,r,n="/webrtc",i,s){this.protocol=n,this.init=i,this.peerConnection=e,this.peerConnection.ondatachannel=({channel:a})=>{let c=new Ht({channel:a,stat:{direction:"inbound",timeline:{open:0}},closeCb:this.wrapStreamEnd(i?.onIncomingStream)});this.streams.push(c),i?.onIncomingStream!=null&&(this.metrics?.increment({incoming_stream:!0}),i.onIncomingStream(c))},this.streams=r.filter(a=>a.stat.timeline.close==null).map(a=>(a.closeCb=this.wrapStreamEnd(i?.onStreamEnd),a));let o=i?.onIncomingStream;o!=null&&this.streams.forEach(a=>{o(a)})}newStream(){let e=this.peerConnection.createDataChannel(""),r=i=>{this.metrics?.increment({stream_end:!0}),this.init?.onStreamEnd?.(i)},n=new Ht({channel:e,stat:{direction:"outbound",timeline:{open:0}},closeCb:this.wrapStreamEnd(r)});return this.streams.push(n),this.metrics?.increment({outgoing_stream:!0}),n}wrapStreamEnd(e){let r=this;return n=>{r.streams=r.streams.filter(i=>!(n instanceof Ht&&n.eq(i))),e?.(n)}}};var bf=G(uf(),1),ip=G(Yd(),1),sp=G(xn(),1),mf=G(gf(),1),op=G(np(),1);function Kv(){sp.default._configure(),bf.default._configure(ip.default),mf.default._configure(op.default)}Kv();var ap=["uint64","int64","sint64","fixed64","sfixed64"];function Vv(t){for(let e of ap){if(t[e]==null)continue;let r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}function xf(t){return Vv(new bf.default(t))}function qv(t){for(let e of ap){if(t[e]==null)continue;let r=t[e];t[e]=function(n){return r.call(this,n.toString())}}return t}function wf(){return qv(mf.default.create())}function Br(t,e){let r=xf(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function Ir(t,e){let r=wf();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var gi;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(gi||(gi={}));function na(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function ps(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(s,o){let a=e(s);o.int32(a)},n=function(s){let o=s.int32();return e(o)};return na("enum",gi.VARINT,r,n)}function kr(t,e){return na("message",gi.LENGTH_DELIMITED,t,e)}var Ct;(function(t){let e;(function(i){i.SDP_OFFER="SDP_OFFER",i.SDP_ANSWER="SDP_ANSWER",i.ICE_CANDIDATE="ICE_CANDIDATE"})(e=t.Type||(t.Type={}));let r;(function(i){i[i.SDP_OFFER=0]="SDP_OFFER",i[i.SDP_ANSWER=1]="SDP_ANSWER",i[i.ICE_CANDIDATE=2]="ICE_CANDIDATE"})(r||(r={})),function(i){i.codec=()=>ps(r)}(e=t.Type||(t.Type={}));let n;t.codec=()=>(n==null&&(n=kr((i,s,o={})=>{o.lengthDelimited!==!1&&s.fork(),i.type!=null&&(s.uint32(8),t.Type.codec().encode(i.type,s)),i.data!=null&&(s.uint32(18),s.string(i.data)),o.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{let o={},a=s==null?i.len:i.pos+s;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:o.type=t.Type.codec().decode(i);break;case 2:o.data=i.string();break;default:i.skipType(c&7);break}}return o})),n),t.encode=i=>Ir(i,t.codec()),t.decode=i=>Br(i,t.codec())})(Ct||(Ct={}));var Ep=G(wp(),1);var vp=(0,Ep.detect)(),sa=vp!=null&&vp.name==="firefox",ia=lt("libp2p:webrtc:peer:util"),Ef=async(t,e,r)=>{for(;;){let n=await Promise.race([t.promise,r.read()]);if(n instanceof Object){let i=n;if(i.type!==Ct.Type.ICE_CANDIDATE)throw new Error("expected only ice candidates");if(i.data==null||i.data===""){ia.trace("end-of-candidates received");break}ia.trace("received new ICE candidate: %s",i.data);try{await e.addIceCandidate(new RTCIceCandidate(JSON.parse(i.data)))}catch(s){throw ia.error("bad candidate received: ",s),new Error("bad candidate received")}}else break}await t.promise};function Sf(t,e){t[sa?"oniceconnectionstatechange":"onconnectionstatechange"]=r=>{switch(ia.trace("receiver peerConnectionState state: ",t.connectionState),sa?t.iceConnectionState:t.connectionState){case"connected":e.resolve();break;case"failed":case"disconnected":case"closed":e.reject();break;default:break}}}var Xv=30*1e3,bi=lt("libp2p:webrtc:peer");async function Sp({rtcConfiguration:t,stream:e}){let r=AbortSignal.timeout(Xv),n=_u(vu(e,r)).pb(Ct),i=new RTCPeerConnection(t),s=new bn(i),o=nr(),a=nr();r.onabort=()=>{o.reject()},i.onicecandidate=({candidate:l})=>{a.promise.then(()=>{n.write({type:Ct.Type.ICE_CANDIDATE,data:l!=null?JSON.stringify(l.toJSON()):""})},h=>{bi.error("cannot set candidate since sending answer failed",h)})},Sf(i,o);let c=await n.read();if(c.type!==Ct.Type.SDP_OFFER)throw new Error(`expected message type SDP_OFFER, received: ${c.type??"undefined"} `);let u=new RTCSessionDescription({type:"offer",sdp:c.data});await i.setRemoteDescription(u).catch(l=>{throw bi.error("could not execute setRemoteDescription",l),new Error("Failed to set remoteDescription")});let f=await i.createAnswer().catch(l=>{throw bi.error("could not execute createAnswer",l),a.reject(l),new Error("Failed to create answer")});return n.write({type:Ct.Type.SDP_ANSWER,data:f.sdp}),await i.setLocalDescription(f).catch(l=>{throw bi.error("could not execute setLocalDescription",l),a.reject(l),new Error("Failed to set localDescription")}),a.resolve(),await Ef(o,i,n),[i,s]}async function _p({rtcConfiguration:t,signal:e,stream:r}){let n=_u(vu(r,e)).pb(Ct),i=new RTCPeerConnection(t),s=new bn(i),o=nr();Sf(i,o),e.onabort=o.reject;let a=i.createDataChannel("init");i.onicecandidate=({candidate:l})=>{n.write({type:Ct.Type.ICE_CANDIDATE,data:l!=null?JSON.stringify(l.toJSON()):""})};let c=await i.createOffer();n.write({type:Ct.Type.SDP_OFFER,data:c.sdp}),await i.setLocalDescription(c).catch(l=>{throw bi.error("could not execute setLocalDescription",l),new Error("Failed to set localDescription")});let u=await n.read();if(u.type!==Ct.Type.SDP_ANSWER)throw new Error("remote should send an SDP answer");let f=new RTCSessionDescription({type:"answer",sdp:u.data});return await i.setRemoteDescription(f).catch(l=>{throw bi.error("could not execute setRemoteDescription",l),new Error("Failed to set remoteDescription")}),await Ef(o,i,n),a.close(),[i,s]}var oa=class extends EventTarget{#e=new Map;listenerCount(e){let r=this.#e.get(e);return r==null?0:r.length}addEventListener(e,r,n){super.addEventListener(e,r,n);let i=this.#e.get(e);i==null&&(i=[],this.#e.set(e,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(e,r,n){super.removeEventListener(e.toString(),r??null,n);let i=this.#e.get(e);i!=null&&(i=i.filter(({callback:s})=>s!==r),this.#e.set(e,i))}dispatchEvent(e){let r=super.dispatchEvent(e),n=this.#e.get(e.type);return n==null||(n=n.filter(({once:i})=>!i),this.#e.set(e.type,n)),r}safeDispatchEvent(e,r){return this.dispatchEvent(new Yv(e,r))}},_f=class extends Event{detail;constructor(e,r){super(e,r),this.detail=r?.detail}},Yv=globalThis.CustomEvent??_f;var aa=class extends oa{opts;constructor(e){super(),this.opts=e}getBaseAddress(e){let r=e.toString().split(ys);if(r.length<2)throw ti("base address not found");return Qn(r[0])}listeningAddrs=[];async listen(e){let r=this.getBaseAddress(e),i=this.opts.transportManager.transportForMultiaddr(r)?.createListener({...this.opts});await i?.listen(r);let s=e.encapsulate(`/p2p/${this.opts.peerId.toString()}`);this.listeningAddrs.push(s),i?.addEventListener("close",()=>{this.listeningAddrs=this.listeningAddrs.filter(o=>o!==s)})}getAddrs(){return this.listeningAddrs}async close(){}};var Ap=lt("libp2p:webrtc:peer"),ys="/webrtc",Af="/webrtc-signaling/0.0.1",Jv=pe("webrtc").code,ca=class{components;init;_started=!1;constructor(e,r){this.components=e,this.init=r}isStarted(){return this._started}async start(){await this.components.registrar.handle(Af,e=>{this._onProtocol(e).catch(r=>{Ap.error("failed to handle incoming connect from %p",e.connection.remotePeer,r)})}),this._started=!0}async stop(){await this.components.registrar.unhandle(Af),this._started=!1}createListener(e){return new aa(this.components)}[Symbol.toStringTag]="@libp2p/webrtc";[Xs]=!0;filter(e){return e.filter(r=>r.protoCodes().includes(Jv))}splitAddr(e){let r=e.toString().split(`${ys}/`);if(r.length!==2)throw new ee("invalid multiaddr",kt.ERR_INVALID_MULTIADDR);let n=Qn(r[0]),s=Qn("/"+r[1]).getPeerId();if(s==null)throw new ee("bad destination",kt.ERR_INVALID_MULTIADDR);let o=n.protos().pop();if(o===void 0)throw new ee("invalid multiaddr",kt.ERR_INVALID_MULTIADDR);return o.name!=="p2p"&&(n=n.encapsulate(`/p2p/${s}`)),{baseAddr:n,peerId:$i(s)}}async dial(e,r){Ap.trace("dialing address: ",e);let{baseAddr:n,peerId:i}=this.splitAddr(e);if(r.signal==null){let a=new AbortController;r.signal=a.signal}let o=await(await this.components.transportManager.dial(n)).newStream([Af],r);try{let[a,c]=await _p({stream:o,rtcConfiguration:this.init.rtcConfiguration,signal:r.signal}),u=n.encapsulate(`${ys}/p2p/${i.toString()}`),f=await r.upgrader.upgradeOutbound(new ln({peerConnection:a,timeline:{open:Date.now()},remoteAddr:u}),{skipProtection:!0,skipEncryption:!0,muxerFactory:c});return o.close(),f}catch(a){throw o.reset(),a}}async _onProtocol({connection:e,stream:r}){try{let[n,i]=await Sp({rtcConfiguration:this.init.rtcConfiguration,connection:e,stream:r}),s=e.remoteAddr.getPeerId(),o=e.remoteAddr.encapsulate(`${ys}/p2p/${s}`);await this.components.upgrader.upgradeInbound(new ln({peerConnection:n,timeline:{open:new Date().getTime()},remoteAddr:o}),{skipEncryption:!0,skipProtection:!0,muxerFactory:i})}catch(n){throw r.reset(),n}}};function ua(t){return t[Symbol.asyncIterator]!=null}var fa=t=>{let e=Ne.encodingLength(t),r=mt(e);return Ne.encode(t,r),fa.bytes=e,r};fa.bytes=0;function la(t,e){e=e??{};let r=e.lengthEncoder??fa;function*n(i){let s=r(i.byteLength);s instanceof Uint8Array?yield s:yield*s,i instanceof Uint8Array?yield i:yield*i}return ua(t)?async function*(){for await(let i of t)yield*n(i)}():function*(){for(let i of t)yield*n(i)}()}la.single=(t,e)=>{e=e??{};let r=e.lengthEncoder??fa;return new me(r(t.byteLength),t)};var mi=G(ri(),1);var Zv=8,Qv=1024*1024*4,vn;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(vn||(vn={}));var Df=t=>{let e=Ne.decode(t);return Df.bytes=Ne.encodingLength(e),e};Df.bytes=0;function Cf(t,e){let r=new me,n=vn.LENGTH,i=-1,s=e?.lengthDecoder??Df,o=e?.maxLengthLength??Zv,a=e?.maxDataLength??Qv;function*c(){for(;r.byteLength>0;){if(n===vn.LENGTH)try{if(i=s(r),i<0)throw(0,mi.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw(0,mi.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let u=s.bytes;r.consume(u),e?.onLength!=null&&e.onLength(i),n=vn.DATA}catch(u){if(u instanceof RangeError){if(r.byteLength>o)throw(0,mi.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw u}if(n===vn.DATA){if(r.byteLength<i)break;let u=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(u),yield u,n=vn.LENGTH}}}return ua(t)?async function*(){for await(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,mi.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,mi.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}Cf.fromReader=(t,e)=>{let r=1,n=async function*(){for(;;)try{let{done:s,value:o}=await t.next(r);if(s===!0)return;o!=null&&(yield o)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}();return Cf(n,{...e??{},onLength:s=>{r=s}})};var ha=G(ri(),1),Cp=t=>Ne.decode(t);Cp.bytes=0;function Tf(t,e={}){let r=xt();t.sink(r).catch(o=>{r.end(o)}),t.sink=async o=>{for await(let a of o)r.push(a)};let n=t.source;t.source[Symbol.iterator]!=null?n=t.source[Symbol.iterator]():t.source[Symbol.asyncIterator]!=null&&(n=t.source[Symbol.asyncIterator]());let i=new me,s={read:async o=>{if(o==null){let{done:c,value:u}=await n.next();return c===!0?new me:u}for(;i.byteLength<o;){let{value:c,done:u}=await n.next();if(u===!0)throw(0,ha.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");i.append(c)}let a=i.sublist(0,o);return i.consume(o),a},readLP:async()=>{let o=-1,a=new me,c=e?.lengthDecoder??Cp;for(;;){a.append(await s.read(1));try{o=c(a)}catch(u){if(u instanceof RangeError)continue;throw u}if(o>-1)break;if(e?.maxLengthLength!=null&&a.byteLength>e.maxLengthLength)throw(0,ha.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG")}if(e?.maxDataLength!=null&&o>e.maxDataLength)throw(0,ha.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");return await s.read(o)},readPB:async o=>{let a=await s.readLP();if(a==null)throw new Error("Value is null");let c=a instanceof Uint8Array?a:a.subarray();return o.decode(c)},write:o=>{o instanceof Uint8Array?r.push(o):r.push(o.subarray())},writeLP:o=>{s.write(la.single(o,e))},writePB:(o,a)=>{s.writeLP(a.encode(o))},pb:o=>({read:async()=>await s.readPB(o),write:a=>{s.writePB(a,o)},unwrap:()=>s}),unwrap:()=>{let o=t.source;return t.source=async function*(){yield*i,yield*o}(),t}};return s}function Bf(){let t=nr(),e=!1;return{sink:async r=>{if(e)throw new Error("already piped");e=!0,t.resolve(r)},source:async function*(){yield*await t.promise}()}}function Dp(){let t=Bf(),e=Bf();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}async function*If(...t){let e=xt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async r=>{for await(let n of r)e.push(n)})),e.end()}catch(r){e.end(r)}}),yield*e}var t3=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},Tp=t=>t!=null&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),kf=t=>t!=null&&typeof t.sink=="function"&&Tp(t.source),r3=t=>e=>{let r=t.sink(e);if(r.then!=null){let n=xt({objectMode:!0});return r.then(()=>{n.end()},s=>{n.end(s)}),If(n,async function*(){yield*t.source,n.end()}())}return t.source};function Bp(t,...e){if(kf(t)){let n=t;t=()=>n.source}else if(Tp(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&kf(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)kf(r[n])&&(r[n]=r3(r[n]));return t3(...r)}var Ip=!!globalThis.process?.env?.DUMP_SESSION_KEYS;var fy=G(Up(),1),wi=G(ty(),1),Ca=G(ny(),1),$f=G(jf(),1),ly={hashSHA256(t){return(0,Ca.hash)(t)},getHKDF(t,e){let i=new fy.HKDF(Ca.SHA256,e,t).expand(96),s=i.subarray(0,32),o=i.subarray(32,64),a=i.subarray(64,96);return[s,o,a]},generateX25519KeyPair(){let t=wi.generateKeyPair();return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519KeyPairFromSeed(t){let e=wi.generateKeyPairFromSeed(t);return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519SharedKey(t,e){return wi.sharedKey(t,e)},chaCha20Poly1305Encrypt(t,e,r,n){return new $f.ChaCha20Poly1305(n).seal(e,t,r)},chaCha20Poly1305Decrypt(t,e,r,n,i){return new $f.ChaCha20Poly1305(n).open(e,t,r,i)}};var Xf=G(jf(),1);var lE=t=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t),vi=t=>{let e=lE(2);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(0,t,!1),e};vi.bytes=2;var vs=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof Uint8Array?new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1):t.getUint16(0)};vs.bytes=2;function hy(t){return ye([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)}function dy(t){return ye([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)}function py(t){return ye([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)}function yy(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.subarray(0,32),ciphertext:t.subarray(32,t.length),ns:new Uint8Array(0)}}function gy(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.subarray(0,32),ns:t.subarray(32,80),ciphertext:t.subarray(80,t.length)}}function by(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.subarray(0,48),ciphertext:t.subarray(48,t.length)}}function xy(t,e){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65519){let s=i+65519;s>n.length&&(s=n.length);let o=t.encrypt(n.subarray(i,s),t.session);e?.encryptedPackets.increment(),yield vi(o.byteLength),yield o}}}function wy(t,e){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65535){let s=i+65535;if(s>n.length&&(s=n.length),s-Xf.TAG_LENGTH<i)throw new Error("Invalid chunk");let o=n.subarray(i,s),a=n.subarray(i,s-Xf.TAG_LENGTH),{plaintext:c,valid:u}=t.decrypt(o,t.session,a);if(!u)throw e?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");e?.decryptedPackets.increment(),yield c}}}var En=class extends Error{constructor(e="Unexpected Peer"){super(e),this.code=En.code}static get code(){return"ERR_UNEXPECTED_PEER"}},Or=class extends Error{constructor(e="Invalid crypto exchange"){super(e),this.code=Or.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}};var hN=G(Cs(),1),dN=G(P1(),1);var E6=G(we(),1);var v0={};Ze(v0,{Ed25519PrivateKey:()=>kn,Ed25519PublicKey:()=>Bs,generateKeyPair:()=>V4,generateKeyPairFromSeed:()=>G1,unmarshalEd25519PrivateKey:()=>M4,unmarshalEd25519PublicKey:()=>K4});var Tn=G(Ge("crypto"),1),U1=Ge("util");var P4=(0,U1.promisify)(Tn.default.generateKeyPair),Bn=32,br=64,Ha=32,U4=64;function F1(t){let r=Tn.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",x:"",d:$(t,"base64url"),kty:"OKP"}}).export({format:"jwk"});if(r.x==null||r.x==="")throw new Error("Could not export JWK public key");return Ae(r.x,"base64url")}async function M1(){let t=await P4("ed25519",{publicKeyEncoding:{type:"spki",format:"jwk"},privateKeyEncoding:{type:"pkcs8",format:"jwk"}}),e=Ae(t.privateKey.d,"base64url"),r=Ae(t.privateKey.x,"base64url");return{privateKey:H1(e,r),publicKey:r}}async function K1(t){if(t.length!==Ha)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=F1(t);return{privateKey:H1(t,e),publicKey:e}}async function V1(t,e){if(!(t instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');let r,n;if(t.byteLength===br)r=t.subarray(0,32),n=t.subarray(32);else if(t.byteLength===Ha)r=t.subarray(0,32),n=F1(r);else throw new TypeError('"key" must be 64 or 32 bytes in length.');let i=Tn.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",d:$(r,"base64url"),x:$(n,"base64url"),kty:"OKP"}});return Tn.default.sign(null,e,i)}async function q1(t,e,r){if(t.byteLength!==Bn)throw new TypeError('"key" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');if(e.byteLength!==U4)throw new TypeError('"sig" must be 64 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"sig" must be a node.js Buffer, or Uint8Array.');let n=Tn.default.createPublicKey({format:"jwk",key:{crv:"Ed25519",x:$(t,"base64url"),kty:"OKP"}});return Tn.default.verify(null,r,n,e)}function H1(t,e){let r=new Uint8Array(br);for(let n=0;n<Ha;n++)r[n]=t[n],r[Ha+n]=e[n];return r}var In=G(Ge("crypto"),1);function x0(t){let e=t?.algorithm??"aes-128-gcm",r=t?.keyLength??16,n=t?.nonceLength??12,i=t?.digest??"sha256",s=t?.saltLength??16,o=t?.iterations??32767,a=t?.algorithmTagLength??16;async function c(p,d){let y=In.default.randomBytes(n),g=In.default.createCipheriv(e,d,y),b=ye([g.update(p),g.final()]);return ye([y,b,g.getAuthTag()])}async function u(p,d){let y=In.default.randomBytes(s);typeof d=="string"&&(d=Ae(d));let g=In.default.pbkdf2Sync(d,y,o,r,i);return ye([y,await c(Uint8Array.from(p),g)])}async function f(p,d){let y=p.subarray(0,n),g=p.subarray(n,p.length-a),b=p.subarray(g.length+n),v=In.default.createDecipheriv(e,d,y);return v.setAuthTag(b),ye([v.update(g),v.final()])}async function l(p,d){let y=p.subarray(0,s),g=p.subarray(s);typeof d=="string"&&(d=Ae(d));let b=In.default.pbkdf2Sync(d,y,o,r,i);return f(g,b)}return{encrypt:u,decrypt:l}}async function Ci(t,e){let n=await x0().encrypt(t,e);return Gn.encode(n)}var Le;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(Le||(Le={}));var w0;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(w0||(w0={}));(function(t){t.codec=()=>ps(w0)})(Le||(Le={}));var mr;(function(t){let e;t.codec=()=>(e==null&&(e=kr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Le.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=Le.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Ir(r,t.codec()),t.decode=r=>Br(r,t.codec())})(mr||(mr={}));var xr;(function(t){let e;t.codec=()=>(e==null&&(e=kr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Le.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=Le.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Ir(r,t.codec()),t.decode=r=>Br(r,t.codec())})(xr||(xr={}));var Bs=class{_key;constructor(e){this._key=Di(e,Bn)}async verify(e,r){return q1(this._key,r,e)}marshal(){return this._key}get bytes(){return mr.encode({Type:Le.Ed25519,Data:this.marshal()}).subarray()}equals(e){return qe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await et.digest(this.bytes);return e}},kn=class{_key;_publicKey;constructor(e,r){this._key=Di(e,br),this._publicKey=Di(r,Bn)}async sign(e){return V1(this._key,e)}get public(){return new Bs(this._publicKey)}marshal(){return this._key}get bytes(){return xr.encode({Type:Le.Ed25519,Data:this.marshal()}).subarray()}equals(e){return qe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await et.digest(this.bytes);return e}async id(){let e=Hr.digest(this.public.bytes);return Fe.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Ci(this.bytes,e);throw new ee(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function M4(t){if(t.length>br){t=Di(t,br+Bn);let n=t.subarray(0,br),i=t.subarray(br,t.length);return new kn(n,i)}t=Di(t,br);let e=t.subarray(0,br),r=t.subarray(Bn);return new kn(e,r)}function K4(t){return t=Di(t,Bn),new Bs(t)}async function V4(){let{privateKey:t,publicKey:e}=await M1();return new kn(t,e)}async function G1(t){let{privateKey:e,publicKey:r}=await K1(t);return new kn(e,r)}function Di(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new ee(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}var q4={"P-256":"prime256v1","P-384":"secp384r1","P-521":"secp521r1"},H4=Object.keys(q4),bL=H4.join(" / ");var k0={};Ze(k0,{RsaPrivateKey:()=>Ri,RsaPublicKey:()=>Ps,fromJwk:()=>g6,generateKeyPair:()=>b6,unmarshalRsaPrivateKey:()=>p6,unmarshalRsaPublicKey:()=>y6});var Os=G(we(),1);var QL=G(Y1(),1);var On=G(Ge("crypto"),1),hg=Ge("util");var W4=G(Ge("crypto"),1);var ie=BigInt(0),Te=BigInt(1),sn=BigInt(2),Ls=BigInt(3),J1=BigInt(8),Ue=Object.freeze({a:ie,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Te,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Z1=(t,e)=>(t+e/sn)/e,Ga={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){let{n:e}=Ue,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Te*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Z1(s*t,e),c=Z1(-n*t,e),u=R(t-a*r-c*i,e),f=R(-a*n-c*s,e),l=u>o,h=f>o;if(l&&(u=e-u),h&&(f=e-f),u>o||f>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:l,k1:u,k2neg:h,k2:f}}},$t=32,Ii=32,j4=32,Q1=$t+1,eg=2*$t+1;function tg(t){let{a:e,b:r}=Ue,n=R(t*t),i=R(n*t);return R(i+e*t+r)}var Wa=Ue.a===ie,Xa=class extends Error{constructor(e){super(e)}};function rg(t){if(!(t instanceof ae))throw new TypeError("JacobianPoint expected")}var ae=class{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof ge))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(ge.ZERO)?ae.ZERO:new ae(e.x,e.y,Te)}static toAffineBatch(e){let r=Z4(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return ae.toAffineBatch(e).map(ae.fromAffine)}equals(e){rg(e);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=e,c=R(i*i),u=R(a*a),f=R(r*u),l=R(s*c),h=R(R(n*a)*u),p=R(R(o*i)*c);return f===l&&h===p}negate(){return new ae(this.x,R(-this.y),this.z)}double(){let{x:e,y:r,z:n}=this,i=R(e*e),s=R(r*r),o=R(s*s),a=e+s,c=R(sn*(R(a*a)-i-o)),u=R(Ls*i),f=R(u*u),l=R(f-sn*c),h=R(u*(c-l)-J1*o),p=R(sn*r*n);return new ae(l,h,p)}add(e){rg(e);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=e;if(s===ie||o===ie)return this;if(r===ie||n===ie)return e;let c=R(i*i),u=R(a*a),f=R(r*u),l=R(s*c),h=R(R(n*a)*u),p=R(R(o*i)*c),d=R(l-f),y=R(p-h);if(d===ie)return y===ie?this.double():ae.ZERO;let g=R(d*d),b=R(d*g),v=R(f*g),w=R(y*y-b-sn*v),C=R(y*(v-w)-h*b),E=R(i*a*d);return new ae(w,C,E)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=ae.ZERO;if(typeof e=="bigint"&&e===ie)return r;let n=sg(e);if(n===Te)return this;if(!Wa){let l=r,h=this;for(;n>ie;)n&Te&&(l=l.add(h)),h=h.double(),n>>=Te;return l}let{k1neg:i,k1:s,k2neg:o,k2:a}=Ga.splitScalar(n),c=r,u=r,f=this;for(;s>ie||a>ie;)s&Te&&(c=c.add(f)),a&Te&&(u=u.add(f)),f=f.double(),s>>=Te,a>>=Te;return i&&(c=c.negate()),o&&(u=u.negate()),u=new ae(R(u.x*Ga.beta),u.y,u.z),c.add(u)}precomputeWindow(e){let r=Wa?128/e+1:256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals(ae.BASE)&&(r=ge.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&A0.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=ae.normalizeZ(i),A0.set(r,i)));let s=ae.ZERO,o=ae.BASE,a=1+(Wa?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<a;h++){let p=h*c,d=Number(e&u);e>>=l,d>c&&(d-=f,e+=Te);let y=p,g=p+Math.abs(d)-1,b=h%2!==0,v=d<0;d===0?o=o.add(ja(b,i[y])):s=s.add(ja(v,i[g]))}return{p:s,f:o}}multiply(e,r){let n=sg(e),i,s;if(Wa){let{k1neg:o,k1:a,k2neg:c,k2:u}=Ga.splitScalar(n),{p:f,f:l}=this.wNAF(a,r),{p:h,f:p}=this.wNAF(u,r);f=ja(o,f),h=ja(c,h),h=new ae(R(h.x*Ga.beta),h.y,h.z),i=f.add(h),s=l.add(p)}else{let{p:o,f:a}=this.wNAF(n,r);i=o,s=a}return ae.normalizeZ([i,s])[0]}toAffine(e){let{x:r,y:n,z:i}=this,s=this.equals(ae.ZERO);e==null&&(e=s?J1:Ni(i));let o=e,a=R(o*o),c=R(a*o),u=R(r*a),f=R(n*c),l=R(i*o);if(s)return ge.ZERO;if(l!==Te)throw new Error("invZ was invalid");return new ge(u,f)}};ae.BASE=new ae(Ue.Gx,Ue.Gy,Te);ae.ZERO=new ae(ie,Te,ie);function ja(t,e){let r=e.negate();return t?r:e}var A0=new WeakMap,ge=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,A0.delete(this)}hasEvenY(){return this.y%sn===ie}static fromCompressedHex(e){let r=e.length===32,n=on(r?e:e.subarray(1));if(!_0(n))throw new Error("Point is not on curve");let i=tg(n),s=J4(i),o=(s&Te)===Te;r?o&&(s=R(-s)):(e[0]&1)===1!==o&&(s=R(-s));let a=new ge(n,s);return a.assertValidity(),a}static fromUncompressedHex(e){let r=on(e.subarray(1,$t+1)),n=on(e.subarray($t+1,$t*2+1)),i=new ge(r,n);return i.assertValidity(),i}static fromHex(e){let r=Li(e),n=r.length,i=r[0];if(n===$t)return this.fromCompressedHex(r);if(n===Q1&&(i===2||i===3))return this.fromCompressedHex(r);if(n===eg&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Q1} compressed bytes or ${eg} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return ge.BASE.multiply(Ja(e))}static fromSignature(e,r,n){let{r:i,s}=og(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let o=T0(Li(e)),{n:a}=Ue,c=n===2||n===3?i+a:i,u=Ni(c,a),f=R(-o*u,a),l=R(s*u,a),h=n&1?"03":"02",p=ge.fromHex(h+Ti(c)),d=ge.BASE.multiplyAndAddUnsafe(p,f,l);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(e=!1){return Nn(this.toHex(e))}toHex(e=!1){let r=Ti(this.x);return e?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${Ti(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:n}=this;if(!_0(r)||!_0(n))throw new Error(e);let i=R(n*n),s=tg(r);if(R(i-s)!==ie)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ge(this.x,R(-this.y))}double(){return ae.fromAffine(this).double().toAffine()}add(e){return ae.fromAffine(this).add(ae.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ae.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,n){let i=ae.fromAffine(this),s=r===ie||r===Te||this!==ge.BASE?i.multiplyUnsafe(r):i.multiply(r),o=ae.fromAffine(e).multiplyUnsafe(n),a=s.add(o);return a.equals(ae.ZERO)?void 0:a.toAffine()}};ge.BASE=new ge(Ue.Gx,Ue.Gy);ge.ZERO=new ge(ie,ie);function ng(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function ig(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${ki(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:on(r),left:t.subarray(e+2)}}function $4(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${ki(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=ig(t.subarray(2)),{data:n,left:i}=ig(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${ki(i)}`);return{r:e,s:n}}var wr=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=e instanceof Uint8Array,n="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?ki(e):e;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new wr(Ya(i.slice(0,64)),Ya(i.slice(64,128)))}static fromDER(e){let r=e instanceof Uint8Array;if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=$4(r?e:Nn(e));return new wr(n,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!Rs(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Rs(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=Ue.n>>Te;return this.s>e}normalizeS(){return this.hasHighS()?new wr(this.r,R(-this.s,Ue.n)):this}toDERRawBytes(){return Nn(this.toDERHex())}toDERHex(){let e=ng(ks(this.s)),r=ng(ks(this.r)),n=e.length/2,i=r.length/2,s=ks(n),o=ks(i);return`30${ks(i+n+4)}02${o}${r}02${s}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Nn(this.toCompactHex())}toCompactHex(){return Ti(this.r)+Ti(this.s)}};function nn(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}var X4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ki(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=X4[t[r]];return e}var Y4=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Ti(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(ie<=t&&t<Y4))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function C0(t){let e=Nn(Ti(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function ks(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Ya(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Nn(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");e[r]=s}return e}function on(t){return Ya(ki(t))}function Li(t){return t instanceof Uint8Array?Uint8Array.from(t):Nn(t)}function sg(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Rs(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(t,e=Ue.P){let r=t%e;return r>=ie?r:e+r}function Pt(t,e){let{P:r}=Ue,n=t;for(;e-- >ie;)n*=n,n%=r;return n}function J4(t){let{P:e}=Ue,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=Pt(u,Ls)*u%e,l=Pt(f,Ls)*u%e,h=Pt(l,sn)*c%e,p=Pt(h,n)*h%e,d=Pt(p,i)*p%e,y=Pt(d,o)*d%e,g=Pt(y,a)*y%e,b=Pt(g,o)*d%e,v=Pt(b,Ls)*u%e,w=Pt(v,s)*p%e,C=Pt(w,r)*c%e,E=Pt(C,sn);if(E*E%e!==t)throw new Error("Cannot find square root");return E}function Ni(t,e=Ue.P){if(t===ie||e<=ie)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=R(t,e),n=e,i=ie,s=Te,o=Te,a=ie;for(;r!==ie;){let u=n/r,f=n%r,l=i-o*u,h=s-a*u;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==Te)throw new Error("invert: does not exist");return R(i,e)}function Z4(t,e=Ue.P){let r=new Array(t.length),n=t.reduce((s,o,a)=>o===ie?s:(r[a]=s,R(s*o,e)),Te),i=Ni(n,e);return t.reduceRight((s,o,a)=>o===ie?s:(r[a]=R(s*r[a],e),R(s*o,e)),i),r}function Q4(t){let e=t.length*8-Ii*8,r=on(t);return e>0?r>>BigInt(e):r}function T0(t,e=!1){let r=Q4(t);if(e)return r;let{n}=Ue;return r>=n?r-n:r}var Bi,Ns,D0=class{constructor(e,r){if(this.hashLen=e,this.qByteLen=r,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Xt.hmacSha256(this.k,...e)}hmacSync(...e){return Ns(this.k,...e)}checkSync(){if(typeof Ns!="function")throw new Xa("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return nn(...r)}generateSync(){this.checkSync(),this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return nn(...r)}};function Rs(t){return ie<t&&t<Ue.n}function _0(t){return ie<t&&t<Ue.P}function e6(t,e,r,n=!0){let{n:i}=Ue,s=T0(t,!0);if(!Rs(s))return;let o=Ni(s,i),a=ge.BASE.multiply(s),c=R(a.x,i);if(c===ie)return;let u=R(o*R(e+r*c,i),i);if(u===ie)return;let f=new wr(c,u),l=(a.x===f.r?0:2)|Number(a.y&Te);return n&&f.hasHighS()&&(f=f.normalizeS(),l^=1),{sig:f,recovery:l}}function Ja(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*Ii)throw new Error("Expected 32 bytes of private key");e=Ya(t)}else if(t instanceof Uint8Array){if(t.length!==Ii)throw new Error("Expected 32 bytes of private key");e=on(t)}else throw new TypeError("Expected valid private key");if(!Rs(e))throw new Error("Expected private key: 0 < key < n");return e}function t6(t){return t instanceof ge?(t.assertValidity(),t):ge.fromHex(t)}function og(t){if(t instanceof wr)return t.assertValidity(),t;try{return wr.fromDER(t)}catch{return wr.fromCompact(t)}}function B0(t,e=!1){return ge.fromPrivateKey(t).toRawBytes(e)}function ag(t){let e=t.length>$t?t.slice(0,$t):t;return on(e)}function r6(t){let e=ag(t),r=R(e,Ue.n);return cg(r<ie?e:r)}function cg(t){return C0(t)}function n6(t,e,r){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);let n=Li(t),i=Ja(e),s=[cg(i),r6(n)];if(r!=null){r===!0&&(r=Xt.randomBytes($t));let c=Li(r);if(c.length!==$t)throw new Error(`sign: Expected ${$t} bytes of extra data`);s.push(c)}let o=nn(...s),a=ag(n);return{seed:o,m:a,d:i}}function i6(t,e){let{sig:r,recovery:n}=t,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},e),o=i?r.toDERRawBytes():r.toCompactRawBytes();return s?[o,n]:o}async function ug(t,e,r={}){let{seed:n,m:i,d:s}=n6(t,e,r.extraEntropy),o=new D0(j4,Ii);await o.reseed(n);let a;for(;!(a=e6(await o.generate(),i,s,r.canonical));)await o.reseed();return i6(a,r)}var s6={strict:!0};function fg(t,e,r,n=s6){let i;try{i=og(t),e=Li(e)}catch{return!1}let{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;let a=T0(e),c;try{c=t6(r)}catch{return!1}let{n:u}=Ue,f=Ni(o,u),l=R(a*f,u),h=R(s*f,u),p=ge.BASE.multiplyAndAddUnsafe(c,l,h);return p?R(p.x,u)===s:!1}ge.BASE._setWindowSize(8);var Tt={node:W4,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var $a={},Xt={bytesToHex:ki,hexToBytes:Nn,concatBytes:nn,mod:R,invert:Ni,isValidPrivateKey(t){try{return Ja(t),!0}catch{return!1}},_bigintTo32Bytes:C0,_normalizePrivateKey:Ja,hashToPrivateKey:t=>{t=Li(t);let e=Ii+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=R(on(t),Ue.n-Te)+Te;return C0(r)},randomBytes:(t=32)=>{if(Tt.web)return Tt.web.getRandomValues(new Uint8Array(t));if(Tt.node){let{randomBytes:e}=Tt.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Xt.hashToPrivateKey(Xt.randomBytes(Ii+8)),precompute(t=8,e=ge.BASE){let r=e===ge.BASE?e:new ge(e.x,e.y);return r._setWindowSize(t),r.multiply(Ls),r},sha256:async(...t)=>{if(Tt.web){let e=await Tt.web.subtle.digest("SHA-256",nn(...t));return new Uint8Array(e)}else if(Tt.node){let{createHash:e}=Tt.node,r=e("sha256");return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Tt.web){let r=await Tt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=nn(...e),i=await Tt.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Tt.node){let{createHmac:r}=Tt.node,n=r("sha256",t);return e.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=$a[t];if(r===void 0){let n=await Xt.sha256(Uint8Array.from(t,i=>i.charCodeAt(0)));r=nn(n,n),$a[t]=r}return Xt.sha256(r,...e)},taggedHashSync:(t,...e)=>{if(typeof Bi!="function")throw new Xa("sha256Sync is undefined, you need to set it");let r=$a[t];if(r===void 0){let n=Bi(Uint8Array.from(t,i=>i.charCodeAt(0)));r=nn(n,n),$a[t]=r}return Bi(r,...e)},_JacobianPoint:ae};Object.defineProperties(Xt,{sha256Sync:{configurable:!1,get(){return Bi},set(t){Bi||(Bi=t)}},hmacSha256Sync:{configurable:!1,get(){return Ns},set(t){Ns||(Ns=t)}}});function Za(t){if(isNaN(t)||t<=0)throw new ee("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Xt.randomBytes(t)}var Rn={};Ze(Rn,{jwkToPkcs1:()=>u6,jwkToPkix:()=>l6,pkcs1ToJwk:()=>c6,pkixToJwk:()=>f6});var qL=G(Cs(),1),HL=G(m0(),1);var Mr=G(we(),1);var PL=G(Ve(),1),UL=G(Ka(),1),lg=G(we(),1);function Yt(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=ye([new Uint8Array(e-r.length),r])}return $(r,"base64url")}function Jt(t){let e=a6(t);return new lg.default.jsbn.BigInteger($(e,"base16"),16)}function a6(t,e){let r=Ae(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=ye([new Uint8Array(e-r.length),r])}return r}function c6(t){let e=Mr.default.asn1.fromDer($(t,"ascii")),r=Mr.default.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Yt(r.n),e:Yt(r.e),d:Yt(r.d),p:Yt(r.p),q:Yt(r.q),dp:Yt(r.dP),dq:Yt(r.dQ),qi:Yt(r.qInv),alg:"RS256"}}function u6(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new ee("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Mr.default.pki.privateKeyToAsn1({n:Jt(t.n),e:Jt(t.e),d:Jt(t.d),p:Jt(t.p),q:Jt(t.q),dP:Jt(t.dp),dQ:Jt(t.dq),qInv:Jt(t.qi)});return Ae(Mr.default.asn1.toDer(e).getBytes(),"ascii")}function f6(t){let e=Mr.default.asn1.fromDer($(t,"ascii")),r=Mr.default.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Yt(r.n),e:Yt(r.e)}}function l6(t){if(t.n==null||t.e==null)throw new ee("JWK was missing components","ERR_INVALID_PARAMETERS");let e=Mr.default.pki.publicKeyToAsn1({n:Jt(t.n),e:Jt(t.e)});return Ae(Mr.default.asn1.toDer(e).getBytes(),"ascii")}var h6=(0,hg.promisify)(On.default.generateKeyPair);async function dg(t){let e=await h6("rsa",{modulusLength:t,publicKeyEncoding:{type:"pkcs1",format:"jwk"},privateKeyEncoding:{type:"pkcs1",format:"jwk"}});return{privateKey:e.privateKey,publicKey:e.publicKey}}async function I0(t){if(t==null)throw new ee("Missing key parameter","ERR_MISSING_KEY");return{privateKey:t,publicKey:{kty:t.kty,n:t.n,e:t.e}}}async function pg(t,e){return On.default.createSign("RSA-SHA256").update(e).sign({format:"jwk",key:t})}async function yg(t,e,r){return On.default.createVerify("RSA-SHA256").update(r).verify({format:"jwk",key:t},e)}var gg=On.default.constants.RSA_PKCS1_PADDING;function bg(t,e){return On.default.publicEncrypt({format:"jwk",key:t,padding:gg},e)}function mg(t,e){return On.default.privateDecrypt({format:"jwk",key:t,padding:gg},e)}var Ps=class{_key;constructor(e){this._key=e}async verify(e,r){return yg(this._key,r,e)}marshal(){return Rn.jwkToPkix(this._key)}get bytes(){return mr.encode({Type:Le.RSA,Data:this.marshal()}).subarray()}encrypt(e){return bg(this._key,e)}equals(e){return qe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await et.digest(this.bytes);return e}},Ri=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Za(16)}async sign(e){return pg(this._key,e)}get public(){if(this._publicKey==null)throw new ee("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Ps(this._publicKey)}decrypt(e){return mg(this._key,e)}marshal(){return Rn.jwkToPkcs1(this._key)}get bytes(){return xr.encode({Type:Le.RSA,Data:this.marshal()}).subarray()}equals(e){return qe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await et.digest(this.bytes);return e}async id(){let e=await this.public.hash();return $(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new Os.default.util.ByteBuffer(this.marshal()),i=Os.default.asn1.fromDer(n),s=Os.default.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Os.default.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return Ci(this.bytes,e);throw new ee(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function p6(t){let e=Rn.pkcs1ToJwk(t),r=await I0(e);return new Ri(r.privateKey,r.publicKey)}function y6(t){let e=Rn.pkixToJwk(t);return new Ps(e)}async function g6(t){let e=await I0(t);return new Ri(e.privateKey,e.publicKey)}async function b6(t){let e=await dg(t);return new Ri(e.privateKey,e.publicKey)}var N0={};Ze(N0,{Secp256k1PrivateKey:()=>Fs,Secp256k1PublicKey:()=>Us,generateKeyPair:()=>v6,unmarshalSecp256k1PrivateKey:()=>x6,unmarshalSecp256k1PublicKey:()=>w6});function xg(){return Xt.randomPrivateKey()}async function wg(t,e){let{digest:r}=await et.digest(e);try{return await ug(r,t)}catch(n){throw new ee(String(n),"ERR_INVALID_INPUT")}}async function vg(t,e,r){try{let{digest:n}=await et.digest(r);return fg(e,n,t)}catch(n){throw new ee(String(n),"ERR_INVALID_INPUT")}}function Eg(t){return ge.fromHex(t).toRawBytes(!0)}function Sg(t){try{B0(t,!0)}catch(e){throw new ee(String(e),"ERR_INVALID_PRIVATE_KEY")}}function L0(t){try{ge.fromHex(t)}catch(e){throw new ee(String(e),"ERR_INVALID_PUBLIC_KEY")}}function _g(t){try{return B0(t,!0)}catch(e){throw new ee(String(e),"ERR_INVALID_PRIVATE_KEY")}}var Us=class{_key;constructor(e){L0(e),this._key=e}async verify(e,r){return vg(this._key,r,e)}marshal(){return Eg(this._key)}get bytes(){return mr.encode({Type:Le.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return qe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await et.digest(this.bytes);return e}},Fs=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??_g(e),Sg(this._key),L0(this._publicKey)}async sign(e){return wg(this._key,e)}get public(){return new Us(this._publicKey)}marshal(){return this._key}get bytes(){return xr.encode({Type:Le.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return qe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await et.digest(this.bytes);return e}async id(){let e=await this.public.hash();return $(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return Ci(this.bytes,e);throw new ee(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function x6(t){return new Fs(t)}function w6(t){return new Us(t)}async function v6(){let t=xg();return new Fs(t)}var Pn={rsa:k0,ed25519:v0,secp256k1:N0};function Ag(t){let e=Object.keys(Pn).join(" / ");return new ee(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Cg(t){let e=mr.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Le.RSA:return Pn.rsa.unmarshalRsaPublicKey(r);case Le.Ed25519:return Pn.ed25519.unmarshalEd25519PublicKey(r);case Le.Secp256k1:return Pn.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw Ag(e.Type??"RSA")}}async function Dg(t){let e=xr.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case Le.RSA:return Pn.rsa.unmarshalRsaPrivateKey(r);case Le.Ed25519:return Pn.ed25519.unmarshalEd25519PrivateKey(r);case Le.Secp256k1:return Pn.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw Ag(e.Type??"RSA")}}var Qa;(function(t){let e;t.codec=()=>(e==null&&(e=kr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.webtransportCerthashes!=null)for(let s of r.webtransportCerthashes)n.uint32(10),n.bytes(s);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={webtransportCerthashes:[]},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.webtransportCerthashes.push(r.bytes());break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Ir(r,t.codec()),t.decode=r=>Br(r,t.codec())})(Qa||(Qa={}));var Ms;(function(t){let e;t.codec=()=>(e==null&&(e=kr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.identityKey!=null&&r.identityKey.byteLength>0)&&(n.uint32(10),n.bytes(r.identityKey??new Uint8Array(0))),(i.writeDefaults===!0||r.identitySig!=null&&r.identitySig.byteLength>0)&&(n.uint32(18),n.bytes(r.identitySig??new Uint8Array(0))),r.extensions!=null&&(n.uint32(34),Qa.codec().encode(r.extensions,n,{writeDefaults:!1})),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.identityKey=r.bytes();break;case 2:i.identitySig=r.bytes();break;case 4:i.extensions=Qa.codec().decode(r,r.uint32());break;default:r.skipType(o&7);break}}return i})),e),t.encode=r=>Ir(r,t.codec()),t.decode=r=>Br(r,t.codec())})(Ms||(Ms={}));async function Tg(t,e,r){let n=await _6(t,Bg(e));if(t.publicKey==null)throw new Error("PublicKey was missing from local PeerId");return S6(t.publicKey,n,r)}function S6(t,e,r){return Ms.encode({identityKey:t,identitySig:e,extensions:r??{webtransportCerthashes:[]}}).subarray()}async function _6(t,e){if(t.privateKey==null)throw new Error("PrivateKey was missing from PeerId");return await(await Dg(t.privateKey)).sign(e)}async function R0(t){return await Qc(t.identityKey)}function O0(t){return Ms.decode(t)}function Bg(t){let e=Ae("noise-libp2p-static-key:");return ye([e,t],e.length+t.length)}async function P0(t,e,r){let n=await Qc(e.identityKey);if(!n.equals(r))throw new Error(`Payload identity key ${n.toString()} does not match expected remote peer ${r.toString()}`);let i=Bg(t);if(n.publicKey==null)throw new Error("PublicKey was missing from PeerId");if(e.identitySig==null)throw new Error("Signature was missing from message");if(!await Cg(n.publicKey).verify(i,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return n}function Ks(t){return!(!(t instanceof Uint8Array)||t.length!==32)}var Ye=lt("libp2p:noise");var Ut;Ip?Ut=Ye:Ut=Object.assign(()=>{},{enabled:!1,trace:()=>{},error:()=>{}});function Ig(t){Ut(`LOCAL_STATIC_PUBLIC_KEY ${$(t.publicKey,"hex")}`),Ut(`LOCAL_STATIC_PRIVATE_KEY ${$(t.privateKey,"hex")}`)}function U0(t){t?(Ut(`LOCAL_PUBLIC_EPHEMERAL_KEY ${$(t.publicKey,"hex")}`),Ut(`LOCAL_PRIVATE_EPHEMERAL_KEY ${$(t.privateKey,"hex")}`)):Ut("Missing local ephemeral keys.")}function kg(t){Ut(`REMOTE_STATIC_PUBLIC_KEY ${$(t,"hex")}`)}function F0(t){Ut(`REMOTE_EPHEMERAL_PUBLIC_KEY ${$(t,"hex")}`)}function Lg(t){t.cs1&&t.cs2?(Ut(`CIPHER_STATE_1 ${t.cs1.n.getUint64()} ${$(t.cs1.k,"hex")}`),Ut(`CIPHER_STATE_2 ${t.cs2.n.getUint64()} ${$(t.cs2.k,"hex")}`)):Ut("Missing cipher state.")}var A6="Cipherstate has reached maximum n, a new handshake must be performed",ec=class{constructor(e=0){this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>4294967295)throw new Error(A6)}};var tc=class{constructor(e){this.crypto=e}encryptWithAd(e,r,n){let i=this.encrypt(e.k,e.n,r,n);return e.n.increment(),i}decryptWithAd(e,r,n,i){let{plaintext:s,valid:o}=this.decrypt(e.k,e.n,r,n,i);return o&&e.n.increment(),{plaintext:s,valid:o}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){let r=this.createEmptyKey();return qe(r,e)}encrypt(e,r,n,i){return r.assertValue(),this.crypto.chaCha20Poly1305Encrypt(i,r.getBytes(),n,e)}encryptAndHash(e,r){let n;return this.hasKey(e.cs)?n=this.encryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,n),n}decrypt(e,r,n,i,s){r.assertValue();let o=this.crypto.chaCha20Poly1305Decrypt(i,r.getBytes(),n,e,s);return o?{plaintext:o,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,r){let n,i=!0;return this.hasKey(e.cs)?{plaintext:n,valid:i}=this.decryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,r),{plaintext:n,valid:i}}dh(e,r){try{let n=this.crypto.generateX25519SharedKey(e,r);return n.length===32?n:n.subarray(0,32)}catch(n){let i=n;return Ye.error(i),new Uint8Array(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){return this.crypto.hashSHA256(ye([e,r],e.length+r.length))}mixKey(e,r){let[n,i]=this.crypto.getHKDF(e.ck,r);e.cs=this.initializeKey(i),e.ck=n}initializeKey(e){return{k:e,n:new ec}}initializeSymmetric(e){let r=Ae(e,"utf-8"),n=this.hashProtocolName(r),i=n,s=this.createEmptyKey();return{cs:this.initializeKey(s),ck:i,h:n}}hashProtocolName(e){if(e.length<=32){let r=new Uint8Array(32);return r.set(e),r}else return this.getHash(e,new Uint8Array(0))}split(e){let[r,n]=this.crypto.getHKDF(e.ck,new Uint8Array(0)),i=this.initializeKey(r),s=this.initializeKey(n);return{cs1:i,cs2:s}}writeMessageRegular(e,r){let n=this.encryptWithAd(e,new Uint8Array(0),r),i=this.createEmptyKey(),s=new Uint8Array(0);return{ne:i,ns:s,ciphertext:n}}readMessageRegular(e,r){return this.decryptWithAd(e,new Uint8Array(0),r.ciphertext)}};var rc=class extends tc{initializeInitiator(e,r,n,i){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=new Uint8Array(32);return{ss:o,s:r,rs:n,psk:i,re:a}}initializeResponder(e,r,n,i){let s="Noise_XX_25519_ChaChaPoly_SHA256",o=this.initializeSymmetric(s);this.mixHash(o,e);let a=new Uint8Array(32);return{ss:o,s:r,rs:n,psk:i,re:a}}writeMessageA(e,r,n){let i=new Uint8Array(0);n!==void 0?e.e=n:e.e=this.crypto.generateX25519KeyPair();let s=e.e.publicKey;this.mixHash(e.ss,s);let o=this.encryptAndHash(e.ss,r);return{ne:s,ns:i,ciphertext:o}}writeMessageB(e,r){e.e=this.crypto.generateX25519KeyPair();let n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let i=e.s.publicKey,s=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,r);return{ne:n,ns:s,ciphertext:o}}writeMessageC(e,r){let n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r),a={ne:this.createEmptyKey(),ns:i,ciphertext:s},{cs1:c,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:u}}readMessageA(e,r){return Ks(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(Ks(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);i&&Ks(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:s,valid:i&&o}}readMessageC(e,r){let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);if(i&&Ks(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:s,valid:o}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:s,valid:i&&o,cs1:a,cs2:c}}initSession(e,r,n){let i=this.createEmptyKey(),s=new Uint8Array(32),o;return e?o=this.initializeInitiator(r,n,s,i):o=this.initializeResponder(r,n,s,i),{hs:o,i:e,mc:0}}sendMessage(e,r,n){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r,n);else if(e.mc===1)i=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:s,messageBuffer:o,cs1:a,cs2:c}=this.writeMessageC(e.hs,r);i=o,e.h=s,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let n=new Uint8Array(0),i=!1;if(e.mc===0)({plaintext:n,valid:i}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:n,valid:i}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:s,plaintext:o,valid:a,cs1:c,cs2:u}=this.readMessageC(e.hs,r);n=o,i=a,e.h=s,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:n,valid:i}}};var nc=class{constructor(e,r,n,i,s,o,a,c){this.remoteExtensions={webtransportCerthashes:[]},this.isInitiator=e,this.payload=r,this.prologue=n,this.staticKeypair=s,this.connection=o,a&&(this.remotePeer=a),this.xx=c??new rc(i),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(Ig(this.session.hs.s),this.isInitiator){Ye.trace("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(hy(e)),Ye.trace("Stage 0 - Initiator finished sending first message."),U0(this.session.hs.e)}else{Ye.trace("Stage 0 - Responder waiting to receive first message...");let e=yy((await this.connection.readLP()).subarray()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Or("xx handshake stage 0 validation fail");Ye.trace("Stage 0 - Responder received first message."),F0(this.session.hs.re)}}async exchange(){if(this.isInitiator){Ye.trace("Stage 1 - Initiator waiting to receive first message from responder...");let e=gy((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Or("xx handshake stage 1 validation fail");Ye.trace("Stage 1 - Initiator received the message."),F0(this.session.hs.re),kg(this.session.hs.rs),Ye.trace("Initiator going to check remote's signature...");try{let i=O0(r);this.remotePeer=this.remotePeer||await R0(i),await P0(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let s=i;throw new En(`Error occurred while verifying signed payload: ${s.message}`)}Ye.trace("All good with the signature!")}else{Ye.trace("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(dy(e)),Ye.trace("Stage 1 - Responder sent the second handshake message with signed payload."),U0(this.session.hs.e)}}async finish(){if(this.isInitiator){Ye.trace("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(py(e)),Ye.trace("Stage 2 - Initiator sent message with signed payload.")}else{Ye.trace("Stage 2 - Responder waiting for third handshake message...");let e=by((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Or("xx handshake stage 2 validation fail");Ye.trace("Stage 2 - Responder received the message, finished handshake.");try{let i=O0(r);this.remotePeer=this.remotePeer||await R0(i),await P0(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let s=i;throw new En(`Error occurred while verifying signed payload: ${s.message}`)}}Lg(this.session)}encrypt(e,r){let n=this.getCS(r);return this.xx.encryptWithAd(n,new Uint8Array(0),e)}decrypt(e,r,n){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,new Uint8Array(0),e,n)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Or("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}};function Ng(t){return{xxHandshakeSuccesses:t.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:t.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:t.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:t.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:t.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}var ic=class{constructor(e={}){this.protocol="/noise";let{staticNoiseKey:r,extensions:n,crypto:i,prologueBytes:s,metrics:o}=e;this.crypto=i??ly,this.extensions=n,this.metrics=o?Ng(o):void 0,r?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(r):this.staticKeys=this.crypto.generateX25519KeyPair(),this.prologue=s??new Uint8Array(0)}async secureOutbound(e,r,n){let i=Tf(r,{lengthEncoder:vi,lengthDecoder:vs,maxDataLength:65535}),s=await this.performHandshake({connection:i,isInitiator:!0,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,s),remoteExtensions:s.remoteExtensions,remotePeer:s.remotePeer}}async secureInbound(e,r,n){let i=Tf(r,{lengthEncoder:vi,lengthDecoder:vs,maxDataLength:65535}),s=await this.performHandshake({connection:i,isInitiator:!1,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,s),remotePeer:s.remotePeer,remoteExtensions:s.remoteExtensions}}async performHandshake(e){let r=await Tg(e.localPeer,this.staticKeys.publicKey,this.extensions);return await this.performXXHandshake(e,r)}async performXXHandshake(e,r){let{isInitiator:n,remotePeer:i,connection:s}=e,o=new nc(n,r,this.prologue,this.crypto,this.staticKeys,s,i);try{await o.propose(),await o.exchange(),await o.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){if(this.metrics?.xxHandshakeErrors.increment(),a instanceof Error)throw a.message=`Error occurred during XX handshake: ${a.message}`,a}return o}async createSecureConnection(e,r){let[n,i]=Dp(),s=e.unwrap();return await Bp(n,xy(r,this.metrics),s,pn({lengthDecoder:vs}),wy(r,this.metrics),n),i}};function Rg(t={}){return()=>new ic(t)}var ub=G(ll(),1);var sb=G(ll(),1);var hl=lt("libp2p:webrtc:sdp"),dl=Object.values(tr).map(t=>t.decoder).reduce((t,e)=>t.or(e));function ob(t){let e=t.getConfiguration().certificates?.at(0);if(e==null||e.getFingerprints==null){hl.trace("fetching fingerprint from local SDP");let n=t.localDescription;return n==null?void 0:Q_(n.sdp)}if(hl.trace("fetching fingerprint from local certificate"),e.getFingerprints().length===0)return;let r=e.getFingerprints()[0].value;if(r==null)throw wu("","no fingerprint on local certificate");return r}var Z_=/^a=fingerprint:(?:\w+-[0-9]+)\s(?<fingerprint>(:?[0-9a-fA-F]{2})+)$/m;function Q_(t){return t.match(Z_)?.groups?.fingerprint}function eA(t){for(let e of t.protoNames())if(e.startsWith("ip"))return e.toUpperCase();return hl("Warning: multiaddr does not appear to contain IP4 or IP6, defaulting to IP6",t),"IP6"}function _c(t){let r=t.stringTuples().filter(n=>n[0]===gl).map(n=>n[1])[0];if(r===void 0||r==="")throw ti(`Couldn't find a certhash component of multiaddr: ${t.toString()}`);return r}function pl(t){let e=dl.decode(t);return sb.decode(e)}function tA(t){let e=pl(_c(t)),r=yl(e.name),n=e.digest.reduce((s,o)=>s+o.toString(16).padStart(2,"0"),""),i=n.match(/.{1,2}/g);if(i==null)throw wu(n,t.toString());return[`${r.toUpperCase()} ${i.join(":").toUpperCase()}`,n]}function yl(t){switch(t){case"sha1":return"sha-1";case"sha2-256":return"sha-256";case"sha2-512":return"sha-512";default:throw Sh(t)}}function rA(t,e){let{host:r,port:n}=t.toOptions(),i=eA(t),[s]=tA(t);return`v=0
o=- 0 0 IN ${i} ${r}
s=-
c=IN ${i} ${r}
t=0 0
a=ice-lite
m=application ${n} UDP/DTLS/SCTP webrtc-datachannel
a=mid:0
a=setup:passive
a=ice-ufrag:${e}
a=ice-pwd:${e}
a=fingerprint:${s}
a=sctp-port:5000
a=max-message-size:100000
a=candidate:1467250027 1 UDP 1467250027 ${r} ${n} typ host\r
`}function ab(t,e){return{type:"answer",sdp:rA(t,e)}}function cb(t,e){if(t.sdp===void 0)throw Qi("Can't munge a missing SDP");return t.sdp=t.sdp.replace(/\na=ice-ufrag:[^\n]*\n/,`
a=ice-ufrag:`+e+`
`).replace(/\na=ice-pwd:[^\n]*\n/,`
a=ice-pwd:`+e+`
`),t}var Ac=lt("libp2p:webrtc:transport"),iA=1e4,sA=pe("webrtc-direct").code,gl=pe("certhash").code,Cc=class{metrics;components;constructor(e){this.components=e,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_dialer_events_total",{label:"event",help:"Total count of WebRTC dial events by type"})})}async dial(e,r){let n=await this._connect(e,r);return Ac(`dialing address - ${e.toString()}`),n}createListener(e){throw Eh("WebRTCTransport.createListener")}filter(e){return e.filter(oA)}[Symbol.toStringTag]="@libp2p/webrtc-direct";[Xs]=!0;async _connect(e,r){let n=new AbortController,i=n.signal,s=e.getPeerId();if(s===null)throw ti("we need to have the remote's PeerId");let o=$i(s),a=pl(_c(e)),c=await RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256",hash:yl(a.name)}),u=new RTCPeerConnection({certificates:[c]}),f=new Promise((I,O)=>{let F=u.createDataChannel("",{negotiated:!0,id:0}),z=setTimeout(()=>{let V=`Data channel was never opened: state: ${F.readyState}`;Ac.error(V),this.metrics?.dialerEvents.increment({open_error:!0}),O(xu("data",V))},iA);F.onopen=V=>{clearTimeout(z),I(F)},F.onerror=V=>{clearTimeout(z);let ce=`Error opening a data channel for handshaking: ${V.target?.toString()??"not specified"}`;Ac.error(ce),this.metrics?.dialerEvents.increment({unknown_error:!0}),O(xu("data",ce))}}),l="libp2p+webrtc+v1/"+Ah(32),h=await u.createOffer(),p=cb(h,l);await u.setLocalDescription(p);let d=ab(e,l);await u.setRemoteDescription(d);let y=await f,g=this.components.peerId,b=this.generateNoisePrologue(u,a.code,e),v=Rg({prologueBytes:b})(),w=new Ht({channel:y,stat:{direction:"inbound",timeline:{open:1}}}),C={...w,sink:w.sink.bind(w),source:{[Symbol.asyncIterator]:async function*(){for await(let I of w.source)for(let O of I)yield O}}},E=new ln({peerConnection:u,remoteAddr:e,timeline:{open:Date.now()},metrics:this.metrics?.dialerEvents}),S=sa?"iceconnectionstatechange":"connectionstatechange";u.addEventListener(S,()=>{switch(u.connectionState){case"failed":case"disconnected":case"closed":E.close().catch(I=>{Ac.error("error closing connection",I)}).finally(()=>{n.abort()});break;default:break}},{signal:i}),this.metrics?.dialerEvents.increment({peer_connection:!0});let T=new bn(u,this.metrics?.dialerEvents);return await v.secureInbound(g,C,o),r.upgrader.upgradeOutbound(E,{skipProtection:!0,skipEncryption:!0,muxerFactory:T})}generateNoisePrologue(e,r,n){if(e.getConfiguration().certificates?.length===0)throw Qi("no local certificate");let i=ob(e);if(i==null)throw Qi("no local fingerprint found");let s=i.trim().toLowerCase().replaceAll(":",""),o=Ae(s,"hex"),a=ub.encode(o,r),c=dl.decode(_c(n)),u=Ae("libp2p-webrtc-noise:");return ye([u,a,c])}};function oA(t){let e=t.protoCodes();return e.includes(sA)&&e.includes(gl)&&t.getPeerId()!=null&&!e.includes(pe("p2p-circuit").code)}function aA(){return t=>new Cc(t)}function cA(t){return e=>new ca(e,t??{})}return yb(uA);})();
/*! Bundled license information:

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
return Libp2PWebrtc}));
